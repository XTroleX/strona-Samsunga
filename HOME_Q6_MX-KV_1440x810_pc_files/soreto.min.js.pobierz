var SoretoJS;!function(){"use strict";var e=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t={};!function(){function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}e(t);var i=Math.random().toString().replace(".",""),n=null,r="mattressonline.co.uk".length>0?"mattressonline.co.uk".replace(/\s/,"").split(","):null;function a(e,t){try{if(!window){var o=new XMLHttpRequest;return o.open("POST","https://bigdata.soreto.com/soretobi/soreto-tag-log",!0),o.setRequestHeader("Content-type","application/json"),void o.send(btoa(JSON.stringify({step:e,sessionId:i,unknownSource:!0})))}var a=!1;if(n&&Array.isArray(n)&&n.length>0&&window.SORETO&&window.SORETO.Client&&window.SORETO.Client.id&&(a=n.includes(window.SORETO.Client.id)),!a&&r&&Array.isArray(r)&&r.length>0&&(a=r.some((function(e){return window.location.href.includes(e)}))),!a)return;var s={step:e,sessionId:i,url:window.location.href,windowVarSoreto:window.SORETO,windowVarAWIN:window.AWIN};Object.assign(s,t);var l=new XMLHttpRequest;l.open("POST","https://bigdata.soreto.com/soretobi/soreto-tag-log",!0),l.setRequestHeader("Content-type","application/json"),l.send(btoa(JSON.stringify(s)))}catch(e){console.error(e)}}a("load");var s=function(e,t,i){var n="https://api.soreto.com",r=null,s=!1,l=null,d=null,c={},p=!1,g=!1,u={},h=null,m=null,b=null,f={globalVars:{mini:{minimizationEnabled:!1,launchMinimized:!1,toggleButtonInnerHtml:"<span>-</span>",miniLarge:{minWidthBreakpointPx:992,dimensions:{width:"300px",heigth:"150px"},position:{top:null,bottom:"0px",left:null,right:"0px"},closeButton:{show:!0},border:{showShadow:!0,radius:"10px"},toggleButton:{show:!0,marginTop:"-15px",marginBottom:null,marginRight:null,marginLeft:"-15px"}},miniMedium:{minWidthBreakpointPx:768,dimensions:{width:"100%",heigth:"100px"},position:{top:null,bottom:"0px",left:null,right:"0px"},closeButton:{show:!0},border:{showShadow:!0,radius:"10px"},toggleButton:{show:!0,marginTop:"-15px",marginBottom:null,marginRight:null,marginLeft:"-15px"}},miniSmall:{minWidthBreakpointPx:576,dimensions:{width:"100%",heigth:"100px"},position:{top:null,bottom:"0px",left:null,right:"0px"},closeButton:{show:!0},border:{showShadow:!0,radius:"10px"},toggleButton:{show:!0,marginTop:"-15px",marginBottom:null,marginRight:null,marginLeft:"-15px"}}},userJourney:{deliverPersonalSharedUrlOnShare:!1},accessibility:{modalAriaLabel:""}}},w=null,x={AWIN:"https://routes.soreto.com/awin/",PARTNERIZE:"https://routes.soreto.com/partnerize/"},y=!1,v="soretosharewidget";function O(t,o){var i=new XMLHttpRequest;i.open("POST",n+"/tracking/auditlogtag",!0),i.withCredentials=!0,i.setRequestHeader("Content-type","application/json"),t&&(t.userBrowserURL=e.location.href),i.send(JSON.stringify(t)),i.onreadystatechange=function(){if(4===i.readyState)return o?o():void 0}}function S(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";s&&console.log("Soreto: "+e,t)}function T(e){return/[^\u0000-\u00ff]/g.test(e)}function E(e,t){var o=new XMLHttpRequest;o.open("HEAD",e,!0),o.timeout=4e3,o.onload=function(){this.readyState==this.DONE&&t(404!=this.status&&400!=this.status&&403!=this.status)},o.ontimeout=function(){t(!1)},o.send()}function _(){for(var e=1;e<arguments.length;e++)for(var t in arguments[e])arguments[e].hasOwnProperty(t)&&("object"===o(arguments[0][t])&&"object"===o(arguments[e][t])?_(arguments[0][t],arguments[e][t]):arguments[0][t]=arguments[e][t]);return arguments[0]}function L(o){!function(t,o){if(window.SORETO_ALREADY_INIT)return o(!1);if(!t||"AWIN"!==t.affiliate&&"PARTNERIZE"!==t.affiliate||!t.Client||!t.Client.id||"DYNAMIC"!==t.sourceTag)return o(!0);var i=new XMLHttpRequest;i.onreadystatechange=function(){if(4===i.readyState){if(200!=i.status)return o(!1);try{var n=JSON.parse(i.responseText).find((function(t){return e.location.href.indexOf(t.url)>-1}));if(!n)return o(!1);if("17652"==t.Client.id||"17806"==t.Client.id){if(!n.strategies||!Array.isArray(n.strategies)||n.strategies.length<1)return o(!1);var r=n.strategies.sort((function(e,t){return e.checkOrder-t.checkOrder})).find((function(e){return!(e.challenges&&Array.isArray(e.challenges)&&e.challenges.length>0)||e.challenges.find((function(e){if("querySelectorMatch"==e.type)return document.querySelector("[".concat(e.attribute,"=").concat(e.value,"]"))}))}));if(!r)return o(!1);r.sourceTag&&(t.sourceTag=r.sourceTag),r.widget&&(t.Widget=r.widget)}else n.sourceTag&&(t.originalSourceTag=t.sourceTag,t.sourceTag=n.sourceTag),n.widget&&(t.Widget=n.widget);return o(!0)}catch(e){return o(!1)}}};var n=x[t.affiliate];i.open("GET","".concat(n).concat(t.Client.id,".json"),!0),i.send()}(o,(function(x){!window.SORETO_ALREADY_INIT&&x?(a("init-started"),window.SORETO_ALREADY_INIT=!0,function(e){var t=!0;return e||(console.log("Soreto: SORETO variable not declared!"),t=!1),e.Client?e.Client.id||(console.log("Soreto: SORETO.Client.id variable not declared!"),t=!1):(console.log("Soreto: SORETO.Client variable not declared!"),t=!1),t}(o)&&function(x,v,E,L,B,C,M){var k=new XMLHttpRequest;k.onreadystatechange=function(){4===k.readyState&&(200==k.status?function(x){var v=x.clientTagDetails,E=x.campaingVersionTagDetails;r=v.clientId?v.clientId:"",s=!!v.debugMode&&v.debugMode,l=v.dimensions?v.dimensions:null,d=v.positions?v.positions:null,c=v.lightboxStyles?v.lightboxStyles:{},u=v.features?v.features:{},h=v.domSample,p=!!v.onUserDataVErrorForceTSL&&v.onUserDataVErrorForceTSL,g=!!v.allowNoFirstnameOnTag&&v.allowNoFirstnameOnTag,b=v.lightboxOriginUrlRestriction,m=v.staticPageDimensions?v.staticPageDimensions:null,f=_(f,E);var L,B,C=1500,M=v.showLightboxOnConfirmationPage,k=!1,N="";if(function(e){e.User&&(T(e.User.firstName)&&(e.originalUserFirstName=e.User.firstName,e.userNameVanishedNonLatin=!0,e.User.firstName=""),T(e.User.email)&&(e.originalUserEmail=e.User.email,e.userEmailVanishedNonLatin=!0,e.User.email=""))}(o),O(o),!function(e){var t=!0;function o(){if(!e.User)return S("SORETO.User variable not declared!"),!1;if(!g){if(null==e.User.firstName)return S("SORETO.User.firstName variable not declared!"),!1;if(""==e.User.firstName)return S("SORETO.User.firstName cannot be empty"),!1;if(T(e.User.firstName))return S("SORETO.User.firstName has invalid characters"),!1}return null==e.User.email?(S("%c SORETO.User.email variable not declared!","color: red"),!1):""==e.User.email?(S("%c SORETO.User.email cannot be empty","color: red"),!1):(t=e.User.email,!(!/^[\w-+.]+@([\w-]+\.)+[\w-]{2,4}$/g.test(String(t).toLowerCase())||T(e.User.email))||(S("SORETO.User.email value is invalid!"),!1));var t}function i(){return!("DYNAMIC"!=e.originalSourceTag&&e.Order&&(e.Order.id?""==e.Order.id?(S("SORETO.Order.id cannot be empty"),1):void 0===e.Order.total?(S("SORETO.Order.total variable not declared!"),1):""===e.Order.total?(S("SORETO.Order.total cannot be empty"),1):(t=e.Order.total,"."==(t=t.toString()).substring(t.length-1)&&(t+="0"),!new RegExp("^\\d+(\\.\\d{1,25})?$","g").test(t)&&(S("SORETO.Order.total: "+e.Order.total+" is invalid. It should follow the pattern ###.##"),1)):(S("SORETO.Order.id variable not declared!"),1)));var t}return e.Lightbox||(e.Lightbox={}),e.Lightbox.twoStepLightbox=!!u.twoStepLightbox&&u.twoStepLightbox,u.twoStepLightbox?(t=i(),e.Lightbox.twoStepLightbox=!0):p&&!o()?(e.Lightbox.twoStepLightbox=!0,t=i(),e.forcedTwoStepLightbox=!0,O(e)):t=i()&&o(),!t||e.forcedTwoStepLightbox&&"DYNAMIC"!=e.originalSourceTag?S("%c Refer below for a valid configuration of our Soreto variable:\n      // ##### SORETO TAG VARIABLE EXAMPLE #####\n      var SORETO = {};\n      SORETO.Client = {};\n      SORETO.User = {};\n      SORETO.Order = {};\n      SORETO.Lightbox = {}\n      /*** Set your transaction parameters ***/\n      SORETO.Client.id = '123456';\n      SORETO.User.firstName = 'John';\n      SORETO.User.email = 'john@doe.com';\n      SORETO.Order.id = 'ABCD';\n      SORETO.Order.total = '100.10';\n      ","color: red"):S("%c Soreto Setup is done!","color: green"),t}(o))return o.invalidTagArgs=!0,void O(o);o.testMode||0!=v.active||(M=!1),!1===v.showLightbox&&(M=!1),f._id||(o.noAvailableCampaign=!0,O(o),M=!1),function(t){var o=!0;if(t){var i=t.whiteList,n=t.blackList;i&&i.length>0&&(o=i.some((function(t){return e.location.href.indexOf(t)>-1}))),o&&n&&n.length>0&&(o=!n.some((function(t){return e.location.href.indexOf(t)>-1})))}return o}(b)?(o.Order?(S("Start send order"),function(e){var t,o,n=(t=i,(o={orderObj:{}}).orderObj.lineItems=[],o.setClientId=function(e){this.orderObj.clientId=e},o.setBuyerEmail=function(e){this.orderObj.buyerEmail=e},o.setTestMode=function(e){this.orderObj.testMode=e||!1},o.setOrderId=function(e){S("soreto.order.id:"+e),this.orderObj.orderId=e},o.setVoucherCode=function(e){e&&(this.orderObj.voucherCode=e)},o.setOrderTotal=function(e){var t,o,i,n,r,a,s,l=parseFloat(e);(function(e){if(!isFinite(e))return 0;for(var t=1,o=0;Math.round(e*t)/t!==e;)t*=10,o++;return o})(l)>6&&(t=l,o=6,i=Math.pow(10,o),s=(a=(n=+(o?t*i:t).toFixed(8))-(r=Math.floor(n)))>.5-1e-8&&a<.5+1e-8?r%2==0?r:r+1:Math.round(n),l=o?s/i:s),S("soreto.order.total:"+l),this.orderObj.orderTotal=l},o.addLineItem=function(e,t,o,i,n,r){this.orderObj.lineItems.push({name:e,description:t,sku:o,quantity:i,price:n,category:r})},o.setCurrency=function(e){e&&(this.orderObj.currency=e)},o.setCountry=function(e){e&&(this.orderObj.country=e)},o.ready=function(){S("soreto.ready.called: true"),t.orderObj=this.getOrder()},o.getOrder=function(){return this.orderObj},o);n.setClientId(r),n.setOrderId(e.Order.id),n.setOrderTotal(e.Order.total),n.setVoucherCode(e.Order.voucherCode),n.setCurrency(e.Order.currency),n.setCountry(e.Order.country),n.setBuyerEmail(e.User.email),n.setTestMode(e.testMode),n.ready()}(o),S("End send order")):S("no order"),L={event:"REFERRED PAGE VIEW",properties:{client_id:v.clientId,referrer:e.location.href}},(B=new XMLHttpRequest).onreadystatechange=function(){var e=4,t=200;B.readyState===e&&B.status!==t&&console.log(B.status)},B.open("GET",n+"/analytics?clientId="+r+"&info="+R(L),!0),B.withCredentials=!0,B.send(),0!=M&&o.Lightbox&&"doNotShow"in o.Lightbox&&(S("Local do not show value is:"+o.Lightbox.doNotShow),M=!o.Lightbox.doNotShow),0!=M&&o.Lightbox&&"show"in o.Lightbox&&(S("Local show prop value is:"+o.Lightbox.show),M=0!=o.Lightbox.show),o.Widget&&"showWidget"in o.Widget&&"widgetType"in o.Widget&&(S("Local do widget show value is:"+o.Widget),k=!!o.Widget.showWidget,o.Widget.widgetType&&(N=o.Widget.widgetType)),i.orderObj&&(S("Start generate pixel"),function(o){o.sdkv="soreto_js",o.userBrowserURL=e.location.href;var i=document.createElement("img");if(i.setAttribute("id","reverbPixel"),i.style.display="none",document.body.appendChild(i),t.getElementById("reverbPixel")){var r=t.getElementById("reverbPixel");S("soreto pixel called");var a=R(o);r.src=n+"/tracking/reverbpixel.png?info="+a}}(i.orderObj),S("End generate pixel"),f.globalVars&&f.globalVars.showLightboxMinimumOrderValue&&i.orderObj.orderTotal<f.globalVars.showLightboxMinimumOrderValue&&(M=!1)),S("Start open lightbox"),o.Lightbox&&null!=o.Lightbox.lightboxLaunchTimeout&&(C=o.Lightbox.lightboxLaunchTimeout),i.opts={timeout:C,firstName:o.User.firstName,email:o.User.email,testMode:o.testMode,campaignVersionId:f._id,dimensions:l,positions:d,country:o.Order?o.Order.country:"",sourceTag:o.sourceTag,twoStepLightbox:o.Lightbox.twoStepLightbox,showSoretoWidget:k,widgetType:N,staticPageDimensions:m,blockMinimization:o.blockMinimization},w=o,M?(S("the lightbox has been set to show."),a("opening-lightbox"),i.openLightbox(o)):S("the lightbox has been set not to show."),function(e){if("644ab5137008b30ff92276c6"===e){if(I)return;I=!0;var o="students-staging.passmefast.co.uk/dashboard",n="students-staging.passmefast.co.uk/refer-a-friend",r="students.passmefast.co.uk/dashboard",a="students.passmefast.co.uk/refer-a-friend",s=2e3,l=!1,d=!1;try{var c="";new MutationObserver((function(){if(window.location.href!==c){if(!window.location.href.includes(o)&&!window.location.href.includes(r)||l)if(window.location.href.includes(n)||window.location.href.includes(a)){t.getElementById("uglipop_overlay_wrapper")&&(t.getElementById("uglipop_overlay_wrapper").style.display="none",t.getElementById("uglipop_overlay").style.display="none",t.getElementById("uglipop_content_fixed").style.display="none");var e=t.getElementById("soretoIFrame");e&&e.remove();var p={Client:{},User:{}};p.Client.id="644ab5137008b30ff92276c6",p.Widget={},p.Widget.showWidget=!0,p.Widget.widgetType="sharestaticpage",p.sourceTag="STATIC_PAGE_ON_CLIENT",window.SORETO=p,window.SORETO_ALREADY_INIT=!1,w=!1,i.reInit(),d||(y=!1),i.showLightbox(),d=!0}else l&&(t.getElementById("uglipop_overlay_wrapper").style.display="none",t.getElementById("uglipop_overlay").style.display="none",t.getElementById("uglipop_content_fixed").style.display="none");else setTimeout((function(){if(window.location.href.includes(o)||window.location.href.includes(r)){var e={Client:{},User:{}};e.Client.id="644ab5137008b30ff92276c6",e.sourceTag="CONFIRMATION_PAGE",window.SORETO=e,window.SORETO_ALREADY_INIT=!1,w=!1,i.reInit(),l||(y=!1),i.showLightbox(),l=!0}}),s);c=window.location.href}})).observe(document,{subtree:!0,childList:!0})}catch(e){console.error(e)}}}(r),S("End open lightbox")):s&&(o.blockedByOriginUrl=!0,O(o))}(JSON.parse(k.responseText)):console.log("Invalid Soreto client id"))};var N="?user_browser_url="+btoa(e.location.href);v&&(N+="&campaign_version_id="+v),E&&(N+="&country="+E),L&&(N+="&source_tag="+L),B&&(N+="&widget_type="+B),1==C&&(N+="&test_mode="+C),k.open("GET","https://api.soreto.com/api/v1/clients/tagdetails/"+x+N,!0),k.withCredentials=!0,k.send()}(o.Client.id,o.Client.campaignVersionId,o.Order&&o.Order.country?o.Order.country:o.Client.country,o.sourceTag,o.Widget?o.Widget.widgetType:null,o.testMode)):a(window.SORETO_ALREADY_INIT?"init-blocked-already-init":"init-blocked-doorman")}))}var I=!1;function R(e){return btoa(JSON.stringify(e))}function B(e){try{if(!h)return;var t=h.find((function(e){return!e.url||window.location.href.includes(e.url)}));if(!t||!t.sampleRate||isNaN(t.sampleRate))return;if(!(e||Math.random()<t.sampleRate/100))return;var o=t.delay&&!isNaN(t.delay)?t.delay:3e3;setTimeout((function(){try{var e=document.createElement("script");e.async=!0,e.src="https://dist.soreto.com/scripts/analysis/dsample/"+r+".min.js",document.head.appendChild(e)}catch(e){console.error(e)}}),o)}catch(e){console.error(e)}}function C(){!function(e,t){var o={type:"lightbox-close-cta"};o.clientId=r,o.campaignVersionId=f?f._id:null,o.sourceTag=t.sourceTag,o.testMode=t.testMode;var i=new XMLHttpRequest;i.open("POST",n+"/api/v1/tracking",!0),i.setRequestHeader("Content-type","application/json"),i.send(JSON.stringify(o))}(0,window.SORETO),t.getElementById("uglipop_overlay_wrapper").style.display="none",t.getElementById("uglipop_overlay").style.display="none",t.getElementById("uglipop_content_fixed").style.display="none"}function M(){var e=t.getElementById("uglipop_overlay_wrapper"),o=t.getElementById("uglipop_overlay"),i=t.getElementById("uglipop_content_fixed");e&&(e.style.display="initial"),o&&(o.style.display="initial"),i&&(i.style.display="initial")}function k(e){var o=t.getElementById("closeButton");if("closeButton"==e&&o.classList&&o.classList.contains("reverb-lightbox-close-mini"))C();else{t.getElementById("uglipop_overlay_wrapper").classList.toggle("hide"),t.getElementById("uglipop_overlay").classList.toggle("hide");var i=t.getElementById("uglipop_content_fixed");i.classList.toggle("uglipop_content_fixed"),i.classList.toggle("uglipop_content_fixed_mini"),o.classList.toggle("reverb-lightbox-close-mini")}}return i.settings={dimensions:{dimD:{w:"800px",h:"500px"},dimT:{w:"800px",h:"500px"},dimM:{w:"300px",h:"450px"}},breakpoints:{dimT:"1024px",dimM:"850px"},positions:{posD:{top:"50%",left:"50%"},posT:{top:"50%",left:"50%"},posM:{top:"50%",left:"50%"}},borderRadius:"10px",backgroundDim:!0,dropShadow:!0,clickBackgroundToClose:!1,showCloseButton:!0,closeButtonStyle:"hoverOut",closeButtonColor:"white"},i.reInit=function(){a("reload"),L(window.SORETO)},i.staticPageSettings={dimensions:{dimD:{w:"100%",h:"100%"},dimT:{w:"100%",h:"100%"},dimM:{w:"100%",h:"100%"}}},i.initLightbox=function(e){var o=t.createElement("div"),n=t.createElement("div"),r=t.createElement("div"),a=t.createElement("div"),s=t.createElement("div"),l=t.createElement("span"),d=e.campaignVersionDetails&&e.campaignVersionDetails.globalVars?e.campaignVersionDetails.globalVars.mini:null;if(n.id="uglipop_content_fixed",n.className="uglipop_content_fixed",n.setAttribute("role","dialog"),n.setAttribute("aria-modal","true"),n.setAttribute("aria-label",e.campaignVersionDetails.globalVars.accessibility.modalAriaLabel),s.id="closeButton",s.className+=" reverb-lightbox-close",s.setAttribute("aria-label","Close"),s.onclick=function(){return 1==d.minimizationEnabled?i.toggleLightboxState("closeButton"):i.close()},l.className="default-close-text",l.innerHTML=d&&1==d.minimizationEnabled?"-":"x",s.appendChild(l),e.campaignVersionDetails.globalVars&&e.campaignVersionDetails.globalVars.lightboxRenderVersion&&(e.showCloseButton=!1),n.appendChild(s),r.id="uglipop_popbox",n.appendChild(r),o.id="uglipop_overlay",a.id="uglipop_overlay_wrapper",e.backgroundDim)for(var c in a.setAttribute("style","position:absolute;top:0;bottom:0;left:0;right:0;"),o.setAttribute("style","position:fixed;top:0;bottom:0;left:0;right:0;width:100%;height:100%;opacity:0.3;background-color:black;"),e.overlayStyles)e.overlayStyles.hasOwnProperty(c)&&o.style.setProperty(c,e.overlayStyles[c]);a.appendChild(o),t.body.appendChild(a),t.body.appendChild(n),a.classList.add("hide"),o.classList.add("hide"),n.classList.add("hide"),e.clickBackgroundToClose&&(o.onclick=function(){return i.close()});var p,g=e.campaignVersionDetails.globalVars.lightboxDimensions,u=g&&g.large&&g.large.w||e.dimensions.dimD.w,h=g&&g.large&&g.large.h||e.dimensions.dimD.h,m=g&&g.medium&&g.medium.w||e.dimensions.dimT.w,b=g&&g.medium&&g.medium.h||e.dimensions.dimT.h,f=g&&g.small&&g.small.w||e.dimensions.dimM.w,w=g&&g.small&&g.small.h||e.dimensions.dimM.h,x=t.createElement("style");if(x.innerHTML=".reverb-lightbox{      border-radius: "+e.borderRadius+";      background-color:white;      overflow: hidden;      "+(e.dropShadow?"-webkit-box-shadow: 0px 0px 20px 3px rgba(0,0,0,0.75);        -moz-box-shadow: 0px 0px 20px 3px rgba(0,0,0,0.75);        box-shadow: 0px 0px 20px 3px rgba(0,0,0,0.75);":"")+"      height:100%;    }    .uglipop_content_fixed {      width:"+u+";      height:"+h+";      top:"+e.positions.posD.top+";      left:"+e.positions.posD.left+";      position:fixed;      transform: translate(-50%, -50%);      -webkit-transform: translate(-50%, -50%);      -ms-transform: translate(-50%, -50%);    }    @media screen and (max-width: "+e.breakpoints.dimT+"){      .uglipop_content_fixed {        width: "+m+";        height: "+b+";        top:"+e.positions.posT.top+";        left:"+e.positions.posT.left+";      }    }    @media screen and (max-width: "+e.breakpoints.dimM+"){      .uglipop_content_fixed {        width: "+f+";        height: "+w+";        top:"+e.positions.posM.top+";        left:"+e.positions.posM.left+";      }    }    .uglipop_content_fixed{      z-index:2147483647;    }    #uglipop_overlay_wrapper{      z-index:2147483647;    }    #uglipop_popbox > iframe{      display:block;    }    .reverb-lightbox-iframe {      overflow: hidden;      width: 100%;      height: 100%;      border: none;    }    .hide {      display: none !important;      height: 0px !important;      opacity: 0 !important;      transition: all 200ms linear !important;    }    "+("hoverIn"==(p=e.closeButtonStyle)?"div.reverb-lightbox-close{          width: 25px;          height: 35px;          position: absolute;          top: 0;          right: 0;          cursor:pointer;          color: "+e.closeButtonColor+";          text-align: center;          display: "+(e.showCloseButton?"inline-block;":"none;")+'          z-index:2147483647;        }        div.reverb-lightbox-close span{          display:none;          content:"";        }        div.reverb-lightbox-close:after{          display: inline-block;          content: "\\00d7";          font-size: 34px;          font-weight: 100;          line-height: 19px;        }':"squareIn"==p?"div.reverb-lightbox-close{          position: absolute;          right: 2px;          top: 5px;          width: 27px;          background-color: "+e.closeButtonBGColor+';          text-align: center;          cursor:pointer;          height: 23px;          font-family: Arial;        }        div.reverb-lightbox-close span{          display:none;          content:"";        }        div.reverb-lightbox-close::before{          color: '+e.closeButtonColor+';          content: "\\2715";          font-size: 17px;          font-weight: 100;        }':"custom"==p?"div.reverb-lightbox-close{          position: absolute;          right: "+e.closeButtonSpaceRight+";          top: "+e.closeButtonSpaceTop+";          width: "+e.closeButtonImageWidth+";          height: "+e.closeButtonImageHeight+";          background-size: cover !important;          background: url("+e.closeButtonImageURL+') no-repeat center;          cursor:pointer;        }        div.reverb-lightbox-close span{          display:none;          content:"";        }':"div.reverb-lightbox-close{        width: 35px;        height: 35px;        position: absolute;        top: 0;        right: 0;        margin-top: -13px;        margin-right: -13px;        cursor:pointer;        color: "+e.closeButtonColor+";        border-radius: 50%;        background: #2d2d2d;        text-align: center;        display: "+(e.showCloseButton?"inline-block;":"none;")+"        -webkit-box-shadow: -1px 1px 5px 0px rgba(77,77,77,1);        -moz-box-shadow: -1px 1px 5px 0px rgba(77,77,77,1);        box-shadow: -1px 1px 5px 0px rgba(77,77,77,1);        z-index:2147483647;      }      div.reverb-lightbox-close span {        font-family: sans-serif;        -webkit-font-smoothing: auto;        line-height: 35px;        font-size: 20px;        font-weight: 400;      }"),t.head.appendChild(x),d&&1==d.minimizationEnabled){for(var v="\n\n        .uglipop_content_fixed_mini {\n          position: fixed;\n          opacity: 1;\n          z-index: 2147483647;\n        }\n\n        .uglipop_content_fixed_mini > div.reverb-lightbox {\n          background-color: transparent;\n        }\n\n        /* hide toogle button when the lightbox window is in regular size */\n        div.reverb-lightbox-close > .toggle-button {\n          display: none;\n        }\n\n        /* display toogle button when the lightbox window is in mini mode */\n        div.reverb-lightbox-close-mini > .toggle-button {\n          display: block;\n        }\n\n        /* hide regular close button content when the lightbox window is in mini mode */\n        div.reverb-lightbox-close-mini > .default-close-text {\n          display: none;\n        }\n      ",O=null,S=0,T=[d.miniLarge,d.miniMedium,d.miniSmall];S<T.length;S++){var E=T[S];v+="\n\n          @media screen and (min-width: ".concat(E.minWidthBreakpointPx,"px)\n            ").concat(O?"and (max-width: ".concat(O.minWidthBreakpointPx,"px)"):"","\n          {\n\n              /* this class defines the size and position of the mini version of the lightbox */\n\n              .uglipop_content_fixed_mini {\n                width: ").concat(E.dimensions.width,";\n                height: ").concat(E.dimensions.heigth,";\n                top: ").concat(E.position.top||"auto",";\n                bottom: ").concat(E.position.bottom||"auto",";\n                left: ").concat(E.position.left||"auto",";\n                right: ").concat(E.position.right||"auto",";\n              }\n\n              .uglipop_content_fixed_mini iframe {\n                height: ").concat(E.dimensions.heigth,";\n              }\n\n              /* this class defines the size and position of the close icon */\n\n              div.reverb-lightbox-close-mini {\n                display: ").concat(1==E.closeButton.show?"block":"none"," !important;\n                top: ").concat(E.position.top?"auto":"0px"," !important;\n                bottom: ").concat(E.position.bottom?"auto":"0px"," !important;\n                right: ").concat(E.position.right?"auto":"0px"," !important;\n                left: ").concat(E.position.left?"auto":"0px"," !important;\n                margin-top: ").concat(E.closeButton.marginTop||"auto"," !important;\n                margin-bottom: ").concat(E.closeButton.marginBottom||"auto"," !important;\n                margin-right: ").concat(E.closeButton.marginRight||"auto"," !important;\n                margin-left: ").concat(E.closeButton.marginLeft||"auto",' !important;\n              }\n\n              /* this class defines the aspects of the "border" of the lightbox */\n\n              .reverb-lightbox-mini {\n                border-radius: ').concat(E.border.radius," !important;\n                ").concat(0==E.border.showShadow?"box-shadow:none !important;":"","\n              }\n          }\n        "),O=E}var _=t.createElement("style");if(_.innerHTML=v,t.head.appendChild(_),d.toggleButtonInnerHtml){var L=t.createElement("div");L.classList.add("toggle-button"),L.innerHTML=d.toggleButtonInnerHtml,s.append(L)}}y=!0},i.initShareStaticPage=function(e){var o=t.createElement("style");o.innerHTML=".reverb-static-lightbox{      width:"+e.dimensions.dimD.w+";      height:"+e.dimensions.dimD.h+";    }    #"+v+" {      width:"+e.dimensions.dimD.w+";      height:"+e.dimensions.dimD.h+";    }    #"+v+" > iframe{      display:block;    }    .reverb-static-lightbox-iframe {      overflow: hidden;      width: 100%;      height: 100%;      border: none;    }    ",t.head.appendChild(o),y=!0},i.openLightbox=function(o){var a=i,s=i.opts,l=s.email?s.email:"",d=s.firstName?s.firstName:"",p=s.testMode?s.testMode:"",g=s.campaignVersionId?s.campaignVersionId:"",u=s.country?s.country:"",h=s.sourceTag?s.sourceTag:"",m=s.twoStepLightbox?s.twoStepLightbox:"",b=o.Order&&o.Order.id?o.Order.id:"",w=e.location.href,x=f.globalVars.mini.minimizationEnabled,v={x:window.innerWidth,y:window.innerHeight},O=f.globalVars.userJourney.deliverPersonalSharedUrlOnShare,S=t.referrer;if(!s.products||function(e){if(!e.length)return!1;for(var t=0;t<e.length;t++){var o=e[t];if(!o.hasOwnProperty("image")||!o.hasOwnProperty("productUrl"))return console.error("Soreto failed to launch: Product "+(t+1)+" is missing a required value"),!1}return!0}(s.products)){var T=s.products;if(s.showSoretoWidget){s.staticPageDimensions&&(i.staticPageSettings.dimensions=s.staticPageDimensions);var L=_(i.staticPageSettings,o.staticPageSettings);"sharestaticpage"==s.widgetType&&(0==y&&i.initShareStaticPage(L),setTimeout((function(){var e=R({products:T,email:l,first_name:d,test_mode:p,campaign_version_id:g,country:u,sourceTag:h,client_order_id:b,two_step_lightbox:m,user_browser_url:w,minimization_enabled:x,window_sizes:v,dpsuonshare:O,referrer:S,sdkv:"soreto_js"}),t=n+"/placement/"+r+"/sharestaticpage?encoded="+e;E(t,(function(e){e&&(a.inject({class:s.class||"reverb-static-lightbox",source:"html",content:'<iframe class="reverb-static-lightbox-iframe" src="'+t+'" allow="clipboard-read; clipboard-write"></iframe>'}),window.SORETO_PLACEMENT_OPTIONS={campaignVersionId:g,minimizationEnabled:x,sourceTag:h},B())}))}),s.timeout||1e3))}else{s.dimensions&&(i.settings.dimensions=s.dimensions),s.positions&&(i.settings.positions=s.positions);var I=_(i.settings,o.lighboxSettings,c,{campaignVersionDetails:f});0==y&&i.initLightbox(I),setTimeout((function(){var e,t=R({products:T,email:l,first_name:d,test_mode:p,campaign_version_id:g,country:u,source_tag:h,client_order_id:b,two_step_lightbox:m,user_browser_url:w,minimization_enabled:x,window_sizes:v,dpsuonshare:O,referrer:S,sdkv:"soreto_js"});E(e=g&&I.campaignVersionDetails&&I.campaignVersionDetails.globalVars&&I.campaignVersionDetails.globalVars.lightboxRenderVersion?n+"/lightbox/v"+I.campaignVersionDetails.globalVars.lightboxRenderVersion+"/"+r+"/"+g+"?encoded="+t:n+"/placement/"+r+"/lightbox?encoded="+t,(function(t){t&&(a.popup({class:s.class||"reverb-lightbox reverb-lightbox-mini",source:"html",miniMode:f.globalVars.mini.minimizationEnabled,launchMinimized:!1!==s.blockMinimization&&f.globalVars.mini.launchMinimized,content:'<iframe id="soretoIFrame" class="reverb-lightbox-iframe" src="'+e+'" allow="clipboard-read; clipboard-write"></iframe>'}),window.SORETO_PLACEMENT_OPTIONS={campaignVersionId:g,minimizationEnabled:x,sourceTag:h},B())}))}),s.timeout||1e3)}}},i.popup=function(e){e&&("string"==typeof e.class&&e.class&&t.getElementById("uglipop_popbox").setAttribute("class",e.class),e.keepLayout&&!e.class&&t.getElementById("uglipop_popbox").setAttribute("style","position:relative;height:300px;width:300px;background-color:white;opacity:1;"),"string"==typeof e.content&&e.content&&"html"==e.source&&(t.getElementById("uglipop_popbox").innerHTML=e.content),"string"==typeof e.content&&e.content&&"div"==e.source&&(t.getElementById("uglipop_popbox").innerHTML=t.getElementById(e.content).innerHTML),a("lightbox-iframe-raised"));var o=t.getElementById("uglipop_overlay_wrapper"),i=t.getElementById("uglipop_overlay"),n=t.getElementById("uglipop_content_fixed");n.classList.remove("hide"),e.miniMode&&e.launchMinimized?(n.classList.remove("uglipop_content_fixed"),n.classList.add("uglipop_content_fixed_mini"),t.getElementById("closeButton").classList.add("reverb-lightbox-close-mini")):(o.classList.remove("hide"),i.classList.remove("hide")),window.addEventListener("message",(function(e){switch(e.data){case"toogle-lightbox":k();break;case"close-lightbox":C()}}),!1)},i.showLightbox=function(e){var o=12;!function n(){if(o){if(!w)return o--,void setTimeout(n,250);o=0;var r=t.getElementById("soretoIFrame");r?e?(r.remove(),i.openLightbox(w),M()):M():i.openLightbox(w)}else console.warn("The lightbox can't be shown.")}()},i.inject=function(e){e&&("string"==typeof e.class&&e.class&&t.getElementById(v).setAttribute("class",e.class),"string"==typeof e.content&&e.content&&"html"==e.source&&(t.getElementById(v).innerHTML=e.content))},i.close=function(){C()},i.toggleLightboxState=function(e){k(e)},L(window.SORETO),i}(window,document,s||{});t.default=s}(),SoretoJS=t}();