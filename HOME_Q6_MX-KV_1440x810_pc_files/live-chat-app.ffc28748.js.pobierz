((self||this)["webpackJsonp@sprinklrjs/chat-web-client"]=(self||this)["webpackJsonp@sprinklrjs/chat-web-client"]||[]).push([[99],{1055:function(e,t,n){"use strict";n.d(t,"a",(function(){return P}));var a=n(191),o=n.n(a),i=n(31),c=n.n(i),r=n(50),s=n.n(r),d=n(339),l=n.n(d),u=n(217),b=n.n(u),p=n(197),f=n(284),y=n(257);var O=()=>e=>{const t={eventId:e.label,eventType:e.action.id,additional:{...e.additional,conversationId:e.conversationId,page:e.page,appId:e.appId}};Object(f.a)({topic:y.e,payload:{data:t}})},v=n(266),g=n(268),h=n(199);const j=new Set([g.a.AGENT_ASSIGNED.id,g.a.CALL_ENDED.id,g.a.CALL_MISSED.id,g.a.CALL_DECLINED.id,g.a.CALL_FAILED.id,g.a.CALL_PAGE_MAXIMISED.id,g.a.CALL_PAGE_MINIMISED.id,g.a.ATTACHMENT_BUTTON_CLICKED.id,g.a.SEND_BUTTON_CLICKED.id,g.a.SESSION_ACTIVE.id]);var m=()=>async e=>{if(j.has(e.action.id))return;const t={page:e.page,userAgent:e.userAgent,device:e.device,timeZone:e.timeZone,eventType:e.action.label,eventId:e.label,conversationId:e.conversationId,sourceType:"LIVE_CHAT",sourceSubType:e.sourceSubType,...e.additional};try{await v.a.post("/livechat/prompt/browse/event",t)}catch(n){Object(h.b)(n)}},I=n(264),C=n(233),T=n(209),E=n(298),S=n(212),x=n(317),_=n(1),A=n(0),w=n(418),M=n(447),R=n(192);const P=o.a.createContext(b.a);let D=[];const N=e=>Object(x.c)(Object(S.e)(e)),L=e=>{const t=Object(I.a)(),o=Object(C.a)(),i=Object(a.useRef)(D),[r,d]=Object(a.useState)(!c()(i.current)),u=Object(T.a)(E.c),b=Object(T.a)(E.b),f=Object(p.d)(N),y=Object(A.R)(),v=null===o||void 0===o?void 0:o.sendSessionActiveEvent;return Object(a.useEffect)((()=>{if(r&&f.length){const e={...f[0],category:"Sprinklr Widget",device:t.device,page:t.pageUrl,userAgent:t.userAgent,timeZone:t.timeZone,appId:Object(_.a)().appId};((e,t)=>{Object(w.c)((()=>{s()(e,(e=>{e(t)}))}))})(i.current,e),b()}}),[f,r]),Object(a.useEffect)((()=>{y||r||(e=>{var t,a,o,i;const c=[],r=null===e||void 0===e||null===(t=e.analyticsSettings)||void 0===t||null===(a=t.googleAnalytics)||void 0===a?void 0:a.trackerId,s=null===e||void 0===e||null===(o=e.analyticsSettings)||void 0===o||null===(i=o.sprinklrAnalytics)||void 0===i?void 0:i.enabled;return null!==r&&void 0!==r&&r.startsWith("UA-")?c.push(n.e(147).then(n.bind(null,1522)).then((e=>e.default.createTracker({trackerId:r},{canAccessParent:Object(A.P)()}))).catch((()=>{}))):null!==r&&void 0!==r&&r.startsWith("G-")&&c.push(n.e(84).then(n.bind(null,1523)).then((e=>e.default.createTracker({trackerId:r},{canAccessParent:Object(A.P)()}))).catch((()=>{}))),s&&c.push(m()),c.push(O()),Promise.all(c)})(o).then((e=>{i.current=l()(e),D=i.current,d(!0)}))}),[]),Object(a.useEffect)((()=>{let e;return v&&(e=M.d.on((e=>{if(e.type===M.e)u({label:g.a.SESSION_ACTIVE.label,action:g.a.SESSION_ACTIVE})}))),()=>{var t;return null===(t=e)||void 0===t?void 0:t()}}),[v]),Object(R.jsx)(P.Provider,{value:u},e.children)};t.b=o.a.memo(L)},1066:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var a=n(217),o=n.n(a),i=n(909);const c=5;function r(e,t){return new Promise(((n,a)=>{setTimeout((()=>{e().then(n,a)}),t)}))}const s={},d=(e,t)=>{s[t]=e,e.catch(o.a).finally((()=>{delete s[t]}))};var l=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{maxAttempts:n=c}=t;function a(e){return 1e3*(e?Math.pow(2,Math.min(e-1,n)):0)}function o(e,t){return r(e,a(t)).catch((a=>{if(t===n)throw a;return o(e,t+1)}))}const l=Object(i.a)(e.toString());if(l in s)return s[l];const u=o(e,0);return d(u,l),u};const u=()=>l((()=>n.e(51).then(n.bind(null,1488))),{maxAttempts:3})},1067:function(e,t,n){"use strict";var a=n(191),o=n.n(a),i=n(290),c=n.n(i),r=n(382),s=n(222),d=n(192);var l=e=>{const t=Object(r.a)(e.window,e.onResize),n=Object(a.useMemo)((()=>[...c()(e.resizeRefs||[]),t]),[t,e.resizeRefs]),i=Object(s.a)(...n);return Object(d.jsx)(o.a.Fragment,null,e.children(i))};t.a=l},1141:function(e,t){var n=Object.prototype.hasOwnProperty;e.exports=function(e,t){return null!=e&&n.call(e,t)}},1142:function(e,t,n){var a=n(526);e.exports=function(e,t){for(var n=-1,o=e.length;++n<o&&a(t,e[n],0)>-1;);return n}},1181:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(380),o=a.__importStar(n(191)),i=n(191),c=a.__importDefault(n(1182)),r=a.__importDefault(n(1183));t.default=function(e){return function(t){var n,s;s=o.isValidElement(t)?(n=t).props:t;var d=c.default({buffered:[],time:0,duration:0,paused:!0,muted:!1,volume:1}),l=d[0],u=d[1],b=i.useRef(null),p=function(e,t){return function(n){try{t&&t(n)}finally{e&&e(n)}}},f=function(){return u({paused:!1})},y=function(){return u({paused:!0})},O=function(){var e=b.current;e&&u({muted:e.muted,volume:e.volume})},v=function(){var e=b.current;if(e){var t=e.duration,n=e.buffered;u({duration:t,buffered:r.default(n)})}},g=function(){var e=b.current;e&&u({time:e.currentTime})},h=function(){var e=b.current;e&&u({buffered:r.default(e.buffered)})};n=n?o.cloneElement(n,a.__assign(a.__assign({controls:!1},s),{ref:b,onPlay:p(s.onPlay,f),onPause:p(s.onPause,y),onVolumeChange:p(s.onVolumeChange,O),onDurationChange:p(s.onDurationChange,v),onTimeUpdate:p(s.onTimeUpdate,g),onProgress:p(s.onProgress,h)})):o.createElement(e,a.__assign(a.__assign({controls:!1},s),{ref:b,onPlay:p(s.onPlay,f),onPause:p(s.onPause,y),onVolumeChange:p(s.onVolumeChange,O),onDurationChange:p(s.onDurationChange,v),onTimeUpdate:p(s.onTimeUpdate,g),onProgress:p(s.onProgress,h)}));var j=!1,m={play:function(){var e=b.current;if(e&&!j){var t=e.play();if("object"===typeof t){j=!0;var n=function(){j=!1};t.then(n,n)}return t}},pause:function(){var e=b.current;if(e&&!j)return e.pause()},seek:function(e){var t=b.current;t&&void 0!==l.duration&&(e=Math.min(l.duration,Math.max(0,e)),t.currentTime=e)},volume:function(e){var t=b.current;t&&(e=Math.min(1,Math.max(0,e)),t.volume=e,u({volume:e}))},mute:function(){var e=b.current;e&&(e.muted=!0)},unmute:function(){var e=b.current;e&&(e.muted=!1)}};return i.useEffect((function(){var e=b.current;e&&(u({volume:e.volume,muted:e.muted,paused:e.paused}),s.autoPlay&&e.paused&&m.play())}),[s.src]),[n,l,m,b]}}},1182:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(191);t.default=function(e){void 0===e&&(e={});var t=a.useState(e),n=t[0],o=t[1];return[n,a.useCallback((function(e){o((function(t){return Object.assign({},t,e instanceof Function?e(t):e)}))}),[o])]}},1183:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e){for(var t=[],n=0;n<e.length;n++)t.push({start:e.start(n),end:e.end(n)});return t}},1189:function(e,t,n){var a={"./classic/pages":[1402,15,112],"./modern/pages":[1401,15,113]};function o(e){if(!n.o(a,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=a[e],o=t[0];return Promise.all(t.slice(1).map(n.e)).then((function(){return n(o)}))}o.keys=function(){return Object.keys(a)},o.id=1189,e.exports=o},1190:function(e,t,n){"use strict";var a=n(1191);t.__esModule=!0,t.default=function(e,t){e.classList?e.classList.add(t):(0,o.default)(e,t)||("string"===typeof e.className?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))};var o=a(n(1192));e.exports=t.default},1191:function(e,t){e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.default=e.exports,e.exports.__esModule=!0},1192:function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")},e.exports=t.default},1193:function(e,t,n){"use strict";function a(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}e.exports=function(e,t){e.classList?e.classList.remove(t):"string"===typeof e.className?e.className=a(e.className,t):e.setAttribute("class",a(e.className&&e.className.baseVal||"",t))}},1194:function(e,t,n){"use strict";t.__esModule=!0,t.default=t.EXITING=t.ENTERED=t.ENTERING=t.EXITED=t.UNMOUNTED=void 0;var a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var a=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};a.get||a.set?Object.defineProperty(t,n,a):t[n]=e[n]}return t.default=e,t}(n(250)),o=r(n(191)),i=r(n(293)),c=n(904);n(905);function r(e){return e&&e.__esModule?e:{default:e}}var s="unmounted";t.UNMOUNTED=s;var d="exited";t.EXITED=d;var l="entering";t.ENTERING=l;var u="entered";t.ENTERED=u;var b="exiting";t.EXITING=b;var p=function(e){var t,n;function a(t,n){var a;a=e.call(this,t,n)||this;var o,i=n.transitionGroup,c=i&&!i.isMounting?t.enter:t.appear;return a.appearStatus=null,t.in?c?(o=d,a.appearStatus=l):o=u:o=t.unmountOnExit||t.mountOnEnter?s:d,a.state={status:o},a.nextCallback=null,a}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var c=a.prototype;return c.getChildContext=function(){return{transitionGroup:null}},a.getDerivedStateFromProps=function(e,t){return e.in&&t.status===s?{status:d}:null},c.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},c.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==l&&n!==u&&(t=l):n!==l&&n!==u||(t=b)}this.updateStatus(!1,t)},c.componentWillUnmount=function(){this.cancelNextCallback()},c.getTimeouts=function(){var e,t,n,a=this.props.timeout;return e=t=n=a,null!=a&&"number"!==typeof a&&(e=a.exit,t=a.enter,n=void 0!==a.appear?a.appear:t),{exit:e,enter:t,appear:n}},c.updateStatus=function(e,t){if(void 0===e&&(e=!1),null!==t){this.cancelNextCallback();var n=i.default.findDOMNode(this);t===l?this.performEnter(n,e):this.performExit(n)}else this.props.unmountOnExit&&this.state.status===d&&this.setState({status:s})},c.performEnter=function(e,t){var n=this,a=this.props.enter,o=this.context.transitionGroup?this.context.transitionGroup.isMounting:t,i=this.getTimeouts(),c=o?i.appear:i.enter;t||a?(this.props.onEnter(e,o),this.safeSetState({status:l},(function(){n.props.onEntering(e,o),n.onTransitionEnd(e,c,(function(){n.safeSetState({status:u},(function(){n.props.onEntered(e,o)}))}))}))):this.safeSetState({status:u},(function(){n.props.onEntered(e)}))},c.performExit=function(e){var t=this,n=this.props.exit,a=this.getTimeouts();n?(this.props.onExit(e),this.safeSetState({status:b},(function(){t.props.onExiting(e),t.onTransitionEnd(e,a.exit,(function(){t.safeSetState({status:d},(function(){t.props.onExited(e)}))}))}))):this.safeSetState({status:d},(function(){t.props.onExited(e)}))},c.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},c.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},c.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(a){n&&(n=!1,t.nextCallback=null,e(a))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},c.onTransitionEnd=function(e,t,n){this.setNextCallback(n);var a=null==t&&!this.props.addEndListener;e&&!a?(this.props.addEndListener&&this.props.addEndListener(e,this.nextCallback),null!=t&&setTimeout(this.nextCallback,t)):setTimeout(this.nextCallback,0)},c.render=function(){var e=this.state.status;if(e===s)return null;var t=this.props,n=t.children,a=function(e,t){if(null==e)return{};var n,a,o={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(t,["children"]);if(delete a.in,delete a.mountOnEnter,delete a.unmountOnExit,delete a.appear,delete a.enter,delete a.exit,delete a.timeout,delete a.addEndListener,delete a.onEnter,delete a.onEntering,delete a.onEntered,delete a.onExit,delete a.onExiting,delete a.onExited,"function"===typeof n)return n(e,a);var i=o.default.Children.only(n);return o.default.cloneElement(i,a)},a}(o.default.Component);function f(){}p.contextTypes={transitionGroup:a.object},p.childContextTypes={transitionGroup:function(){}},p.propTypes={},p.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:f,onEntering:f,onEntered:f,onExit:f,onExiting:f,onExited:f},p.UNMOUNTED=0,p.EXITED=1,p.ENTERING=2,p.ENTERED=3,p.EXITING=4;var y=(0,c.polyfill)(p);t.default=y},1195:function(e,t,n){var a=n(1196),o=n(32),i=/[&<>"']/g,c=RegExp(i.source);e.exports=function(e){return(e=o(e))&&c.test(e)?e.replace(i,a):e}},1196:function(e,t,n){var a=n(538)({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});e.exports=a},1519:function(e,t,n){"use strict";n.r(t),n.d(t,"init",(function(){return C}));var a=n(688),o=n.n(a),i=n(689),c=n.n(i),r=n(8),s=n.n(r),d=n(31),l=n.n(d),u=n(1),b=n(0),p=n(857),f=n(792),y=n(693),O=n(292),v=n(861),g=n(328),h=n(291),j=n(862);var m=n(902),I=n(418);const C=()=>{if(function(){async function e(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];Object(f.a)(p.a.getQueue(),e,...n)}const t=Object(u.e)();e.q=t?t.q:[],e.loaded=!0,Object(u.b)().sprChat=e}(),Object(b.O)()){const e=Object(b.y)();m.a.preload(e)}const e=Object(u.e)();p.a.addCmdToQueue(p.a.getQueue(),...e.q),async function(){const e=Object(u.a)();let t,a;try{if(l()(e))throw new Error;await Object(y.g)(e),await Object(y.h)({getSessionToken:()=>Object(h.a)(e.appId)});const[o,i]=await Object(y.a)(e);if("rejected"===o.status)throw new Error;if(t=o.value,"rejected"===i.status)throw i.reason;a=i.value,Object(j.a)(a,t),Object(y.c)(t),await Object(y.h)({applicationConfig:t,handshakeDetails:a}),t.hasPrompts&&n.e(58).then(n.bind(null,1483)).then((e=>{let{default:n}=e;n(t,a)})),(0,(await Promise.resolve().then(n.bind(null,790))).default)(null,{applicationConfig:t,handshakeDetails:a,chatSettings:e,subscribeToEvent:y.f})}catch(o){const i=O.a.getUserSettings(e);Object(g.e)(o)&&i&&v.a.getOneTimeToken(i)?(0,(await Promise.resolve().then(n.bind(null,790))).default)(o,{applicationConfig:t,handshakeDetails:a,chatSettings:e,subscribeToEvent:y.f}):await Object(y.e)()}}();const{meetingId:t,user:a,otp:i}=Object(u.a)(),r=s()(a,"oneTimeToken");l()(t)&&l()(r)&&l()(i)||e("open");const{autoTrigger:d}=Object(u.a)();let C;C=!0===d?0:o()(d)?1e3*Math.max(d,0):null,c()(C)||setTimeout((()=>{e("openNewConversation")}),C),Object(I.c)((()=>Promise.resolve().then(n.bind(null,790))))}},220:function(e,t,n){"use strict";var a=n(191),o=n(1055);t.a=function(){return Object(a.useContext)(o.a)}},222:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(191);const o=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Object(a.useCallback)((e=>{t.forEach((t=>{t&&("function"===typeof t?t(e):t.current=e)}))}),[...t])}},225:function(e,t,n){"use strict";var a=n(194);t.a=Object(a.d)({goBack:{id:"goBack",defaultMessage:"Go back"},liveChatBox:{id:"liveChatBox",defaultMessage:"Live chat box"},liveChatNotification:{id:"liveChatNotification",defaultMessage:"Live chat notification"},closeChat:{id:"closeChat",defaultMessage:"Close chat"},liveChat:{id:"liveChat",defaultMessage:"Live chat"},conversationClosed:{id:"conversationClosed",defaultMessage:"Conversation closed"},submit:{id:"submit",defaultMessage:"Submit"},textArea:{id:"textArea",defaultMessage:"Send your message here"},attachment:{id:"attachment",defaultMessage:"Attachment"},moreActions:{id:"moreActions",defaultMessage:"More actions"},sendingMessage:{id:"sendingMessage",defaultMessage:"Sending message"},sentMessage:{id:"sentMessage",defaultMessage:"Sent message"},receivedMessage:{id:"receivedMessage",defaultMessage:"Received message"},unreadMessages:{id:"unreadMessages",defaultMessage:"{count} Unread messages"},unreadMessage:{id:"unreadMessage",defaultMessage:"{count} Unread message"},newNotifications:{id:"newNotifications",defaultMessage:"New notifications"},newNotification:{id:"newNotification",defaultMessage:"New notification"},agentImage:{id:"agentImage",defaultMessage:"Agent Image"},brandImage:{id:"brandImage",defaultMessage:"Brand Image"},homeScreen:{id:"homeScreen",defaultMessage:"Live chat home screen"},newConversationCard:{id:"newConversationCard",defaultMessage:"New conversation"},existingConversationCard:{id:"existingConversationCard",defaultMessage:"Existing conversations"},conversationScreen:{id:"conversationScreen",defaultMessage:"Conversation Screen"},conversationListScreen:{id:"conversationListScreen",defaultMessage:"Conversation List Screen"},persistentMenu:{id:"persistentMenu",defaultMessage:"Menu"},brandLogo:{id:"brandLogo",defaultMessage:"Logo of {name}"},messageDeleteDescription:{id:"messageDeleteDescription",defaultMessage:"This message was deleted"},confirmationDialog:{id:"confirmationDialog",defaultMessage:"Confirmation dialog"},close:{id:"close",defaultMessage:"Close"},openChat:{id:"openChat",defaultMessage:"Open chat"},startListening:{id:"startListening",defaultMessage:"Start Listening"},stopListening:{id:"stopListening",defaultMessage:"Stop Listening"}})},257:function(e,t,n){"use strict";n.d(t,"m",(function(){return a})),n.d(t,"g",(function(){return o})),n.d(t,"f",(function(){return i})),n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return r})),n.d(t,"d",(function(){return s})),n.d(t,"c",(function(){return d})),n.d(t,"k",(function(){return l})),n.d(t,"i",(function(){return u})),n.d(t,"h",(function(){return b})),n.d(t,"e",(function(){return p})),n.d(t,"l",(function(){return f})),n.d(t,"n",(function(){return y})),n.d(t,"j",(function(){return O}));const a="unreadCountChanged",o="externalEventTriggered",i="externalCallback",c="loaded",r="loadCompleted",s="closed",d="availabilityChanged",l="promptActionTriggered",u="mediaShown",b="mediaClosed",p="eventTriggered",f="registerDeviceTriggered",y="unregisterDeviceTriggered",O="onPermissionSeeked"},265:function(e,t,n){"use strict";var a=n(191);const o={childList:!0,subtree:!0,attributes:!0};t.a=(e,t)=>{const[n,i]=Object(a.useState)();Object(a.useLayoutEffect)((()=>{const a=[];if(n){if(e.MutationObserver){const i=new e.MutationObserver(t);i.observe(n,o),a.push((()=>i.disconnect()))}else e.document.addEventListener("DOMSubtreeModified",t),a.push((()=>e.document.removeEventListener("DOMSubtreeModified",t)));a.push((()=>e.removeEventListener("resize",t)),(()=>e.document.removeEventListener("transitionend",t)))}return()=>{a.forEach((e=>e()))}}),[n,t]);return Object(a.useCallback)((e=>{e&&i(e)}),[])}},284:function(e,t,n){"use strict";var a=n(665);const o=new(n(591).a);o.on((e=>{const{topic:t,payload:n={},callback:o}=e;t&&Object(a.a)({topic:t,payload:{response:{data:n.data,error:n.error},request:n.request,shouldLogEvent:n.shouldLogEvent},callback:o})})),t.a=function(e){o.emit(e)}},294:function(e,t,n){"use strict";n.d(t,"a",(function(){return $}));var a=n(1515),o=n(1492),i=n(1407);const c=Object(a.a)("conversationScreen"),r=Object(a.a)("callScreen"),s=Object(a.a)("videoCall"),d=Object(a.a)("audioCall"),l=Object(a.a)("settings"),u=Object(a.a)("trigger"),b=Object(a.a)("proactivePrompt"),p=Object(a.a)("theme"),f=Object(a.a)("icons"),y=Object(a.a)("minimizeChatBoxOnCloseInPhone"),O=Object(a.a)("header"),v=Object(a.a)("label"),g=Object(a.a)("openInFullScreen"),h=Object(a.a)("label"),j=Object(a.a)("defaultHidden"),m=Object(a.a)("initiallyHidden"),I=Object(a.a)("hideWhenOpen"),C=Object(a.a)("canManuallyRemove"),T=Object(a.a)("invisibilityCriteria"),E=Object(a.a)("animation"),S=Object(a.a)("contactDetailsMessage"),x=Object(a.a)("maximumOpenConversations"),_=Object(a.a)("autoLoginSSOId"),A=Object(a.a)("hour12"),w=Object(a.a)("externalLocaleData"),M=Object(a.a)("homeScreen"),R=Object(a.a)("conversationCard"),P=Object(a.a)("hideWavingHandIcon"),D=Object(a.a)("shouldShow"),N=Object(a.a)("agents"),L=Object(a.a)("button"),k=Object(a.a)("enableIndividualMessageDismissal"),U=Object(a.a)("infoCard"),B=Object(a.a)("existingConversationCard"),G=Object(a.a)("showHeader");class ${}$.getDefaultMessages=e=>{var t;return null===(t=null===e||void 0===e?void 0:e.conversationScreen)||void 0===t?void 0:t.lastMessage},$.getWaitTimeConfig=e=>{var t;return null===(t=null===e||void 0===e?void 0:e.conversationScreen)||void 0===t?void 0:t.waitTimeConfig},$.getSurveyActionsToShowByVariant=e=>{var t;return null===(t=null===e||void 0===e?void 0:e.surveyScreen)||void 0===t?void 0:t.actionsToShowByVariant},$.getActionsToShowByVariant=e=>{var t;return null===(t=null===e||void 0===e?void 0:e.conversationScreen)||void 0===t?void 0:t.actionsToShowByVariant},$.getConversationActionOnPageCloseByScope=e=>{var t;return null===(t=null===e||void 0===e?void 0:e.conversationScreen)||void 0===t?void 0:t.actionOnPageCloseByScope},$.shouldShowSenderNameInConversationScreen=e=>{var t;return null===(t=null===e||void 0===e?void 0:e.conversationScreen)||void 0===t?void 0:t.showSenderName},$.getFooterActionsToShow=e=>{var t,n;return null===(n=null===(t=null===e||void 0===e?void 0:e.conversationScreen)||void 0===t?void 0:t.footer)||void 0===n?void 0:n.actionsToShow},$.getActionOnPageCloseByScope=e=>{var t;return null===(t=e.allScreens)||void 0===t?void 0:t.actionOnPageCloseByScope},$.getAnalyticsSettings=e=>{var t;return null===(t=null===e||void 0===e?void 0:e.settings)||void 0===t?void 0:t.analyticsSettings},$.hour12Enabled=Object(o.a)(Object(i.a)(A),Object(i.a)(l)),$.getTheme=Object(o.a)(Object(i.a)(p)),$.getIcons=Object(o.a)(Object(i.a)(f),Object(i.a)(p)),$.conversationTagsEnabled=e=>{var t;return null===(t=e.allScreens)||void 0===t?void 0:t.conversationTagsEnabled},$.showCaseNumberEnabled=e=>{var t;return null===(t=e.allScreens)||void 0===t?void 0:t.showCaseNumber},$.isSprinklrAnalyticsEnabled=e=>{var t,n,a;return null===(a=null===(n=null===(t=e.settings)||void 0===t?void 0:t.analyticsSettings)||void 0===n?void 0:n.sprinklrAnalytics)||void 0===a?void 0:a.enabled},$.getGoogleTrackerId=e=>{var t,n,a;return null===(a=null===(n=null===(t=e.settings)||void 0===t?void 0:t.analyticsSettings)||void 0===n?void 0:n.googleAnalytics)||void 0===a?void 0:a.trackerId},$.getMaximumOpenConversations=Object(o.a)(Object(i.a)(x),Object(i.a)(l)),$.getDisableManualNewConversation=e=>{var t;return null===(t=null===e||void 0===e?void 0:e.settings)||void 0===t?void 0:t.disableManualNewConversation},$.getUserPreferences=Object(i.a)(l),$.getContactDetailsMessage=Object(o.a)(Object(i.a)(S),Object(i.a)(c)),$.getTriggerConfig=Object(i.a)(u),$.getInvisibilityCriteriaOfTrigger=Object(o.a)(Object(i.a)(T),$.getTriggerConfig),$.getAnimationInfoOfTrigger=Object(o.a)(Object(i.a)(E),$.getTriggerConfig),$.getTriggerLabel=Object(o.a)(Object(i.a)(h),$.getTriggerConfig),$.isChatTriggerHidden=Object(o.a)(Object(i.a)(j),Object(i.a)(u)),$.isChatTriggerInitiallyHidden=Object(o.a)(Object(i.a)(m),Object(i.a)(u)),$.isTriggerHiddenWhenMaximised=Object(o.a)(Object(i.a)(I),Object(i.a)(u)),$.canTriggerBeManuallyRemoved=Object(o.a)(Object(i.a)(C),Object(i.a)(u)),$.getAutoLoginSSOId=Object(o.a)(Object(i.a)(_),Object(i.a)(l)),$.isDebugModeEnabled=e=>{var t;return null===(t=null===e||void 0===e?void 0:e.settings)||void 0===t?void 0:t.enableDebugMode},$.getExternalLocaleData=Object(o.a)(Object(i.a)(w),Object(i.a)(l)),$.shouldHideWavingHandIcon=Object(o.a)(Object(i.a)(P),Object(i.a)(R),Object(i.a)(M)),$.shouldShowAgents=Object(o.a)(Object(i.a)(D),Object(i.a)(N),Object(i.a)(R),Object(i.a)(M)),$.getAgents=Object(o.a)(Object(i.a)(N),Object(i.a)(R),Object(i.a)(M)),$.shouldShowHeaderInExistingConversationCard=Object(o.a)(Object(i.a)(G),Object(i.a)(B),Object(i.a)(M)),$.isMinimizeOnCloseInPhoneForVideoCall=Object(o.a)(Object(i.a)(y),Object(i.a)(s)),$.getNewConversationButton=Object(o.a)(Object(i.a)(L),Object(i.a)(R),Object(i.a)(M)),$.isMinimizeOnCloseInPhoneForAudioCall=Object(o.a)(Object(i.a)(y),Object(i.a)(d)),$.shouldCallOpenInFullScreen=Object(o.a)(Object(i.a)(g),Object(i.a)(r)),$.getVideoCallHeaderLabel=Object(o.a)(Object(i.a)(v),Object(i.a)(O),Object(i.a)(s)),$.getAudioCallHeaderLabel=Object(o.a)(Object(i.a)(v),Object(i.a)(O),Object(i.a)(d)),$.getPromptEnableIndividualMessageDismissal=Object(o.a)(Object(i.a)(k),Object(i.a)(b)),$.getChatMessageComposerMaxCharacters=e=>{var t,n,a;return null===(a=null===(n=null===(t=null===e||void 0===e?void 0:e.conversationScreen)||void 0===t?void 0:t.footer)||void 0===n?void 0:n.chatMessageComposer)||void 0===a?void 0:a.maxCharacters},$.getChatMessageComposerSendButton=e=>{var t,n,a;return null===(a=null===(n=null===(t=null===e||void 0===e?void 0:e.conversationScreen)||void 0===t?void 0:t.footer)||void 0===n?void 0:n.chatMessageComposer)||void 0===a?void 0:a.sendButton},$.shouldHideOnDisableManualResponse=e=>{var t,n,a;return null===(a=null===(n=null===(t=null===e||void 0===e?void 0:e.conversationScreen)||void 0===t?void 0:t.footer)||void 0===n?void 0:n.chatMessageComposer)||void 0===a?void 0:a.hideOnDisableManualResponse},$.getInfoCard=Object(o.a)(Object(i.a)(U),Object(i.a)(c))},298:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"d",(function(){return c})),n.d(t,"g",(function(){return r})),n.d(t,"f",(function(){return s})),n.d(t,"h",(function(){return d})),n.d(t,"c",(function(){return l})),n.d(t,"b",(function(){return u})),n.d(t,"e",(function(){return b}));var a=n(278),o=n(452);const i=e=>{let{ssoId:t,conversationId:n,messageId:o,hiddenIframeBasedSSO:i,ssoTimeout:c}=e;return e=>({type:a.c,payload:{ssoId:t,conversationId:n,messageId:o,ssoTimeout:c,hiddenIframeBasedSSO:i},promise:e})};function c(){return{type:a.g,payload:{}}}function r(e){return{type:a.d,payload:{status:e?o.a.CONNECTED:o.a.DISCONNECTED}}}function s(e){let{waitTime:t,reason:n}=e;return{type:a.i,payload:{waitTime:t,reason:n}}}function d(){return{type:a.l,payload:{}}}function l(e){return{type:a.f,payload:e}}function u(){return{type:a.e,payload:{}}}function b(){return{type:a.h,payload:{}}}},299:function(e,t,n){"use strict";var a=n(247);n.d(t,"a",(function(){return a.f})),n.d(t,"b",(function(){return a.g})),n.d(t,"c",(function(){return a.h})),n.d(t,"d",(function(){return a.l})),n.d(t,"e",(function(){return a.n})),n.d(t,"f",(function(){return a.o})),n.d(t,"g",(function(){return a.q})),n.d(t,"h",(function(){return a.r})),n.d(t,"i",(function(){return a.t})),n.d(t,"j",(function(){return a.u})),n.d(t,"k",(function(){return a.v})),n.d(t,"l",(function(){return a.w})),n.d(t,"m",(function(){return a.x})),n.d(t,"n",(function(){return a.y})),n.d(t,"o",(function(){return a.A})),n.d(t,"p",(function(){return a.B})),n.d(t,"q",(function(){return a.D})),n.d(t,"r",(function(){return a.E})),n.d(t,"s",(function(){return a.F})),n.d(t,"t",(function(){return a.G}));n(723)},302:function(e,t,n){"use strict";n.d(t,"t",(function(){return a})),n.d(t,"s",(function(){return o})),n.d(t,"p",(function(){return i})),n.d(t,"l",(function(){return c})),n.d(t,"j",(function(){return r})),n.d(t,"k",(function(){return s})),n.d(t,"u",(function(){return d})),n.d(t,"q",(function(){return l})),n.d(t,"v",(function(){return u})),n.d(t,"m",(function(){return b})),n.d(t,"n",(function(){return p})),n.d(t,"a",(function(){return f})),n.d(t,"o",(function(){return y})),n.d(t,"w",(function(){return O})),n.d(t,"r",(function(){return v})),n.d(t,"d",(function(){return g})),n.d(t,"c",(function(){return h})),n.d(t,"i",(function(){return j})),n.d(t,"f",(function(){return m})),n.d(t,"b",(function(){return I})),n.d(t,"e",(function(){return C})),n.d(t,"h",(function(){return T})),n.d(t,"g",(function(){return E}));const a="NEW_MESSAGE",o="MESSAGE_UPDATED",i="EXTERNAL_EVENT",c="CHAT_USER_UPDATED",r="CHAT_USER_START_TYPING",s="CHAT_USER_STOP_TYPING",d="UI_CONTROL",l="LOCK_CONVERSATIONS",u="UNLOCK_CONVERSATIONS",b="CONVERSATION_UPDATED",p="CO_BROWSE_STATUS",f="ADD_TO_CART",y="EXECUTE_ENDPOINT",O="USER_SESSION_EXPIRED",v="MESSAGE_STREAM",g="VIDEO_CALL_STARTING",h="VIDEO_CALL_ENDED",j="VIDEO_CALL_TOGGLE",m="VIDEO_CALL_OFFER_ACCEPTED",I="VIDEO_CALL_DECLINED",C="VIDEO_CALL_MISSED",T="VIDEO_PARTICIPANT_UPDATED",E="VIDEO_CALL_PARTICIPANT_LEFT"},320:function(e,t,n){"use strict";var a=n(900),o=n(191);t.a=function(){return Object(o.useContext)(a.a)}},333:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return i})),n.d(t,"g",(function(){return c})),n.d(t,"l",(function(){return r})),n.d(t,"e",(function(){return s})),n.d(t,"j",(function(){return d})),n.d(t,"x",(function(){return l})),n.d(t,"q",(function(){return u})),n.d(t,"m",(function(){return b})),n.d(t,"n",(function(){return p})),n.d(t,"o",(function(){return f})),n.d(t,"d",(function(){return y})),n.d(t,"h",(function(){return O})),n.d(t,"c",(function(){return v})),n.d(t,"i",(function(){return g})),n.d(t,"u",(function(){return h})),n.d(t,"v",(function(){return j})),n.d(t,"r",(function(){return m})),n.d(t,"w",(function(){return I})),n.d(t,"s",(function(){return C})),n.d(t,"t",(function(){return T})),n.d(t,"p",(function(){return E})),n.d(t,"f",(function(){return S})),n.d(t,"k",(function(){return x}));var a=n(422);function o(e){return{type:a.g,payload:e}}function i(e){return{type:a.h,payload:e}}function c(e){return{type:a.m,payload:e}}function r(e){return{type:a.t,payload:e}}function s(e){return{type:a.i,payload:e}}function d(e){return{type:a.p,payload:e}}function l(e){return{type:a.y,payload:e}}function u(e){return{type:a.w,payload:e}}function b(e){return{type:a.c,payload:e}}function p(e){return{type:a.d,payload:e}}function f(e){return{type:a.f,payload:e}}function y(e){return{type:a.e,payload:e}}function O(e){return{type:a.n,payload:e}}function v(e){return{type:a.b,payload:e}}function g(e){return{type:a.o,payload:e}}function h(e){return{type:a.l,payload:e}}function j(e){return{type:a.s,payload:e}}function m(e){return{type:a.u,payload:e}}function I(e){return{type:a.a,payload:e}}function C(e){return{type:a.j,payload:e}}function T(e){return{type:a.q,payload:e}}function E(e){return{type:a.v,payload:e}}function S(e){return{type:a.k,payload:e}}function x(e){return{type:a.r,payload:e}}},341:function(e,t,n){"use strict";var a=n(818);n.d(t,"a",(function(){return a.a}))},362:function(e,t,n){"use strict";t.a={CONVERSATION:"CONVERSATION",BANNER:"BANNER",KNOWLEDGE_BASE:"KNOWLEDGE_BASE",INFO_CARD:"INFO_CARD",STATUS_CARD:"STATUS_CARD",CONVERSATION_HISTORY:"CONVERSATION_HISTORY"}},382:function(e,t,n){"use strict";var a=n(191),o=n(265);t.a=(e,t)=>{const[n,i]=Object(a.useState)(),c=Object(o.a)(e,t);Object(a.useLayoutEffect)((()=>{const a=[];if(n)if(e.ResizeObserver){const o=new e.ResizeObserver(t);o.observe(n),a.push((()=>o.disconnect()))}else c(n);return()=>{a.forEach((e=>e()))}}),[n,t]);return Object(a.useCallback)((e=>{e&&i(e)}),[])}},388:function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var a=n(200),o=(n(191),n(15)),i=n.n(o),c=n(1045),r=n(207),s=n(193);const d=Object(s.a)("div",{target:"ex7k1ut0"})({name:"1txt44t",styles:"top:0;left:0;margin:0;padding:0;overflow:hidden;position:absolute;width:100%;height:100%;background-color:var(--spr-lc-bgc-9);"}),l=Object(s.a)("div",{target:"ex7k1ut1"})({name:"3f9jy3",styles:"top:50%;left:50%;position:absolute;transform:translate(-50%,-50%);"});var u=n(192);var b=()=>Object(u.jsx)(d,null,Object(u.jsx)(l,null,Object(u.jsx)(r.c,null))),p=n(203),f=n(233);var y=e=>{const{direction:t,localeDataLoading:n}=Object(p.a)(),o=Object(f.a)(),r=(e=>i()(e,((e,t,n)=>(e[n]=i()(t,((e,t)=>{let{type:n,src:a}=t;return"SCRIPT"===n?`${e} <script defer src="${a}"><\/script>`:"CSS"===n?`${e} <link rel="stylesheet" href="${a}">`:e}),""),e)),{}))(null===o||void 0===o?void 0:o.externalResources),{shouldHideLocaleLoader:s,...d}=e;return Object(u.jsx)(c.a,Object(a.a)({},d,{direction:t,externalResources:r}),e.children,!s&&n&&Object(u.jsx)(b,null))}},391:function(e,t,n){"use strict";var a=n(191),o=n(879),i=n.n(o),c=n(878);var r=function(){return Object(a.useContext)(c.a)};t.a=e=>{const[t,n]=r(),o=i()(),c=Object(a.useCallback)((t=>{o()&&n({stateKey:e,state:t})}),[e,n,o]);return Object(a.useEffect)((()=>()=>{n({stateKey:e,state:null})}),[]),[t&&t.stateKey===e?t.state:null,c]}},396:function(e,t,n){"use strict";t.a={IMAGE:"IMAGE",VIDEO:"VIDEO",DIALOGUE:"DIALOGUE"}},397:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));const a={CONVERSATION:"CONVERSATION",CONVERSATION_LIST:"CONVERSATION_LIST",HOME:"HOME",KNOWLEDGE_BASE:"KNOWLEDGE_BASE",KNOWLEDGE_BASE_LIST:"KNOWLEDGE_BASE_LIST",SURVEY:"SURVEY",GUIDED_WORKFLOW:"GUIDED_WORKFLOW",401:"401",LOGOUT:"LOGOUT"}},429:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return r}));var a=n(193),o=n(195);const i=Object(a.a)("div",{target:"e6slia10"})("min-height:",(e=>Object(o.e)("header.minHeight")(e)),";padding:",(e=>Object(o.h)("header.padding")(e)),";display:flex;justify-content:flex-end;align-items:center;"),c=Object(a.a)("div",{target:"e6slia11"})("width:100%;",(e=>!e.isContained&&{backgroundColor:`${Object(o.e)("header.backgroundColor")(e)}`,backgroundImage:`${Object(o.e)("header.gradients")(e)}`,borderBottom:`${Object(o.e)("header.borderBottom")(e)}`,padding:"var(--spr-lc-safe-area-top) var(--spr-lc-safe-area-right) 0 var(--spr-lc-safe-area-left)"}),""),r=e=>Object(o.e)("header.lg.paddingTop",0)(e)+Object(o.e)("header.lg.paddingBottom",0)(e)+Object(o.e)("header.lg.logo.height",0)(e)+Object(o.e)("header.lg.logo.marginTop",0)(e)+Object(o.e)("header.lg.logo.marginBottom",0)(e)+Object(o.e)("header.lg.description.marginTop",0)(e)+Object(o.e)("header.lg.description.marginBottom",0)(e)+52},430:function(e,t,n){"use strict";n.d(t,"s",(function(){return i})),n.d(t,"e",(function(){return c})),n.d(t,"h",(function(){return r})),n.d(t,"p",(function(){return s})),n.d(t,"d",(function(){return d})),n.d(t,"f",(function(){return l})),n.d(t,"o",(function(){return u})),n.d(t,"m",(function(){return b})),n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return f})),n.d(t,"n",(function(){return y})),n.d(t,"c",(function(){return O})),n.d(t,"l",(function(){return v})),n.d(t,"i",(function(){return g})),n.d(t,"g",(function(){return h})),n.d(t,"q",(function(){return j})),n.d(t,"r",(function(){return m})),n.d(t,"k",(function(){return I})),n.d(t,"j",(function(){return C}));var a=n(496),o=n(607);function i(){return{type:o.n,payload:{}}}function c(e){return{type:o.j,payload:e}}function r(){return{type:o.o,payload:{}}}function s(){return{type:o.r,payload:{}}}function d(e){return{type:o.h,payload:{messageId:e.messageId,endedByAgent:e.endedByAgent,markCompletedSession:e.markCompletedSession}}}function l(e){return{type:o.i,payload:e}}function u(e){return{type:o.d,payload:e}}function b(e){return{type:o.g,payload:e}}function p(e){return{type:o.a,payload:e}}function f(e){return{type:o.b,payload:e}}function y(e){return{type:o.e,payload:e}}function O(e){return{type:o.c,payload:e}}function v(e){return{type:o.f,payload:e}}function g(e){return{type:o.p,payload:e}}function h(e){return{type:o.q,payload:e}}function j(e){return{type:o.l,payload:e}}function m(e){return{type:o.m,payload:e}}const I=e=>({type:o.k,payload:e}),C=e=>{let{conversationId:t,messageId:n,buttonId:i,attachment:c}=e;return e=>{const r=Object(a.a)(i,c);return{type:o.s,payload:{conversationId:t,messageId:n,url:r.url},promise:e}}}},431:function(e,t,n){"use strict";var a=n(191),o=n.n(a),i=n(534),c=n.n(i),r=n(272),s=n.n(r),d=n(624),l=n(192);const u=e=>{let{shouldPlay:t,unreadCount:n,children:i}=e;const{play:r}=Object(d.b)(),u=c()(n);return Object(a.useEffect)((()=>{!s()(u)&&n&&t&&n>u&&r(d.a.MESSAGE)}),[n,r,u,t]),Object(l.jsx)(o.a.Fragment,null,i)};t.a=o.a.memo(u)},450:function(e,t,n){"use strict";n.d(t,"K",(function(){return a})),n.d(t,"d",(function(){return o})),n.d(t,"f",(function(){return i})),n.d(t,"e",(function(){return c})),n.d(t,"c",(function(){return r})),n.d(t,"R",(function(){return s})),n.d(t,"M",(function(){return d})),n.d(t,"X",(function(){return l})),n.d(t,"W",(function(){return u})),n.d(t,"ab",(function(){return b})),n.d(t,"bb",(function(){return p})),n.d(t,"Z",(function(){return f})),n.d(t,"g",(function(){return y})),n.d(t,"L",(function(){return O})),n.d(t,"cb",(function(){return v})),n.d(t,"Y",(function(){return g})),n.d(t,"V",(function(){return h})),n.d(t,"Q",(function(){return j})),n.d(t,"N",(function(){return m})),n.d(t,"b",(function(){return I})),n.d(t,"y",(function(){return C})),n.d(t,"l",(function(){return T})),n.d(t,"J",(function(){return E})),n.d(t,"v",(function(){return S})),n.d(t,"D",(function(){return x})),n.d(t,"q",(function(){return _})),n.d(t,"G",(function(){return A})),n.d(t,"s",(function(){return w})),n.d(t,"C",(function(){return M})),n.d(t,"p",(function(){return R})),n.d(t,"x",(function(){return P})),n.d(t,"k",(function(){return D})),n.d(t,"I",(function(){return N})),n.d(t,"u",(function(){return L})),n.d(t,"z",(function(){return k})),n.d(t,"m",(function(){return U})),n.d(t,"a",(function(){return B})),n.d(t,"P",(function(){return G})),n.d(t,"h",(function(){return $})),n.d(t,"O",(function(){return F})),n.d(t,"T",(function(){return V})),n.d(t,"F",(function(){return H})),n.d(t,"i",(function(){return W})),n.d(t,"w",(function(){return z})),n.d(t,"j",(function(){return q})),n.d(t,"E",(function(){return X})),n.d(t,"r",(function(){return K})),n.d(t,"A",(function(){return Y})),n.d(t,"n",(function(){return Q})),n.d(t,"B",(function(){return Z})),n.d(t,"o",(function(){return J})),n.d(t,"H",(function(){return ee})),n.d(t,"t",(function(){return te})),n.d(t,"S",(function(){return ne})),n.d(t,"U",(function(){return ae}));const a="open",o="close",i="enable",c="disable",r="clearSession",s="sendExternalEvent",d="openNewConversation",l="updateConversationContext",u="updateClientContext",b="updateUserContext",p="updateUserSettings",f="updateThemeMode",y="getAvailableAgents",O="openExistingConversation",v="updateWidget",g="updateLocale",h="updateCart",j="removeFromCart",m="openNewPrompt",I="clearPrompt",C="onClose",T="offClose",E="onUnreadCountChange",S="offUnreadCountChange",x="onExternalEvent",_="offExternalEvent",A="onPromptAction",w="offPromptAction",M="onEvent",R="offEvent",P="onAvailabilityChange",D="offAvailabilityChange",N="onShowMedia",L="offShowMedia",k="onCloseMedia",U="offCloseMedia",B="addFilterToEvaluate",G="removeFilterToEvaluate",$="goBack",F="registerDevice",V="unregisterDevice",H="onNotification",W="grantPermission",z="onLoad",q="offLoad",X="onLoadComplete",K="offLoadComplete",Y="onDeviceRegister",Q="offDeviceRegister",Z="onUnregisterDevice",J="offUnregisterDevice",ee="onSeekPermission",te="offSeekPermission",ne="subscribeToUpdate",ae="unsubscribeToUpdate"},459:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(191),o=n(717);const i=()=>Object(a.useContext)(o.a)},460:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;!function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var a=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};a.get||a.set?Object.defineProperty(t,n,a):t[n]=e[n]}t.default=e}(n(250));var a=r(n(1190)),o=r(n(1193)),i=r(n(191)),c=r(n(1194));n(905);function r(e){return e&&e.__esModule?e:{default:e}}function s(){return s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},s.apply(this,arguments)}var d=function(e,t){return e&&t&&t.split(" ").forEach((function(t){return(0,a.default)(e,t)}))},l=function(e,t){return e&&t&&t.split(" ").forEach((function(t){return(0,o.default)(e,t)}))},u=function(e){var t,n;function a(){for(var t,n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(t=e.call.apply(e,[this].concat(a))||this).onEnter=function(e,n){var a=t.getClassNames(n?"appear":"enter").className;t.removeClasses(e,"exit"),d(e,a),t.props.onEnter&&t.props.onEnter(e,n)},t.onEntering=function(e,n){var a=t.getClassNames(n?"appear":"enter").activeClassName;t.reflowAndAddClass(e,a),t.props.onEntering&&t.props.onEntering(e,n)},t.onEntered=function(e,n){var a=t.getClassNames("appear").doneClassName,o=t.getClassNames("enter").doneClassName,i=n?a+" "+o:o;t.removeClasses(e,n?"appear":"enter"),d(e,i),t.props.onEntered&&t.props.onEntered(e,n)},t.onExit=function(e){var n=t.getClassNames("exit").className;t.removeClasses(e,"appear"),t.removeClasses(e,"enter"),d(e,n),t.props.onExit&&t.props.onExit(e)},t.onExiting=function(e){var n=t.getClassNames("exit").activeClassName;t.reflowAndAddClass(e,n),t.props.onExiting&&t.props.onExiting(e)},t.onExited=function(e){var n=t.getClassNames("exit").doneClassName;t.removeClasses(e,"exit"),d(e,n),t.props.onExited&&t.props.onExited(e)},t.getClassNames=function(e){var n=t.props.classNames,a="string"===typeof n,o=a?(a&&n?n+"-":"")+e:n[e];return{className:o,activeClassName:a?o+"-active":n[e+"Active"],doneClassName:a?o+"-done":n[e+"Done"]}},t}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var o=a.prototype;return o.removeClasses=function(e,t){var n=this.getClassNames(t),a=n.className,o=n.activeClassName,i=n.doneClassName;a&&l(e,a),o&&l(e,o),i&&l(e,i)},o.reflowAndAddClass=function(e,t){t&&(e&&e.scrollTop,d(e,t))},o.render=function(){var e=s({},this.props);return delete e.classNames,i.default.createElement(c.default,s({},e,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},a}(i.default.Component);u.defaultProps={classNames:""},u.propTypes={};var b=u;t.default=b,e.exports=t.default},461:function(e,t,n){"use strict";n.d(t,"e",(function(){return l})),n.d(t,"m",(function(){return u})),n.d(t,"u",(function(){return b})),n.d(t,"j",(function(){return p})),n.d(t,"h",(function(){return f})),n.d(t,"i",(function(){return y})),n.d(t,"g",(function(){return O})),n.d(t,"b",(function(){return v})),n.d(t,"a",(function(){return g})),n.d(t,"d",(function(){return h})),n.d(t,"c",(function(){return j})),n.d(t,"w",(function(){return m})),n.d(t,"t",(function(){return I})),n.d(t,"f",(function(){return C})),n.d(t,"s",(function(){return T})),n.d(t,"o",(function(){return E})),n.d(t,"k",(function(){return S})),n.d(t,"x",(function(){return x})),n.d(t,"v",(function(){return _})),n.d(t,"p",(function(){return A})),n.d(t,"r",(function(){return w})),n.d(t,"l",(function(){return M})),n.d(t,"q",(function(){return R})),n.d(t,"n",(function(){return P}));var a=n(221),o=n(392),i=n(673),c=n(692),r=n(328);const s=new i.a,d="/livechat/conversation";function l(e){let{shouldFetchNumberOfOpenConversation:t,size:n,cursor:i}=e;return Object(a.__awaiter)(this,void 0,void 0,(function*(){let e=`${d}/fetch?fetchNumberOfOpenConversations=${t}&sortKey=lastInteractionTime`;n&&(e=`${e}&size=${n}`),i&&i.after&&(e=`${e}&after=${i.after}`),i&&i.before&&(e=`${e}&before=${i.before}`);return(yield o.a.post(e)).data}))}function u(e){return Object(a.__awaiter)(this,void 0,void 0,(function*(){const t=`${d}/spy-conversations`,{userIds:n=[],roleIds:a=[],pageNum:i,size:c=10}=e;return(yield o.a.post(t,{userIds:n,roleIds:a,page:{page:i,size:c}})).data}))}function b(e,t){return Object(a.__awaiter)(this,void 0,void 0,(function*(){const{httpHeaders:n,multiSubmitResponseUrl:a}=e;return(yield s.post(a,t,{headers:Object.assign(Object.assign({},n),{"Content-Type":"application/json"}),baseURL:""})).data}))}function p(e){return Object(a.__awaiter)(this,void 0,void 0,(function*(){return(yield o.a.post(`${d}/fetch/${e}`)).data}))}function f(e){return Object(a.__awaiter)(this,void 0,void 0,(function*(){return(yield o.a.post(`${d}/fetch/case/${e}`)).data}))}function y(e){return Object(a.__awaiter)(this,void 0,void 0,(function*(){return(yield o.a.post(`${d}/fetch/externalCase/${e}`)).data}))}function O(e,t){let{size:n,cursor:i}=t;return Object(a.__awaiter)(this,void 0,void 0,(function*(){const t=[{key:"conversationId",value:e}];n&&t.push({key:"size",value:n}),i&&t.push({key:"cursor",value:i}),t.push({key:"includeMaskedDeletedMessages",value:!0});const a=t.map((e=>`${e.key}=${e.value}`)).join("&");return(yield o.a.post(`${d}/fetchMessages?${a}`)).data}))}function v(e,t){return Object(a.__awaiter)(this,void 0,void 0,(function*(){try{const n=yield o.a.post(`${d}/closeConversation?conversationId=${e}`);return null===t||void 0===t||t.resolve(),n.data}catch(n){if(Object(r.d)(n))return null===t||void 0===t?void 0:t.resolve();throw null===t||void 0===t||t.reject(n),n}}))}function g(e){return Object(a.__awaiter)(this,void 0,void 0,(function*(){try{const t=yield o.a.post(`${d}/closeAll`);return null===e||void 0===e||e.resolve(),t.data}catch(t){if(Object(r.d)(t))return null===e||void 0===e?void 0:e.resolve();throw null===e||void 0===e||e.reject(t),t}}))}function h(e,t){return Object(a.__awaiter)(this,void 0,void 0,(function*(){try{const n=yield o.a.post(`${d}/delete?conversationId=${e}`);return null===t||void 0===t||t.resolve(),n.data}catch(n){if(Object(r.d)(n))return null===t||void 0===t?void 0:t.resolve();throw null===t||void 0===t||t.reject(n),n}}))}function j(e){return Object(a.__awaiter)(this,void 0,void 0,(function*(){try{const t=yield o.a.post(`${d}/deleteAll`);return null===e||void 0===e||e.resolve(),t.data}catch(t){if(Object(r.d)(t))return null===e||void 0===e?void 0:e.resolve();throw null===e||void 0===e||e.reject(t),t}}))}function m(e,t){return Object(a.__awaiter)(this,void 0,void 0,(function*(){return(yield o.a.post(`${d}/updateDisclaimer/${e}?disclaimerStatus=${t}`)).data}))}function I(e){return Object(a.__awaiter)(this,void 0,void 0,(function*(){return(yield o.a.post(`${d}/send`,e)).data}))}function C(e){return Object(a.__awaiter)(this,void 0,void 0,(function*(){return(yield o.a.post("/livechat/appointment/slots",{slotDefinitionId:e.slotDefinitionId,startTime:e.selectedDate.getTime(),timeZone:e.timeZone,params:e.appointmentAssetParams,messageId:e.messageId})).data}))}function T(e){return Object(a.__awaiter)(this,void 0,void 0,(function*(){return(yield o.a.post("/livechat/appointment/reserve",{startTime:e.selectedDate.getTime(),selectedSlot:e.selectedSlot,slotDefinitionId:e.slotDefinitionId,timeZone:e.timeZone,params:e.appointmentAssetParams,messageId:e.messageId})).data}))}function E(e){return Object(a.__awaiter)(this,void 0,void 0,(function*(){return(yield o.a.post(`${d}/new`,e)).data}))}function S(e,t,n,i){return Object(a.__awaiter)(this,void 0,void 0,(function*(){return(yield o.a.post(`${d}/suggestions`,Object.assign({conversationId:e,query:t,locale:i},n))).data}))}function x(e){let{context:t,updateLatest:n,payload:a}=e;return c.a.info({chatConversationId:null===a||void 0===a?void 0:a.conversationId,message:`${null===a||void 0===a?void 0:a.conversationId}: Update latest conversation context service called`,additionalDetails:{actionPayload:a}}),o.a.post(`${d}/updateConversationDetails?updateLatest=${n}`,t)}function _(e){let{conversationId:t,context:n,payload:a}=e;return c.a.info({chatConversationId:t,message:`${t}: Update conversation context service called`,additionalDetails:{actionPayload:a}}),o.a.post(`${d}/updateConversationDetails?conversationId=${t}`,n)}function A(e){return o.a.post(`${d}/cancelAsset/${e}`)}function w(e){return Object(a.__awaiter)(this,void 0,void 0,(function*(){return o.a.post(`${d}/markSurveyOpened/${e}`)}))}function M(){return Object(a.__awaiter)(this,void 0,void 0,(function*(){return(yield o.a.post(`${d}/fetchNumberOfOpenConversations`)).data}))}function R(e){return Object(a.__awaiter)(this,void 0,void 0,(function*(){return o.a.post(`${d}/markTimeOfDelivery?messageIds=${e.join(",")}`)}))}function P(e){let{messageId:t,conversationId:n,text:i,language:c,additional:r}=e;return Object(a.__awaiter)(this,void 0,void 0,(function*(){return(yield o.a.post(`${d}/generateVoiceNote`,{messageId:t,tempConversationId:n,text:i,language:c,additional:r})).data}))}},492:function(e,t,n){"use strict";n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return c}));var a=n(602);const o=e=>{let{file:t,conversationId:n,sender:o,inReplyToChatMessageId:i}=e;return{type:a.b,payload:{file:t,conversationId:n,chatUserId:o,inReplyToChatMessageId:i}}},i=e=>{let{initialMessages:t,createCase:n,conversationContext:o,silent:i,assignToUser:c,additional:r}=e;return e=>({type:a.c,payload:{initialMessages:t,createCase:n,assignToUser:c,silent:i,conversationContext:o,additional:r},promise:e})},c=(e,t)=>({type:a.a,payload:e,promise:t})},493:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return i}));const a="@commerce/ADD_TO_CART",o="@commerce/UPDATE_CART",i="@commerce/REMOVE_FROM_CART"},516:function(e,t,n){"use strict";n.d(t,"f",(function(){return D})),n.d(t,"c",(function(){return g})),n.d(t,"e",(function(){return C})),n.d(t,"g",(function(){return T})),n.d(t,"d",(function(){return E})),n.d(t,"b",(function(){return A})),n.d(t,"a",(function(){return P}));var a=n(208),o=n(285),i=n(232),c=n(300),r=n(1515),s=n(1407);const d=Object(r.a)("height"),l=Object(r.a)("width"),u=Object(r.a)("url"),b=Object(r.a)("fileToken");class p extends c.a{setHeight(e){return this.set(d,e)}setWidth(e){return this.set(l,e)}setUrl(e){return this.set(u,e)}setFileToken(e){return e?this.set(b,e):this}}p.getUrl=Object(s.a)(u);var f=n(340),y=n.n(f);const O=Object(r.a)("title");class v extends p{constructor(e){super(e),this.setType(a.c.IMAGE)}setTitle(e){return this.set(O,e)}}function g(e){return(new v).setHeight(e.height).setWidth(e.width).setUrl(e.url).setTitle(e.title).build()}const h=Object(r.a)("previewImageUrl"),j=Object(r.a)("title"),m=Object(r.a)("previewFileToken");class I extends p{constructor(e){super(e),this.setType(a.c.VIDEO)}setPreviewImageUrl(e){return this.set(h,e)}setTitle(e){return this.set(j,e)}setPreviewImageToken(e){return e?this.set(m,e):this}}function C(e){return(new I).setUrl(e.url).setHeight(e.height).setWidth(e.width).setPreviewImageUrl(e.previewImageUrl).setTitle(e.title).build()}function T(e){let{chatMessage:t,url:n,token:a}=e;const c=o.a.getAttachment(i.a.getMessagePayload(t));let r;r=a?new I(c).setPreviewImageToken(a).build():new I(c).setPreviewImageUrl(n).build();const s=new o.a(i.a.getMessagePayload(t)).setAttachment(r).build();return new i.a(t).setMessagePayload(s).build()}function E(e){return(new v).setHeight(e.height).setWidth(e.width).setUrl(e.previewImageUrl).build()}I.getPreviewImageUrl=Object(s.a)(h);const S=Object(r.a)("title"),x=Object(r.a)("documentType");class _ extends p{constructor(e){super(e),this.setType(a.c.DOCUMENT)}setTitle(e){return this.set(S,e)}setDocumentType(e){return this.set(x,e)}}function A(e){return(new _).setUrl(e.url).setTitle(e.title).setDocumentType(e.documentType).build()}const w=Object(r.a)("title"),M=Object(r.a)("mimeType");class R extends p{constructor(e){super(e),this.setType(a.c.AUDIO)}setTitle(e){return this.set(w,e)}setMimeType(e){return this.set(M,e)}}function P(e){return(new R).setUrl(e.url).setTitle(e.title).setMimeType(e.mimeType).build()}function D(e){let{chatMessage:t,url:n,token:r}=e;const s=o.a.getAttachment(i.a.getMessagePayload(t));if(!s||!function(e){return y()(a.b,c.a.getType(e))}(s))return t;const d=new p(s);r&&d.setFileToken(r),d.setUrl(r?void 0:n);const l=new o.a(i.a.getMessagePayload(t)).setAttachment(d.build()).build();return new i.a(t).setMessagePayload(l).build()}},520:function(e,t,n){"use strict";n.d(t,"b",(function(){return I})),n.d(t,"a",(function(){return S}));var a=n(191),o=n.n(a),i=n(706),c=n.n(i),r=n(197),s=n(217),d=n.n(s),l=n(705),u=n(457),b=n(233);const p=()=>{const e=Object(b.a)();return!(null===e||void 0===e||!e.enableSoundNotification)};var f=n(205),y=n(255);const O=e=>Object(y.e)(Object(f.b)(e));var v=n(603),g=n(218),h=n(212),j=n(241),m=n(192);const I={MESSAGE:"message",AGENT_ASSIGNMENT:"agentAssignment",CALL:"call"},C=o.a.createContext({play:d.a,pause:d.a}),T={[I.MESSAGE]:"https://live-chat-static.sprinklr.com/assets/738/notification-4de93778-e7e2-403b-9035-46fddfe6df16-1610394477.mp3",[I.AGENT_ASSIGNMENT]:"https://live-chat-static.sprinklr.com/assets/787/6279cf0d-c15c-4f6b-8889-d1be2f9c0264-2132784780.mp3",[I.CALL]:"https://live-chat-static.sprinklr.com/assets/787/64639b8e-faae-45ad-b7c5-450884c15e2f-2786217496.mp3"},E=(e,t)=>{var n,a,o;return null!==(n=null===e||void 0===e||null===(a=e.allScreens)||void 0===a||null===(o=a.notifications)||void 0===o?void 0:o[t])&&void 0!==n?n:T[t]},S=e=>{let{children:t}=e;const{otherConfigs:n}=Object(g.a)(),o=Object(r.d)(h.h),i=Object(j.d)(o),s=Object(v.a)({category:"LIVE_CHAT",userId:i}),[d,,b,f]=c()({src:"","data-testid":"messageAudio",preload:"none"}),[y,,T,S]=c()({src:"","data-testid":"callPickedByAgentNotifAudio",preload:"none"}),[x,,_,A]=c()({src:"",loop:!0,"data-testid":"callAudio",preload:"none"}),w=Object(u.a)(),M=(()=>{const e=Object(r.d)(O).enableSoundNotification.enabled,t=p();return e&&t})(),R=p(),P=Object(a.useCallback)((()=>{f.current&&(f.current.src=E(n,I.MESSAGE)),S.current&&(S.current.src=E(n,I.AGENT_ASSIGNMENT)),A.current&&(A.current.src=E(n,I.CALL))}),[]),D=Object(a.useCallback)((e=>{switch(e){case I.MESSAGE:return M?b.play():Promise.resolve();case I.AGENT_ASSIGNMENT:return T.play();case I.CALL:return _.play()}return Promise.resolve()}),[b,T,_,M]),N=Object(a.useCallback)((e=>{const t=D(e);"object"===typeof t&&t.catch((t=>s.warning(`Sound Notification Failed for ${e}:  ${t}`)))}),[D]),L=Object(a.useCallback)((e=>{switch(e){case I.MESSAGE:return b.pause();case I.AGENT_ASSIGNMENT:return T.pause();case I.CALL:return _.pause()}}),[b,T,_]),k=Object(a.useMemo)((()=>({play:N,pause:L})),[N,L]);return Object(m.jsx)(C.Provider,{value:k},Object(m.jsx)(l.b,{onClick:P},R&&d,w&&y,w&&x,t))};t.c=C},528:function(e,t,n){var a=n(36),o=n(128),i=n(83),c=n(863),r=n(1142),s=n(84),d=n(32);e.exports=function(e,t,n){if((e=d(e))&&(n||void 0===t))return o(e);if(!e||!(t=a(t)))return e;var l=s(e),u=s(t),b=r(l,u),p=c(l,u)+1;return i(l,b,p).join("")}},536:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(211);const o=Object(a.a)((()=>Promise.all([n.e(0),n.e(1),n.e(31)]).then(n.bind(null,1403))))},537:function(e,t,n){"use strict";var a=n(204);t.a=()=>{var e;return!(null===(e=Object(a.a)().trigger)||void 0===e||!e.useCustomTrigger)}},538:function(e,t){e.exports=function(e){return function(t){return null==e?void 0:e[t]}}},539:function(e,t,n){"use strict";n.d(t,"e",(function(){return a})),n.d(t,"d",(function(){return o})),n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return c})),n.d(t,"b",(function(){return r}));const a=["video/mp4","video/quicktime"],o=["audio/mp3","audio/x-mp3","audio/mpeg","audio/x-mpeg","audio/mpeg3","audio/x-mpeg-3"],i=[...o,"audio/wav","audio/x-wav","audio/wave","audio/x-wave","audio/vnd.wave"],c=["image/jpeg","image/png","image/gif"],r=["application/pdf","text/plain","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-powerpoint","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/onenote","application/json"]},602:function(e,t,n){"use strict";n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return i}));const a="@conversation/NEW_CONVERSATION_OPEN",o="@conversation/EXISTING_CONVERSATION_OPEN",i="@conversation/MEDIA_SEND"},609:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return p}));var a=n(191),o=n.n(a),i=n(197),c=n(391),r=n(447),s=n(242),d=n(0),l=n(192);const u="sessionExpiryModal",b=o.a.createContext(null),p=Object(a.memo)((e=>{const[t,n]=Object(a.useState)(null),[o,p]=Object(c.a)(u),f=Object(i.c)(),y=Object(d.P)();return Object(a.useEffect)((()=>{const e=r.d.on((e=>{switch(e.type){case r.c:n(e.payload.targetDate);break;case r.b:n(null)}}));return()=>e()}),[y]),Object(a.useEffect)((()=>{if(t)return y&&f({type:s.d}),void p(!0);o&&p(!1)}),[t]),Object(l.jsx)(b.Provider,{value:t},e.children)}));t.c=b},618:function(e,t,n){"use strict";var a=n(191),o=n(218),i=n(204),c=n(0),r=n(362);const s=new Set([r.a.CONVERSATION,r.a.KNOWLEDGE_BASE,r.a.CONVERSATION_HISTORY]);t.a=()=>{var e,t,n;const d=Object(o.a)(),l=Object(i.a)(),u=Object(c.i)(),b=null===(e=d.cardConfigs)||void 0===e||null===(t=e[0])||void 0===t?void 0:t.cards,p=(null===l||void 0===l||null===(n=l.homeScreen)||void 0===n?void 0:n.conversationCard)||{},f=(null===d||void 0===d?void 0:d.cards)||[],y=Object(a.useMemo)((()=>[{type:r.a.CONVERSATION,id:r.a.CONVERSATION,...p},...f]),[p,f]);return Object(a.useMemo)((()=>u?(null!==b&&void 0!==b?b:y).filter((e=>s.has(e.type))):null!==b&&void 0!==b?b:y),[u,b,y])}},620:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return c}));var a=n(193),o=n(195);const i=Object(a.a)("div",{target:"e13xym9v0"})((e=>({backgroundColor:Object(o.e)("header.lg.backgroundColor",Object(o.e)("header.backgroundColor")(e))(e),backgroundImage:Object(o.e)("header.lg.gradients")(e)})),";padding:var(--spr-lc-safe-area-top) var(--spr-lc-safe-area-right) var(--spr-lc-safe-area-bottom) var(--spr-lc-safe-area-left);"),c=Object(a.a)("div",{target:"e13xym9v1"})("border-radius:",Object(o.e)("card.borderRadius"),";background-color:var(--spr-lc-bgc-16);")},621:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"c",(function(){return r})),n.d(t,"b",(function(){return s}));var a=n(193),o=n(195),i=n(429);const c=32,r=Object(a.a)("div",{target:"e1b8encq0"})("background-color:",(e=>Object(o.e)("header.lg.backgroundColor",Object(o.e)("header.backgroundColor")(e))(e)),";background-image:",Object(o.e)("header.lg.gradients"),";padding:",Object(o.h)("header.lg.padding"),";padding-bottom:",(e=>c+Object(o.e)("header.lg.paddingBottom")(e)),"px;height:",(e=>e.height||(e=>Object(i.c)(e)+c)(e)),"px;transition:",(e=>e.showTransition&&"height 0.2s ease-out"),";"),s=Object(a.a)("div",{target:"e1b8encq1"})({name:"anqr8i",styles:"width:100%;height:100%;padding:var(--spr-lc-safe-area-top) var(--spr-lc-safe-area-right) var(--spr-lc-safe-area-bottom) var(--spr-lc-safe-area-left);"})},622:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));n(191);var a=n(192);function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},o.apply(this,arguments)}function i(e){return Object(a.jsx)("svg",o({viewBox:"0 0 14 14","data-icon-name":"Chevron",focusable:"false"},e),Object(a.jsx)("path",{d:"M13.728 4.935a.931.931 0 00-1.316 0L7 10.346l-5.41-5.41a.932.932 0 00-1.318 0 .929.929 0 000 1.315l6.07 6.07a.931.931 0 001.316 0l6.07-6.07a.931.931 0 000-1.315z"}))}},623:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(290),o=n.n(a);let i;function c(e,t){const n=o()(e);return function(e,t,n){return[...Array(n)].map(((n,a)=>(a+t)%e.length)).map((t=>e[t]))}(n,function(e){return i||(i=Math.floor(Math.random()*e.length)),i}(n),t)}},624:function(e,t,n){"use strict";var a=n(191),o=n(520);n.d(t,"a",(function(){return o.b})),t.b=function(){return Object(a.useContext)(o.c)}},625:function(e,t,n){"use strict";t.a={INIT:0,STARTED:1,COMPLETED:2,ABORTED:3,ERROR:4,PAUSE:5}},626:function(e,t,n){"use strict";n.d(t,"b",(function(){return d})),n.d(t,"a",(function(){return l}));var a=n(664),o=n(374),i=n(274),c=n(338);const r=(e,t)=>`${c.a.getParnterId(t)}_${c.a.getAppId(t)}_${i.a.getId(o.a.getChatUser(e))}_${Date.now()}_${Math.random().toString(16).substr(2,8)}`;let s;const d=(e,t)=>{const n=o.a.getChatSessionToken(e),i=r(e,t),c=o.a.getInboxServerUrl(e),d=o.a.getUserInbox(e),l=null===e||void 0===e?void 0:e.fanPublishTopic;return s=new a.a({userName:n,clientId:i,inboxServerUrl:c,userInbox:d,fanPublishTopic:l}),s},l=()=>s},663:function(e,t,n){"use strict";var a=n(200),o=n(193),i=(n(191),n(194)),c=n(907),r=n(225),s=n(192);var d=e=>Object(s.jsx)("div",{className:"sr-only"},Object(s.jsx)(c.a,Object(a.a)({},e.message,{values:{count:`${e.unreadCount}`}})));const l=Object(o.a)("div",{target:"eobaybk0"})({name:"3zfe4h",styles:"background:var(--spr-lc-bgc-15);color:var(--spr-lc-c-15);font-size:var(--spr-lc-fs-xs);font-weight:600;border-radius:50%;"}),u=Object(i.d)({moreThanTenNotifications:{id:"moreThanTenNotifications",defaultMessage:"{value}+"}});t.a=function(e){return Object(s.jsx)(l,{"aria-live":"polite",className:`center-x-y ${e.className}`},Object(s.jsx)(d,{message:1===e.count?r.a.newNotification:r.a.newNotifications,unreadCount:e.count}),(t=e.count)>=10?Object(s.jsx)(c.a,Object(a.a)({},u.moreThanTenNotifications,{values:{value:Object(s.jsx)(i.b,{value:9})}})):Object(s.jsx)(i.b,{value:t}));var t}},665:function(e,t,n){"use strict";n.d(t,"b",(function(){return h})),n.d(t,"c",(function(){return j})),n.d(t,"a",(function(){return m}));var a=n(355),o=n.n(a),i=n(50),c=n.n(i),r=n(33),s=n.n(r),d=n(246),l=n.n(d),u=n(262),b=n(692),p=n(257),f=n(859),y=n.n(f);const O=[p.c,p.m,p.b],v=(()=>{const e={};return{shouldStoreInCache:e=>O.includes(e),shouldCallSubscriberOnSubscribe:t=>O.includes(t)&&(t=>y()(e,t))(t),setCache:(t,n)=>{e[t]=n},getCache:t=>e[t]}})(),g={};function h(e,t){const{topic:n,subscriber:a}=t;if(l()(n)&&s()(a)){const e=g[n];g[n]=e?[...e,a]:[a]}v.shouldCallSubscriberOnSubscribe(n)&&a(v.getCache(n))}function j(e,t){const{topic:n,subscriber:a}=t;if(l()(n)&&s()(a)){const e=g[n],t=o()(e,(e=>e===a));-1!==t&&(e.splice(t,1),g[n]=e)}}function m(e){let{topic:t,payload:n,callback:a}=e;const o=g[t];if(n.shouldLogEvent){var i,r,s,d;const e=null===n||void 0===n||null===(i=n.request)||void 0===i?void 0:i.conversationId;b.a.info({chatConversationId:e,message:`${e?`${e} : `:""}${null!==n&&void 0!==n&&null!==(r=n.response)&&void 0!==r&&r.error?"Error":"Success"} event published - ${t}`,additionalDetails:{params:null===n||void 0===n?void 0:n.request,result:(null===n||void 0===n||null===(s=n.response)||void 0===s?void 0:s.error)||(null===n||void 0===n||null===(d=n.response)||void 0===d?void 0:d.data),subscriberCount:(null===o||void 0===o?void 0:o.length)||0}})}v.shouldStoreInCache(t)&&v.setCache(t,n),c()(o,((e,t)=>{try{e(n,a)}catch(o){Object(u.a)(o)}}))}},688:function(e,t,n){var a=n(3).isFinite;e.exports=function(e){return"number"==typeof e&&a(e)}},689:function(e,t){e.exports=function(e){return null===e}},690:function(e,t,n){"use strict";n.d(t,"c",(function(){return r})),n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return d}));const a="AVAILABLE",o="UN_AVAILABLE",i="PENDING";let c=i;const r=e=>{c=e?a:o},s=()=>c===o,d=()=>c===i},691:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"e",(function(){return i})),n.d(t,"d",(function(){return c})),n.d(t,"c",(function(){return r})),n.d(t,"b",(function(){return s}));const a={PENDING:"PENDING",SUCCESS:"SUCCESS",FAIL:"FAIL",EXPIRED:"EXPIRED"};let o=a.PENDING;const i=e=>{o=e},c=()=>o===a.PENDING,r=()=>o===a.FAIL,s=()=>o===a.EXPIRED},692:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(221),o=n(601),i=n(392);const c=new o.a((e=>Object(a.__awaiter)(void 0,void 0,void 0,(function*(){return(yield i.a.post("/livechat/logging/log/event",e)).data}))),{batch:!0,adapter:e=>{const{message:t,chatConversationId:n,additionalDetails:a}=e;return{logMessage:t,logTime:Date.now(),additionalDetails:a,chatConversationId:n}}})},693:function(e,t,n){"use strict";n.d(t,"h",(function(){return w})),n.d(t,"c",(function(){return M})),n.d(t,"g",(function(){return R})),n.d(t,"b",(function(){return N})),n.d(t,"a",(function(){return L})),n.d(t,"f",(function(){return k})),n.d(t,"e",(function(){return U})),n.d(t,"d",(function(){return B}));var a=n(31),o=n.n(a),i=n(216),c=n.n(i),r=n(8),s=n.n(r),d=n(859),l=n.n(d),u=n(327),b=n(266),p=n(338),f=n(294),y=n(291),O=n(656),v=n(0),g=n(52),h=n(807),j=n(252),m=n(199),I=n(691),C=n(690),T=n(284),E=n(792),S=n(600),x=n(9),_=n(229),A=n(257);const w=async e=>{let{handshakeDetails:t,applicationConfig:n,getSessionToken:a}=e;if(a&&Object(b.b)({getSessionToken:a}),t&&(Object(b.b)({userId:t.chatUser.userId}),await Object(b.c)({wafScriptUrl:t.wafScriptUrl})),n){const e=p.a.getAutoExpireUserSessionTimeInMinutes(n),t=s()(n,"otherConfigs.settings.autoExpiryConfig.alertTime");Object(b.b)({sessionExpiryTimeInMinutes:e,sessionExpiryAlertTime:t})}},M=e=>{const t=!!f.a.isDebugModeEnabled(e.otherConfigs);window.sprDebugLog=function(){t&&console.debug(...arguments)}},R=async e=>{const t=e.appId,n=e.user,a=null===n||void 0===n?void 0:n.authToken;if(l()(n,"isSSOAuthorized")){const e=(e=>{if(e)try{return JSON.parse(atob(e.split(".")[1]))}catch(t){console.error("Unable to parse user token when isSSOAuthorized",e)}return _.a})(await Object(y.a)(t));Object(j.b)(e.chatUserId)&&await Object(y.h)(t)}a&&(await Object(y.h)(t),await Object(y.l)(t,a))};async function P(e){const{appId:t,user:n,userContext:a,sessionOrigin:i,customUser:r,otp:d,locale:l,meetingId:u,deflectionToken:b}=e,p=c()(n,["authToken","isSSOAuthorized","oneTimeToken"]);let f,v;if(!!i){const{primaryToken:e,secondaryToken:n}=await async function(e){let t,n,a;try{t=await Object(y.b)(e,O.d)}catch(c){console.warn(c)}try{n=await Object(y.b)(e,O.a)}catch(c){console.warn(c)}try{a=await Object(y.b)(e,O.b)}catch(c){console.warn(c)}const o=n||a||t;let i=a||t;return i=i===o?void 0:i,{primaryToken:o,secondaryToken:i}}(t);f=e,v=n}else f=await Object(y.e)(t);const h={appId:t,oneTimeToken:s()(n,"oneTimeToken"),chatSessionToken:f,secondaryChatToken:v,page:Object(g.b)(),pageTitle:Object(g.c)(),referralPage:Object(g.d)(),timezone:Object(g.g)(),userAgent:Object(g.f)(),enforcedLocale:l,fallbackLocales:Object(x.a)(),meetingId:u,otp:d,customUser:r,deflectionToken:b};if(!o()(p)){const{id:e,hash:t,...n}=p;Object.assign(h,{chatUser:{userId:e,...n},chatUserSignature:t})}return o()(a)||Object.assign(h,{customContext:a}),h}const D=async e=>Object(u.c)(e),N=async e=>{const t=await Object(u.a)(await P(e));if(!!e.sessionOrigin&&await(async e=>{try{await Object(y.i)(e,O.d)}catch(t){console.warn(t)}try{await Object(y.i)(e,O.b)}catch(t){console.warn(t)}})(e.appId),await Object(y.l)(e.appId,t.chatSessionToken),!t.userPreferences){const e=await Object(y.g)(t.chatUser.userId);return{...t,userPreferences:e}}return t},L=async e=>{const[t,n]=await Promise.allSettled([D(e),N(e)]);if("rejected"===t.status||"rejected"===n.status)return[t,n];const a=t.value;if(n.value.chatUser.locale=n.value.chatUser.locale||a.defaultLocale,Object(v.P)()||!Object(h.a)(a))return[t,n];try{var o;const e=null===(o=a.otherConfigs.settings)||void 0===o?void 0:o.autoLoginSSOId;e&&await Object(h.c)({ssoId:e})}catch(c){Object(m.b)(c)}const i=await N(e);return i.chatUser.locale=i.chatUser.locale||a.defaultLocale,[t,{value:i,status:"fulfilled"}]},k=e=>{S.a.on(e),Object(I.e)(I.a.SUCCESS)},U=async()=>{Object(I.e)(I.a.FAIL),Object(C.c)(!1),await Object(E.b)(),Object(T.a)({topic:A.b,payload:{error:!0}})},B=()=>{Object(I.e)(I.a.EXPIRED)}},706:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(380).__importDefault(n(1181)).default("audio");t.default=a},712:function(e,t,n){"use strict";var a=n(191),o=n(197),i=n(223),c=n(311),r=n(212),s=n(241),d=n(240),l=n(601);const u=(new i.a).setUrl("/video-chat/conversation/log/event").setType(d.a.POST).build(),b="AUDIO_CALL",p="VIDEO_CALL";t.a=e=>{let{videoConversationId:t,conversationId:n,isAudioCall:i}=e;const[d]=Object(c.a)(u,{ignoreResults:!0}),f=Object(a.useCallback)((e=>{const t=Date.now();return e.forEach((e=>{e.offsetTime=t-e.logTime})),d(e)}),[d]),y=Object(o.d)(r.h),O=Object(s.d)(y),v=i?b:p,g=Object(a.useCallback)((e=>{const{message:a}=e;return{videoConversationId:t,logMessage:`USER: ${a}`,loggerSnUserId:O,category:v,loggerSnType:"SPRINKLR_LIVE_CHAT",logTime:Date.now(),additionalDetails:{conversationId:n}}}),[n,t,O,v]),h=Object(a.useMemo)((()=>new l.a(f,{batch:!0,adapter:g,skip:!t})),[f,g,t]);return Object(a.useEffect)((()=>()=>{h.cleanup()}),[]),h}},713:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(211);const o=Object(a.a)((()=>Promise.all([n.e(7),n.e(19)]).then(n.bind(null,1404))))},714:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return u}));var a=n(191),o=n.n(a),i=n(217),c=n.n(i),r=n(901),s=n(192);const d={debug:c.a,info:c.a,error:c.a,warning:c.a},l=o.a.createContext(d),u=e=>{let{videoConversationId:t,conversationId:n,children:a}=e;const o=Object(r.a)({videoConversationId:t,conversationId:n});return Object(s.jsx)(l.Provider,{value:o},a)}},715:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(193),o=n(198);const i=Object(a.a)("div",{target:"e18hq32b0"})((e=>Object(o.b)(e)),";")},716:function(e,t,n){"use strict";var a=n(656),o=n(292),i=n(1);const c=e=>`spr-cobrowse-state_${e}`,r=!!o.a.getSessionOrigin(Object(i.a)());t.a={get:async e=>{try{const t=c(e);if(!r)return a.d.getItem(t);const n=await a.c.getItem(t);if(!n){const e=await a.d.getItem(t);if(e)return a.d.removeItem(t),await a.c.setItem(t,e),e}return n}catch(t){return void console.warn(t)}},set:(e,t)=>r?a.c.setItem(c(e),t):a.d.setItem(c(e),t),remove:e=>r?a.c.removeItem(c(e)):a.d.removeItem(c(e))}},717:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n(191),o=n.n(a),i=n(217),c=n.n(i);const r=o.a.createContext({triggerPosition:null,onAction:c.a})},718:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(191);const o=Object(a.createContext)({setIsFrameMaximized:()=>null,isFrameMaximized:!1,isFrameManuallyResized:!1})},719:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return i}));const a=e=>{let{value:t,viewportHeight:n,triggerSize:a}=e;return t<0?0:Math.min(t,n-a)},o=e=>{let{bottom:t,viewportHeight:n,triggerSize:a}=e;const o=Math.max(n-t-a,0);return t>o?o:void 0},i=e=>{let t=!0;return[Object.keys(e).reduce(((n,a)=>{const o=e[a].isOpen,i=e[a].canDragIfOpen;return t=t&&(!o||i),n+(o?e[a].height:0)}),0),t]}},720:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(191),o=n(708);const i=()=>"MOBILE"===Object(a.useContext)(o.a).device},721:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n(197),o=n(241),i=n(205);const c=e=>Object(o.c)(Object(i.h)(e));function r(){return Object(a.d)(c)}},723:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(243);const o=(e,t)=>{const n={conversationId:t};return e?{type:a.eb,payload:n}:{type:a.fb,payload:n}}},724:function(e,t,n){"use strict";n.d(t,"g",(function(){return f})),n.d(t,"d",(function(){return y})),n.d(t,"f",(function(){return O})),n.d(t,"a",(function(){return v})),n.d(t,"e",(function(){return g})),n.d(t,"h",(function(){return h})),n.d(t,"c",(function(){return j})),n.d(t,"b",(function(){return m}));var a=n(31),o=n.n(a),i=n(8),c=n.n(i),r=n(454),s=n(236),d=n(208),l=n(606),u=n(244),b=n(422),p=n(215);const f=e=>({[r.a.MIC]:!1,[r.a.CAMERA]:!1,[r.a.DRAG]:!e,[r.a.FULL_SCREEN]:e}),y=e=>e===s.f.WAITING,O=e=>e===s.h.WAITING?s.h.WAITING:s.h.SETUP,v=(e,t)=>((e,t)=>{switch(e.state){case l.a.CALL_INITIATED:case l.a.CALL_STARTING:return t.WAITING;case l.a.CALL_OFFER_ACCEPTED:return t.SETUP;default:return t.JOINED}})(e,t?s.f:s.h),g=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t?e?u.a.AUDIO_CALL_JOIN_CTA_CLICKED:u.a.VIDEO_CALL_JOIN_CTA_CLICKED:e?u.a.AUDIO_CALL_JOIN_BACK_CTA_CLICKED:u.a.VIDEO_CALL_JOIN_BACK_CTA_CLICKED},h=e=>{let{callDetails:t}=e;return!o()(t)},j=e=>t=>(t.type===b.l||t.type===b.e)&&c()(t,"payload.videoConversationId")===e,m=(e,t,n)=>Object(p.p)(e,t).items.find((e=>{var t,a;return(null===(a=null===(t=e.messagePayload)||void 0===t?void 0:t.attachment)||void 0===a?void 0:a.type)===d.c.VIDEO_CHAT&&e.messagePayload.attachment.videoChatConversationId===n}))},725:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var a=n(15),o=n.n(a),i=n(726),c=n.n(i);const r=/%%\[(\w+)\]/g,s=(e,t)=>e?c()(e,r,((e,n)=>Object.prototype.hasOwnProperty.call(t,n)?t[n]:e)):"",d=(e,t)=>e&&"string"!==typeof e?o()(e,((e,n,a)=>(e[a]=s(n,t),e)),{}):s(e,t)},726:function(e,t,n){var a=n(32);e.exports=function(){var e=arguments,t=a(e[0]);return e.length<3?t:t.replace(e[1],e[2])}},727:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n(31),o=n.n(a),i=n(15),c=n.n(i);const r=(e,t)=>c()(t,((e,t)=>{if(!t)return e;const n="*".repeat(null===t||void 0===t?void 0:t.length);return e.replace(t,n)}),e),s=e=>{let{text:t,maskingConfigs:n}=e;if(!t)return{};const{maskedText:a,maskedValues:i}=c()(n,((e,t)=>{let n;try{n=new RegExp(t.jsRegex,"g")}catch(i){return e}const{updatedText:a,capturedGroups:o}=((e,t,n,a)=>{let o=e.exec(t),i=t;const c={};for(;o&&0!==o[0].length;)n&&o.groups&&Object.entries(o.groups).forEach((e=>{var t;let[n,i]=e;c[n]=null!==(t=c[n])&&void 0!==t?t:[];let r={};if(a){const e=o.index;r={startIndex:e,endIndex:e+i.length-1}}c[n].push({...r,value:i})})),i=r(i,o),o=e.exec(i);return{capturedGroups:c,updatedText:i}})(n,e.maskedText,t.saveMaskedData,t.showAgentUnmaskedData);return{maskedText:a,maskedValues:{...e.maskedValues,...o}}}),{maskedText:t,maskedValues:{}});return{maskedText:a,maskedValues:o()(i)?void 0:i}}},728:function(e,t,n){"use strict";var a=n(314),o=n.n(a);t.a=new class{constructor(){this.subscribers={},this.emit=e=>{var t;Object.keys(null!==(t=this.subscribers[e.type])&&void 0!==t?t:{}).forEach((t=>{this.subscribers[e.type][t](e)}))},this.on=e=>{let{type:t,subscriber:n}=e;this.subscribers[t]||(this.subscribers[t]={});const a=o()("PUSH_EVENTS");return this.subscribers[t][a]=n,()=>{delete this.subscribers[t][a]}}}}},790:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return hg})),n.d(t,"reInitApp",(function(){return jg}));var a=n(191),o=n.n(a),i=n(293),c=n.n(i),r=n(192),s=n(197),d=n(603),l=n(1060),u=n(609),b=n(702);const p=e=>Object(r.jsx)(b.a,{history:e.history},Object(r.jsx)(u.b,null,e.children));var f=n(608),y=n(583),O=n(520),v=n(878);const g=e=>{const t=Object(a.useState)(null);return Object(r.jsx)(v.a.Provider,{value:t},e.children)};var h=n(269),j=n(704),m=n(661),I=n(891),C=n(707);class T extends o.a.Component{constructor(){super(...arguments),this.state={hasError:!1}}static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(e){var t;"ChunkLoadError"===(null===e||void 0===e?void 0:e.name)&&(null===(t=this.props.logger)||void 0===t||t.error(`${(e=>{const t=e.message.match(/Loading chunk (.+?) failed/);return t?t[1]:"Unknown"})(e)} Chunk failed to load`))}render(){const{hasError:e}=this.state,{children:t,fallbackRender:n=null}=this.props;return e?n:t}}var E=T,S=n(1055),x=n(378),_=n.n(x),A=n(218),w=n(379),M=n(351),R=n(338),P=n(255),D=n(205),N=n(284),L=n(262),k=n(792),U=n(690),B=n(257),G=n(0);const $=e=>Object(P.c)(Object(D.b)(e)),F=e=>{const t=Object(w.a)(),n=Object(A.a)(),o=Object(s.d)($),i=Object(G.O)(),c=R.a.getVisibilityConfigFilter(n),{hasPassed:r}=Object(M.a)(i?void 0:c,{logOnSuccess:!0,defaultValue:!1}),d=!r&&o;return Object(a.useEffect)((()=>{r&&Object(L.a)("Sprinklr Chat hidden by visibility criteria"),o||Object(L.a)("Sprinklr Chat disabled by sdk"),Object(U.c)(d),Object(N.a)({topic:B.c,payload:{data:{isChatVisible:d}}})}),[r,o,d]),Object(a.useEffect)((()=>((async()=>{await Object(k.b)(),Object(N.a)({topic:B.a,payload:{}}),Object(N.a)({topic:B.b,payload:{error:!1}})})(),()=>{Object(N.a)({topic:B.c,payload:{data:{isChatVisible:!1}}})})),[]),_()((()=>{Object(k.b)()}),[t]),d?e.children:null};var V=o.a.memo(F),H=n(584),W=n(499),z=n(202),q=n(796),X=n(582),K=n(216),Y=n.n(K),Q=n(15),Z=n.n(Q);const J=e=>{let{isDarkMode:t,theme:n,targetDocument:i,container:c,children:s}=e;const{targetElement:d,cssVariables:l}=Object(a.useMemo)((()=>{const e=i&&c?i.querySelector(c):null,a=Z()(t?n.tokens.dark:Y()(n.tokens,"dark"),((e,t,n)=>`${e}${n}:${t};`),"");let o;return o=e?t?`.spr-lc-dark{${a}}`:`.spr-lc-light{${a}}`:`:root {${a}}`,{targetElement:e,cssVariables:o}}),[n.tokens,t,i,c]);return Object(a.useLayoutEffect)((()=>{d&&function(e,t){t?e.classList.contains("spr-lc-dark")||(e.classList.add("spr-lc-dark"),e.classList.remove("spr-lc-light")):e.classList.contains("spr-lc-light")||(e.classList.add("spr-lc-light"),e.classList.remove("spr-lc-dark"))}(d,t)}),[d,t]),Object(r.jsx)(o.a.Fragment,null,Object(r.jsx)(r.Global,{styles:Object(r.css)(l,"","")}),s)};var ee=n(228),te=n(655);var ne=e=>{let{theme:t,isDarkMode:n,targetDocument:o,container:i,skipAutoGenerate:c,children:s}=e;const{skin:d}=Object(ee.a)(),l=Object(a.useMemo)((()=>{if(c)return t;const e=Object(te.a)({appColors:t.colors,appTypography:t.typography,appIcons:t.icons,appTokens:t.tokens});return Object(te.c)({appBase:e,styles:t.styles,skin:d})}),[t,d,c]);return Object(r.jsx)(z.a,{theme:l},Object(r.jsx)(J,{isDarkMode:n,targetDocument:o,container:i,theme:l},s))},ae=n(708);function oe(){return oe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},oe.apply(this,arguments)}const ie={direction:"ltr",device:"DESKTOP",skin:"CLASSIC",intl:{locale:"en",messages:{},defaultLocale:"en"},ownerDocument:window.document},ce=e=>{let{direction:t,device:n,skin:o,ownerDocument:i,intl:c,children:s,themeConfig:d}=e;const l=Object(a.useMemo)((()=>{return e=i,Object(X.a)({container:e.head});var e}),[i]);return Object(r.jsx)(r.CacheProvider,{value:l},Object(r.jsx)(q.a,c,Object(r.jsx)(ae.b,{isDarkMode:d.isDarkMode,direction:t,device:n,skin:o},Object(r.jsx)(ne,oe({},d,{targetDocument:i}),s))))};ce.defaultProps=ie;var re=ce,se=n(458),de=n(204),le=n(421),ue=n.n(le),be=n(306),pe=n(229);const fe=[be.h.BOTTOM_LEFT,be.h.CENTER_LEFT,be.h.TOP_LEFT],ye=[be.h.BOTTOM_RIGHT,be.h.CENTER_RIGHT,be.h.TOP_RIGHT],Oe=e=>{let{triggerAlign:t,frameAlign:n}=e;if(fe.includes(t))switch(n){case be.c.TRIGGER_TOP_RIGHT__BOX_BOTTOM_RIGHT:return be.c.TRIGGER_TOP_LEFT__BOX_BOTTOM_LEFT;case be.c.TRIGGER_TOP_LEFT__BOX_BOTTOM_RIGHT:return be.c.TRIGGER_TOP_RIGHT__BOX_BOTTOM_LEFT;case be.c.TRIGGER_BOTTOM_LEFT__BOX_BOTTOM_RIGHT:return be.c.TRIGGER_BOTTOM_RIGHT__BOX_BOTTOM_LEFT;case be.c.VIEWPORT_BOTTOM_RIGHT_BOX_BOTTOM_RIGHT:return be.c.VIEWPORT_BOTTOM_LEFT_BOX_BOTTOM_LEFT;default:return n||be.c.TRIGGER_TOP_LEFT__BOX_BOTTOM_LEFT}switch(n){case be.c.TRIGGER_TOP_LEFT__BOX_BOTTOM_LEFT:return be.c.TRIGGER_TOP_RIGHT__BOX_BOTTOM_RIGHT;case be.c.TRIGGER_TOP_RIGHT__BOX_BOTTOM_LEFT:return be.c.TRIGGER_TOP_LEFT__BOX_BOTTOM_RIGHT;case be.c.TRIGGER_BOTTOM_RIGHT__BOX_BOTTOM_LEFT:return be.c.TRIGGER_BOTTOM_LEFT__BOX_BOTTOM_RIGHT;case be.c.VIEWPORT_BOTTOM_LEFT_BOX_BOTTOM_LEFT:return be.c.VIEWPORT_BOTTOM_RIGHT_BOX_BOTTOM_RIGHT;default:return n||be.c.TRIGGER_TOP_RIGHT__BOX_BOTTOM_RIGHT}},ve=[be.c.TRIGGER_TOP_LEFT__BOX_BOTTOM_LEFT,be.c.TRIGGER_TOP_RIGHT__BOX_BOTTOM_LEFT,be.c.TRIGGER_BOTTOM_RIGHT__BOX_BOTTOM_LEFT,be.c.VIEWPORT_BOTTOM_LEFT_BOX_BOTTOM_LEFT],ge=[be.c.TRIGGER_TOP_LEFT__BOX_BOTTOM_RIGHT,be.c.TRIGGER_TOP_RIGHT__BOX_BOTTOM_RIGHT,be.c.TRIGGER_BOTTOM_LEFT__BOX_BOTTOM_RIGHT,be.c.VIEWPORT_BOTTOM_RIGHT_BOX_BOTTOM_RIGHT],he=e=>t=>(e=>{var t;let{framePath:n,styles:a}=e;const o=a.trigger.align,i=null===(t=a[n])||void 0===t?void 0:t.align;if(o&&i){if(ye.includes(o)&&ve.includes(i))return!0;if(fe.includes(o)&&ge.includes(i))return!0}return!1})({framePath:e,styles:t})?{...t,[e]:{...t[e],align:Oe({triggerAlign:t.trigger.align,frameAlign:t[e].align})}}:t,je=e=>{const{trigger:t}=null!==e&&void 0!==e?e:pe.a,{align:n=be.h.BOTTOM_RIGHT,orientation:a=be.j.HORIZONTAL}=null!==t&&void 0!==t?t:pe.a;let o=null!==n&&void 0!==n?n:be.h.BOTTOM_RIGHT;return"left"===n&&(o=be.h.BOTTOM_LEFT),"right"===n&&(o=be.h.BOTTOM_RIGHT),{...e,trigger:{...e.trigger,orientation:a,align:o}}};var me=e=>{let{children:t}=e;const{theme:n}=Object(de.a)(),{fontConfig:o}=Object(A.a)(),i=Object(se.a)(),c=Object(a.useMemo)((()=>{return Object(te.c)({appBase:Object(te.a)({appColors:n.colors,appTypography:n.typography,appIcons:n.icons,appTokens:n.tokens,fontConfig:o}),styles:(e=n.styles,ue()([je,he("frame"),he("proactivePrompt")])(e)),skin:i});var e}),[n,i,o]);return Object(r.jsx)(z.a,{theme:c},t)},Ie=n(264),Ce=n(203),Te=n(1),Ee=n(46);const Se=Object(W.c)((e=>{let{intl:t,children:n}=e;const o=Object(Ie.a)(),i=Object(Ce.a)(),c=Object(se.a)(),s=Object(z.b)(),d=Object(a.useMemo)((()=>({locale:t.locale,messages:t.messages,defaultLocale:t.defaultLocale})),[t]),l=Object(a.useMemo)((()=>({theme:s,isDarkMode:o.isDarkMode,skipAutoGenerate:!0,container:`#${Ee.a}`})),[s,o.isDarkMode]);return Object(r.jsx)(re,{ownerDocument:Object(Te.b)().document,direction:i.direction,device:o.device,skin:c,intl:d,themeConfig:l},n)})),xe=e=>{let{children:t}=e;return Object(r.jsx)(me,null,Object(r.jsx)(Se,null,t))};var _e=o.a.memo(xe),Ae=n(48),we=n.n(Ae),Me=n(2),Re=n.n(Me);const Pe=e=>{let{id:t,filters:n,cb:o}=e;const i=Object(M.a)(n);return Object(a.useEffect)((()=>{o({data:{id:t,filters:n,results:Re()(i)?we()(i,(e=>({passed:e.hasPassed}))):{passed:i.hasPassed}}})}),[i,n,o]),null},De=e=>Object(P.b)(Object(D.b)(e)),Ne=o.a.memo((e=>{const t=Object(s.d)(De);return Object(r.jsx)(o.a.Fragment,null,we()(t,((e,t)=>{let{filters:n,cb:a}=e;return Object(r.jsx)(Pe,{key:t,id:t,filters:n,cb:a})})),e.children)}));var Le=n(896),ke=n(200),Ue=n(253),Be=n(194),Ge=n(536),$e=n(270),Fe=n(193),Ve=n(428),He=n(388),We=n(898),ze=n(619),qe=n(195),Xe=n(198);const Ke=e=>Object(r.css)("fill:",Object(qe.a)("white")({theme:e}),";height:100%;width:100%;"),Ye=Object(Fe.a)("div",{target:"e12trxni0"})("position:fixed;top:0;left:0;z-index:",(e=>Object(qe.e)("frame.zIndex")(e)),";transform:translatez(",(e=>Object(qe.e)("frame.translateZ")(e)),"px) !important;height:100%;width:100%;"),Qe=Object(Fe.a)(He.a,{target:"e12trxni1"})({name:"774i4t",styles:"height:100%;width:100%;border-width:0px;"}),Ze=e=>Object(r.css)(".frame-content{width:100%;height:100%;}.frame-root{height:100%;width:100%;}body{background-color:",Object(Ve.l)(.2,Object(qe.a)("charcoal")({theme:e})),";}"),Je=Object(Fe.a)(ze.c,{target:"e12trxni2"})({name:"hgqvtn",styles:"width:48px;height:48px;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);"}),et=Object(Fe.a)(ze.c,{target:"e12trxni3"})({name:"uwwqev",styles:"width:100%;height:100%;"}),tt=Object(Fe.a)(We.a,{target:"e12trxni4"})("margin-top:var(--spr-lc-safe-area-top);",(e=>{let{isPhone:t,direction:n}=e;return t?`${Object(Xe.d)("right: calc(20px + var(--spr-lc-safe-area-right))","left: calc(20px + var(--spr-lc-safe-area-left))")({direction:n})};`:`${Object(Xe.d)("right: calc(40px + var(--spr-lc-safe-area-right))","left: calc(40px + var(--spr-lc-safe-area-left))")({direction:n})};`}),"");var nt=n(201),at=n(196),ot=n(396);const it=Object(Be.d)({preview:{id:"preview",defaultMessage:"Preview"}});var ct=Object(W.c)((e=>{let{previewItem:t,intl:n}=e;const o=Object(z.b)(),i=Object(nt.a)(),c=Object(Ue.a)(),s=!!t&&t.type!==ot.a.DIALOGUE,{direction:d}=Object(Ce.a)(),l=Object(a.useCallback)((e=>{e.stopPropagation(),e.preventDefault(),c.goBack()}),[c]);return Object(r.jsx)(Ye,{className:"spr-chat__modal-box spr-live-chat-frame"},Object(r.jsx)(Qe,{name:"spr-chat__modal-frame","aria-label":n.formatMessage(it.preview),title:n.formatMessage(it.preview)},Object(r.jsx)(r.Global,{styles:Ze(o)}),Object(r.jsx)(a.Suspense,{fallback:Object(r.jsx)(Je,null,Object(r.jsx)(et,{className:"center-x center-y"}))},Object(r.jsx)(Ge.a,{previewItem:t})),s&&Object(r.jsx)(tt,{Icon:$e.a,iconCss:Ke(o),iconName:at.a.CLOSE,"aria-label":at.a.CLOSE,direction:d,isPhone:i,onClick:l})))})),rt=n(8),st=n.n(rt);var dt=e=>{if(!e.search.includes("preview=1"))return null;const t=st()(e.state,"sprPreview.type");switch(t){case ot.a.DIALOGUE:return{type:t,message:st()(e.state,"sprPreview.message"),title:st()(e.state,"sprPreview.title"),locationParams:st()(e.state,"sprPreview.locationParams"),cancelLabel:st()(e.state,"sprPreview.cancelLabel"),confirmationLabel:st()(e.state,"sprPreview.confirmationLabel"),onConfirm:st()(e.state,"sprPreview.onConfirm"),onCancel:st()(e.state,"sprPreview.onCancel")};case ot.a.IMAGE:case ot.a.VIDEO:return{type:t,url:st()(e.state,"sprPreview.url"),downloadParams:st()(e.state,"sprPreview.downloadParams")};default:return null}};var lt=()=>{const e=Object(Ue.a)().location,t=Object(a.useMemo)((()=>dt(e)),[e.search,e.state]);return t?Object(r.jsx)(ct,{previewItem:t}):null},ut=n(31),bt=n.n(ut),pt=n(209),ft=n(534),yt=n.n(ft),Ot=n(320),vt=n(713),gt=n(900),ht=n(714),jt=n(212),mt=n(353),It=n(236),Ct=n(227);const Tt=e=>Object(mt.d)(Object(jt.b)(e)),Et=e=>Object(mt.f)(Object(jt.b)(e)),St=e=>Object(P.g)(Object(D.b)(e)),xt=e=>Object(mt.r)(Object(jt.b)(e)),_t=e=>Object(mt.i)(Object(jt.b)(e)),At=e=>{const t=Object(nt.a)(),n=Object(s.d)(Et),o=Object(s.d)(Tt),i=Object(s.d)(xt),c=Object(s.d)(St),d=Object(pt.a)(Ct.g),l=Object(s.d)(_t),u=Object(Ot.a)(),b=n.state,p=o.state,f=yt()(b),y=yt()(p);return Object(a.useEffect)((()=>{c&&(t&&b&&b!==f||p===It.f.WAITING)&&d(!1)}),[c,b,f,d,p,y]),Object(a.useEffect)((()=>{const e=()=>{u.info({message:`Currently on live chat tab: ${!document.hidden}`})};return document.addEventListener("visibilitychange",e),()=>{document.removeEventListener("visibilitychange",e)}}),[u]),bt()(n)&&(i||bt()(o))||t&&c&&!l?null:Object(r.jsx)(a.Suspense,{fallback:null},Object(r.jsx)(vt.a,Object(ke.a)({},e,{outgoingCallDetails:n,incomingCallDetails:o})))},wt=e=>Object(mt.c)(Object(jt.b)(e)),Mt=e=>Object(mt.n)(Object(jt.b)(e)),Rt=e=>{const t=Object(s.d)(wt),n=Object(s.d)(Mt);return Object(r.jsx)(ht.b,{videoConversationId:t.videoConversationId,conversationId:t.conversationId},Object(r.jsx)(gt.b,{videoConversationId:t.videoConversationId,conversationId:t.conversationId,isAudioCall:n},Object(r.jsx)(At,e)))};var Pt=o.a.memo(Rt),Dt=n(902),Nt=n(620),Lt=n(903),kt=n(207);var Ut=()=>Object(r.jsx)(Nt.b,{className:"flex-column-container full-height"},Object(r.jsx)(Lt.a,null),Object(r.jsx)("div",{className:"flex-item-1 p-x-4 p-y-4 p-t-6"},Object(r.jsx)(Nt.a,{className:"full-height"},Object(r.jsx)(kt.c,{className:"flex-row-container center-x-y full-height"})))),Bt=n(621);var Gt=()=>Object(r.jsx)("div",{className:"flex-column-container full-height"},Object(r.jsx)(Bt.c,null,Object(r.jsx)(Bt.b,null)),Object(r.jsx)("div",{className:"flex-item-1 spr"},Object(r.jsx)(kt.c,{className:"flex-row-container center-x-y full-height"}))),$t=n(715),Ft=n(429);var Vt=()=>{const e=Object(Ie.a)().isDarkMode;return Object(r.jsx)("div",{className:"flex-column-container full-height"},Object(r.jsx)(Ft.b,null,Object(r.jsx)(Ft.a,null)),Object(r.jsx)($t.a,{isDarkMode:e,className:"flex-item-1 spr"},Object(r.jsx)(kt.c,{className:"flex-row-container center-x-y full-height"})))},Ht=n(17);var Wt=()=>{const e=Object(G.y)()===Ht.b,t=Object(Ue.a)(),{location:{pathname:n}}=t;return"/home"===n&&!Object(G.E)()?e?Object(r.jsx)(Gt,null):Object(r.jsx)(Ut,null):Object(r.jsx)(Vt,null)};var zt=()=>{const e=Object(se.a)(),[t,n]=Object(a.useState)();return Object(a.useLayoutEffect)((()=>{Dt.a.preload(e).then((e=>{let[t]=e;n(t)}))}),[]),Object(r.jsx)("div",{className:"flex-column-container full-height full-width spr ovf-hidden"},t?Object(r.jsx)(a.Suspense,{fallback:Object(r.jsx)(Wt,null)},Object(r.jsx)(Dt.a,{pages:t})):Object(r.jsx)(Wt,null))};const qt={"%":1,vw:1,vh:1,vmin:1,vmax:1},Xt=Object(Fe.a)(He.a,{target:"ewsnucf0"})({name:"1l2nfdo",styles:"border:0 none;height:100%;width:100%;"}),Kt=Object(Fe.a)("div",{target:"ewsnucf1"})("height:100%;width:100%;display:flex;align-items:center;justify-content:center;background-image:",Object(qe.e)("page.gradients"),";background-color:",Object(qe.e)("page.backgroundColor"),";"),Yt=Object(Fe.a)("div",{target:"ewsnucf2"})((e=>{const{absoluteValue:t,unit:n}=Object(qe.b)("page.minPadding",{defaultUnit:"px"})(e),a=2*t+n;return Object(r.css)("height:calc(100% - ",a,");width:calc(100% - ",a,");border-radius:",t?Object(qe.e)("frame.borderRadius")(e):"0px",";")})," box-shadow:",(e=>Object(qe.e)("frame.boxShadow")(e)),";overflow:hidden;background-color:var(--spr-lc-bgc-1);",(e=>!e.isContained&&`max-width: ${Object(qe.e)("page.maxWidth")(e)};\n     max-height: ${Object(qe.e)("page.maxHeight")(e)};\n     ${(e=>{const{absoluteValue:t,styleValue:n,unit:a}=Object(qe.b)("page.maxWidth",{defaultUnit:"px"})(e),{absoluteValue:o,styleValue:i,unit:c}=Object(qe.b)("page.maxHeight",{defaultUnit:"px"})(e),r=Object(qe.e)("frame.borderRadius")(e);return qt[c]&&qt[a]?100===o||100===t?"":`border-radius: ${r};`:qt[c]?100===o?"":`\n        @media screen and (min-width: calc(${n} + 1px)) {\n          border-radius: ${r};\n        };\n      `:qt[a]?100===t?"":`\n        @media screen and (min-height: calc(${i} + 1px)) {\n          border-radius: ${r};\n        };\n      `:`\n      @media screen and (min-width: calc(${n} + 1px)) and (min-height: calc(${i} + 1px)) {\n        border-radius: ${r};\n      };\n    `})(e)}\n  `),""),Qt={name:"2b9rdz",styles:".frame-content{width:100%;height:100%;}.frame-root{height:100%;width:100%;}"};var Zt=n(220),Jt=n(397);const en=["/conversation/"],tn={survey:Jt.a.SURVEY,401:Jt.a[401],home:Jt.a.HOME,"guided-workflow":Jt.a.GUIDED_WORKFLOW,logout:Jt.a.LOGOUT},nn=e=>{let t;const n=null===e||void 0===e?void 0:e.split("/");if(n&&n.length>1)switch(n[1]){case"knowledge-base":n.length>2&&(t="article"===n[2]?Jt.a.KNOWLEDGE_BASE:Jt.a.KNOWLEDGE_BASE_LIST);break;case"conversation":n.length>3&&"survey"===n[3]?t=Jt.a.SURVEY:n.length>2&&(t="all"===n[2]?Jt.a.CONVERSATION_LIST:Jt.a.CONVERSATION);break;default:t=tn[n[1]]}return t};var an=n(244);const on=()=>{var e;const t=Object(Zt.a)(),n=Object(Ue.a)(),o=null===n||void 0===n||null===(e=n.location)||void 0===e?void 0:e.pathname,i=null===n||void 0===n?void 0:n.action,c=Object(a.useMemo)((()=>nn(o)),[o]);Object(a.useEffect)((()=>{c&&((e,t)=>!("REPLACE"===t&&en.filter((t=>null===e||void 0===e?void 0:e.match(t))).length))(o,i)&&t({action:an.a.PAGE_OPENED,additional:{value:c}})}),[c,o])};var cn=n(529);var rn=o.a.memo(Object(W.c)((e=>{const t=Object(nt.a)(),n=Object(Zt.a)();return on(),Object(a.useEffect)((()=>(n({action:an.a.CONVERSATION_WINDOW_OPENED}),()=>{n({action:an.a.CONVERSATION_WINDOW_CLOSED})})),[]),Object(r.jsx)(Kt,null,Object(r.jsx)(Yt,{ref:e.pageBoxRef,className:"spr",isContained:t||Object(cn.a)()},Object(r.jsx)(zt,null)))}))),sn=n(808),dn=n(211);const ln=Object(dn.a)((()=>Promise.all([n.e(0),n.e(1),n.e(132)]).then(n.bind(null,1508))));var un=()=>{const e=Object(A.a)();return null!==e&&void 0!==e&&e.autoExpireUserSessionTimeInMinutes?Object(r.jsx)(a.Suspense,{fallback:null},Object(r.jsx)(ln,null)):null},bn=n(230),pn=n.n(bn),fn=n(233),yn=n(537),On=n(215);const vn=Object(dn.a)((()=>Promise.all([n.e(0),n.e(57)]).then(n.bind(null,1490)))),gn=e=>Object(P.f)(Object(D.b)(e)),hn=e=>Object(On.b)(Object(On.u)(Object(jt.c)(e)));var jn=e=>{var t,n;const o=Object(s.d)(D.d),i=Object(s.d)(gn),c=Object(s.d)(hn),d=Object(de.a)(),l=(Object(fn.a)(),Object(yn.a)()),u=!(null===d||void 0===d||null===(t=d.proactivePrompt)||void 0===t||!t.showWithBoxOpen),b=!(null===d||void 0===d||null===(n=d.trigger)||void 0===n||!n.hideWhenOpen),p=Object(a.useRef)();p.current=Object(a.useMemo)((()=>pn()(o)),[o]);const f=i&&!l&&!u;return bt()(p.current)||f||!c?null:Object(r.jsx)(a.Suspense,{fallback:null},Object(r.jsx)(vn,Object(ke.a)({},e,{visiblePrompt:p.current,showWithBoxOpen:u,isTriggerHiddenWhenMaximised:b})))},mn=n(282),In=n.n(mn),Cn=n(217),Tn=n.n(Cn),En=n(265),Sn=n(382),xn=n(376);const _n=()=>{var e;const t=Object(de.a)(),n=Object(yn.a)(),a=Object(z.b)(),o=Object(qe.e)("trigger.orientation")({theme:a})===be.j.VERTICAL;return!(null===(e=t.trigger)||void 0===e||!e.draggable)&&!n&&!o},An=e=>Object(qe.e)("trigger.yPadding",20)({theme:e}),wn=(e,t,n)=>{const a=Object(qe.e)("trigger.align")({theme:e}),o=Object(qe.e)("trigger.orientation")({theme:e})===be.j.VERTICAL,i=Object(qe.e)("trigger.height")({theme:e});return a===be.h.CENTER_LEFT||a===be.h.CENTER_RIGHT?(t-(o?n:i))/2:An(e)},Mn=(e,t)=>{if(!e)return null;const{width:n,height:a,left:o,top:i}=e.getBoundingClientRect();return{width:n,height:a,left:o,right:t.innerWidth-o-n,bottom:t.innerHeight-i-a}};var Rn=n(9),Pn=n(427),Dn=n(717);const Nn=Object(dn.a)((()=>n.e(28).then(n.bind(null,1526)))),Ln=e=>{let{children:t}=e;const n=Object(Rn.b)(),o=Object(Te.a)().triggerContainer,i=Object(a.useRef)(!0),c=Object(xn.a)(),s=Object(a.useMemo)((()=>o?n.document.querySelector(o):null),[o]),[d,l]=Object(a.useState)((()=>Mn(s,n))),u=Object(a.useCallback)(In()((()=>{l((()=>Mn(s,n)))}),200),[]),b=Object(En.a)(n,u),p=Object(Sn.a)(n,u);i.current&&(i.current=!1,s&&(b(s),p(s))),Object(a.useLayoutEffect)((()=>{s&&u()}),[c]);const f=Object(a.useMemo)((()=>({triggerPosition:d,onAction:Tn.a})),[d]);return s?Object(r.jsx)(Dn.a.Provider,{value:f},t):(Object(L.a)('Error in Sprinklr Live Chat. "triggerContainer" missing in window.sprChatSettings.'),null)},kn=e=>{let{children:t}=e;const{height:n}=Object(xn.a)(),i=Object(Rn.b)(),c=Object(z.b)(),s=Object(qe.e)("trigger.width")({theme:c}),d=Object(qe.e)("trigger.height")({theme:c}),l=Object(qe.e)("trigger.orientation")({theme:c})===be.j.VERTICAL,u=(e=>Object(qe.e)("trigger.xPadding",20)({theme:e}))(c),b=An(c),p=Object(qe.e)("trigger.align")({theme:c}),f=Object(Pn.c)(p),y=Object(Pn.d)(p),[O,v]=Object(a.useState)(s),[g,h]=Object(a.useState)((()=>y?NaN:wn(c,i.innerHeight,O)));Object(a.useEffect)((()=>{l&&h(wn(c,i.innerHeight,O))}),[l,c,n,O]);const j=Object(a.useCallback)((e=>{let{type:t,payload:n}=e;switch(t){case"UPDATE_WIDTH":v(n);break;case"UPDATE_BOTTOM":h(n)}}),[]),m=Object(a.useMemo)((()=>{const e=f?be.b.LEFT:be.b.RIGHT,t=f?be.b.RIGHT:be.b.LEFT;return{triggerPosition:{height:d,width:O,bottom:g,[e]:u,[t]:i.innerWidth-O-u,edge:e,...y?{top:b}:void 0},onAction:j}}),[d,g,O,f,y,i.innerWidth,u,b]);return _n()?Object(r.jsx)(o.a.Suspense,{fallback:null},Object(r.jsx)(Nn,{positionContextValue:m},t)):Object(r.jsx)(Dn.a.Provider,{value:m},t)},Un=e=>{let{children:t}=e;const n=Object(yn.a)()?Ln:kn;return Object(r.jsx)(n,null,t)};var Bn=n(225),Gn=n(298);var $n=Object(W.c)((e=>{var t;const n=Object(de.a)(),i=Object(fn.a)(),c=Object(a.useRef)(),s=e.intl.formatMessage,d=Object(pt.a)(Gn.e),l=!(null===(t=n.trigger)||void 0===t||!t.useCustomTrigger),u=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return Object(r.css)("html,body{height:100%;}body{margin:0;}",e,"")}(null===i||void 0===i?void 0:i.pageGlobalStyles),b=null===i||void 0===i?void 0:i.delayInitializePoller,p=Object(a.useCallback)((()=>{b||d()}),[d,b]);return Object(r.jsx)(o.a.Fragment,null,Object(r.jsx)(r.Global,{styles:u}),Object(r.jsx)(Xt,{"aria-label":s(Bn.a.liveChat),name:"spr-chat__page-frame",contentDidMount:p,title:s(Bn.a.liveChat)},Object(r.jsx)(r.Global,{styles:Qt}),Object(r.jsx)(un,null),Object(r.jsx)(rn,Object(ke.a)({},e,{pageBoxRef:c}))),l?Object(r.jsx)(Un,null,Object(r.jsx)(jn,null)):null,Object(r.jsx)(Pt,{parentFrameRef:c}),Object(r.jsx)(sn.c,{parentFrameRef:c}),Object(r.jsx)(lt,null))})),Fn=n(460),Vn=n.n(Fn),Hn=n(814),Wn=n(718),zn=n(459),qn=n(719);var Xn=n(268);const Kn=e=>Object(P.g)(Object(D.b)(e)),Yn=Object(W.c)((e=>{var t;const n=Object(s.d)(Kn),i=e.intl.formatMessage,c=Object(Zt.a)(),d=Object(nt.a)(),l=Object(pt.a)(Gn.e),[u,b]=Object(a.useState)(!1),[p,f]=Object(a.useState)(!1);on();const y=Object(a.useCallback)(((e,t)=>{b(e),f(t)}),[]),{triggerPosition:O}=Object(zn.a)(),v=Object(yn.a)()?Hn.b:Hn.c;_()((()=>{const e=n?Xn.a.CONVERSATION_WINDOW_CLOSED:Xn.a.CONVERSATION_WINDOW_OPENED;c({action:e})}),[n]);const g=Object(fn.a)(),h=null===g||void 0===g?void 0:g.delayInitializePoller,j=Object(a.useCallback)((()=>{h||l()}),[h,l]),m=Object(a.useMemo)((()=>({setIsFrameMaximized:y,isFrameMaximized:u,isFrameManuallyResized:p})),[y,u]),I=Object(de.a)(),C=!(null===I||void 0===I||null===(t=I.trigger)||void 0===t||!t.hideWhenOpen),{styles:T,triggerTopOffsetBeforeReposition:E}=(e=>{let{isMinimized:t,isPhone:n,isTriggerHiddenWhenMaximised:o}=e;const i=Object(a.useRef)(),c=Object(a.useRef)(),r=Object(z.b)(),{triggerPosition:s,onAction:d}=Object(zn.a)(),l=Object(a.useRef)(),{height:u}=Object(xn.a)(),b=Object(qe.e)("frame.sYMargin")({theme:r}),p=Object(qe.e)("frame.align")({theme:r}),f=p===be.c.TRIGGER_BOTTOM_LEFT__BOX_BOTTOM_RIGHT||p===be.c.TRIGGER_BOTTOM_RIGHT__BOX_BOTTOM_LEFT,y=Object(qe.b)("frame.height",{})({theme:r}).absoluteValue,O=Object(a.useMemo)((()=>y+(o||f?-s.height:b)),[y,b,o,f,s.height]);return Object(a.useLayoutEffect)((()=>{t===c.current||n?t&&(l.current=Object(qn.b)({viewportHeight:u,triggerSize:s.height,bottom:s.bottom})):(c.current=t,o||d({type:"REPOSITION_TRIGGER",payload:{height:t?0:O,type:"box",isOpen:!t,reset:t,canDragIfOpen:!1}}))}),[t,n,d,o,O,s.bottom,s.height,u]),Object(a.useMemo)((()=>{i.current=Object(Hn.h)({theme:r,isPhone:n})}),[r,n]),{styles:i.current,triggerTopOffsetBeforeReposition:l.current}})({isMinimized:n,isPhone:d,isTriggerHiddenWhenMaximised:C});return Object(r.jsx)(o.a.Fragment,null,Object(r.jsx)(r.Global,{styles:T}),Object(r.jsx)(Vn.a,{in:!n,classNames:Hn.f,timeout:{enter:Hn.a,exit:Hn.a},mountOnEnter:!0,unmountOnExit:!0,appear:!0},Object(r.jsx)(Wn.a.Provider,{value:m},Object(r.jsx)(v,{className:"spr-chat__box spr-live-chat-frame",ref:e.frameRef,isPhone:d,triggerPosition:O,triggerTopOffsetBeforeReposition:E,isMaximized:u,isTriggerHiddenWhenMaximised:C},Object(r.jsx)(Hn.e,{isPhone:d},Object(r.jsx)(Hn.d,{"aria-label":i(Bn.a.liveChat),name:"spr-chat__box-frame",isPhone:d,contentDidMount:j,title:i(Bn.a.liveChat)},Object(r.jsx)(r.Global,{styles:Hn.g}),Object(r.jsx)("div",{className:"full-height full-width"},Object(r.jsx)(un,null),Object(r.jsx)(zt,null))))))))}));var Qn=o.a.forwardRef(((e,t)=>Object(r.jsx)(Yn,{frameRef:t}))),Zn=n(214),Jn=n(248),ea=n(305);const ta={PULSE:e=>{const t=Object(qe.e)("trigger.borderColor")({theme:e}),n=r.keyframes`0%{box-shadow:0 0 0 0 ${Object(Ve.k)(t,.6)}}100%{box-shadow:0 0 0 10px ${Object(Ve.k)(t,0)}}`;return Object(r.css)("animation:",n," 2s ease infinite;")}},na=e=>{const{triggerAnimationInfo:t,theme:n}=e,a=st()(t,"effect"),o=ta[a];return o?o(n):""},aa=e=>{const t=Math.min(Object(qe.e)("trigger.width")(e),Object(qe.e)("trigger.height")(e));return Math.min(Math.max(...Object(Jn.b)(Object(qe.e)("trigger.borderRadius",t/2)(e))),t/2)*(1-2**-.5)},oa=e=>.13*Object(qe.e)("trigger.overlayIconButton.button.height")(e),ia=e=>Object(qe.e)("trigger.height")(e)-.5*Object(qe.e)("trigger.overlayIconButton.button.height")(e)-(aa(e)-oa(e)),ca=e=>{let{direction:t,theme:n}=e;return`${t===ea.b.LTR?"right":"left"}: ${-.5*Object(qe.e)("trigger.overlayIconButton.button.height")({theme:n})+aa({theme:n})-oa({theme:n})}px`},ra=Object(Fe.a)("div",{target:"eg0frzz0"})("width:",(e=>Object(qe.e)("trigger.overlayIconButton.button.width")(e)),"px;height:",(e=>Object(qe.e)("trigger.overlayIconButton.button.height")(e)),"px;border-radius:",(e=>Object(qe.e)("trigger.overlayIconButton.borderRadius",(Object(qe.e)("trigger.overlayIconButton.button.height")(e)+(Object(qe.e)("trigger.removeIcon.border")(e)?2:0))/2+"px")(e)),";background-color:",Object(qe.e)("trigger.removeIcon.backgroundColor"),";border:",Object(qe.e)("trigger.removeIcon.border"),";position:absolute;bottom:",(e=>ia(e)),"px;",(e=>ca(e)),";cursor:pointer;display:flex;align-items:center;justify-content:center;visibility:hidden;transform:translatez(",Object(qe.e)("frame.translateZ"),"px);z-index:",Object(qe.e)("frame.zIndex"),";",Xe.o,"{visibility:visible;}"),sa=Object(Fe.a)("div",{target:"eg0frzz1"})({name:"l1tuuh",styles:"width:100%;height:100%;display:flex;align-items:center;justify-content:center;"}),da=Object(Fe.a)(at.b,{target:"eg0frzz2"})("width:",(e=>Object(qe.e)("trigger.overlayIconButton.icon.width")(e)),"px;height:",(e=>Object(qe.e)("trigger.overlayIconButton.icon.height")(e)),"px;fill:",Object(qe.e)("trigger.removeIcon.fill"),";"),la=`\n  ${ra} {\n    visibility: visible;\n  }\n  & ~ .notification-container {\n    visibility: hidden;\n  }\n`,ua=Object(Fe.a)("div",{target:"eg0frzz3"})((e=>e.enableTriggerHideIcon&&`\n    &:hover {\n      ${e.applyRemoveIconStyles&&la};\n    }\n  `),";"),ba=e=>{let{showTrigger:t,showLabel:n,labelWidth:a,theme:o}=e;return n&&t?a+Object(qe.e)("trigger.icon.width")({theme:o})+8+48:Object(qe.e)("trigger.width")({theme:o})},pa=Object(Fe.a)("div",{target:"eg0frzz4"})("background:transparent;overflow:hidden;box-shadow:",Object(qe.e)("trigger.boxShadow"),";border-radius:",(e=>Object(qe.e)("trigger.borderRadius",Object(qe.e)("trigger.height")(e)/2+"px}")(e)),";height:",(e=>e.triggerPosition.height),"px;position:relative;transition:",(e=>{let{enableTriggerWidthTransition:t,animationDuration:n}=e;return t?`width ${n}s`:"none"}),";visibility:",(e=>{let{showTrigger:t}=e;return t?"visible":"hidden"}),";width:",(e=>e.triggerPosition.width),"px;",Object(Xe.e)(Xe.m,Xe.h),";"),fa=Object(Fe.a)(He.a,{target:"eg0frzz5"})("border-radius:",(e=>Object(qe.e)("trigger.borderRadius",Object(qe.e)("trigger.height")(e)/2+"px}")(e)),";border:0 none;height:100%;width:100%;"),ya=(e,t)=>{const n=!((Object(qe.e)("trigger.backgroundUrls")({theme:e})||Object(qe.e)("trigger.icon.url")({theme:e}))&&t.isMinimized);return Object(r.css)("body{background-color:",n?Object(qe.e)("trigger.backgroundColor")({theme:e}):"transparent",";}")},Oa=Object(Fe.a)("div",{target:"eg0frzz6"})({name:"17ehq8p",styles:"position:absolute;top:0;left:0;height:100%;width:100%;-webkit-touch-callout:none !important;-webkit-user-select:none !important;background:transparent;"});var va=n(1067);const ga=Object(Fe.a)("div",{target:"e1t174p80"})("cursor:pointer;position:relative;overflow:hidden;border-radius:",(e=>Object(qe.e)("trigger.borderRadius",Object(qe.e)("trigger.height")(e)/2+"px")(e)),";height:",(e=>Object(qe.e)("trigger.height")(e)),"px;background-color:transparent;"),ha=Object(Fe.a)(ga,{target:"e1t174p81"})("border:",(e=>`${Object(qe.e)("trigger.borderWidth")(e)}px solid ${Object(qe.e)("trigger.borderColor")(e)}`),";background-size:cover;"),ja=Object(Fe.a)(ga,{target:"e1t174p82"})("background-color:",Object(qe.e)("trigger.backgroundColor"),";"),ma={name:"15vzngf",styles:"bottom:0;top:0;transform:translate3d(-50%,-50%,0);transition:transform 0.16s linear,opacity 0.08s linear,-webkit-transform 0.16s linear;width:100%;"},Ia={name:"w8476o",styles:"transform:rotate(90deg) scale(0);opacity:0;"},Ca={name:"12ovxee",styles:"transform:scale(0);opacity:0;"},Ta={name:"k4n0ja",styles:"transform:rotate(0deg) scale(1);opacity:1;"},Ea={name:"20dbs8",styles:"transform:scale(1);opacity:1;"},Sa=Object(Fe.a)(at.b,{target:"e1t174p83"})("fill:",Object(qe.e)("trigger.closeIcon.color"),";height:",Object(qe.e)("trigger.closeIcon.height"),"px;width:",Object(qe.e)("trigger.closeIcon.width"),"px;"),xa=Object(Fe.a)("div",{target:"e1t174p84"})(ma,";"),_a=Object(Fe.a)("div",{target:"e1t174p85"})(ma,";"),Aa=Object(Fe.a)("h2",{target:"e1t174p86"})("color:",Object(qe.e)("trigger.icon.color"),";",(e=>Object(Xe.c)("font-size","var(--spr-lc-fs-lg)","var(--spr-lc-fs-xl)")(e))," font-weight:600;margin-bottom:0;margin-top:0;line-height:1.4;white-space:nowrap;",Object(Xe.d)("margin-left: 8px","margin-right: 8px;"),";"),wa=Object(Fe.a)(at.b,{target:"e1t174p87"})("height:",Object(qe.e)("trigger.icon.height"),"px;width:",Object(qe.e)("trigger.icon.width"),"px;fill:",Object(qe.e)("trigger.icon.color"),";");var Ma=n(720);function Ra(){return Ra=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Ra.apply(this,arguments)}function Pa(){return Pa=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Pa.apply(this,arguments)}function Da(){return Da=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Da.apply(this,arguments)}function Na(){return Na=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Na.apply(this,arguments)}function La(){return La=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},La.apply(this,arguments)}function ka(){return ka=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ka.apply(this,arguments)}function Ua(){return Ua=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Ua.apply(this,arguments)}var Ba=n(622);function Ga(){return Ga=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Ga.apply(this,arguments)}var $a=n(623);function Fa(){return Fa=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Fa.apply(this,arguments)}let Va;const Ha=e=>Object(qe.e)("trigger.backgroundUrls")({theme:e})||Object(qe.e)("trigger.icon.url")({theme:e});var Wa=o.a.memo((e=>{const{customTriggerIconUrls:t,onLoad:n,onError:o,...i}=e,c=Object(a.useRef)(null),s=Va||(Va=Object($a.a)(t,1)[0]);return Object(a.useEffect)((()=>{if(c.current){const e=new Image,t=()=>{c.current.style.backgroundImage=`url("${s}")`,n(!0)};return e.addEventListener("load",t),e.addEventListener("error",o),e.src=s,()=>{e.removeEventListener("load",t),e.removeEventListener("error",o)}}}),[s,o,n]),Object(r.jsx)(ha,Fa({},i,{ref:c}))})),za=n(617);const qa={MINIMIZED:"MINIMIZED",MAXIMIZED:"MAXIMIZED"},Xa={[za.a.BOX]:{Icon:function(e){return Object(r.jsx)("svg",Ra({viewBox:"0 0 14 14","data-icon-name":"ChatTriggerBox",focusable:"false"},e),Object(r.jsx)("path",{d:"M12.7,0.3L12.7,0.3H1.3C-0.2,0.3,0,1.7,0,1.7v7.7c0,1.1,0.9,1.2,1.2,1.2c0.1,0,0.1,0,0.1,0h3.6c0.5,0,0.7,0.2,0.7,0.2 l4.5,2.9c0.1,0.1,0.2,0.1,0.3,0.1c0.6,0,0.7-0.8,0.7-0.8v-2.3h1.6c1.3,0,1.4-1.2,1.4-1.2V1.5C14.1,0.4,12.9,0.3,12.7,0.3z M8.2,7.4 H2.5C2.2,7.4,2,7.2,2,6.9c0-0.3,0.2-0.5,0.5-0.5h5.7c0.3,0,0.5,0.2,0.5,0.5S8.5,7.4,8.2,7.4z M11.2,4.4H2.5C2.2,4.4,2,4.2,2,3.9 c0-0.3,0.2-0.5,0.5-0.5h8.8c0.3,0,0.5,0.2,0.5,0.5C11.7,4.2,11.5,4.4,11.2,4.4z"}))},Component:wa},[za.a.BUBBLE]:{Icon:function(e){return Object(r.jsx)("svg",Pa({viewBox:"0 0 14 14","data-icon-name":"ChatTriggerBubble",focusable:"false"},e),Object(r.jsx)("path",{d:"M12.9,2.5c-0.9-1.1-2.5-2-3.8-2.3C3.5-0.9,0.7,3.3,0.3,4.9c-0.9,4.9,1.2,7.6,2.5,8.9C2.9,14,3.1,14,3.1,13.9 c-0.2-3,1.7-3.5,5.6-3.3c1.4,0.1,4.7-1.1,5-3.7C14,5.3,14.1,4.1,12.9,2.5z M3.1,6.5c-0.4,0-0.8-0.4-0.8-0.8s0.4-0.8,0.8-0.8 s0.8,0.4,0.8,0.8C3.9,6.1,3.5,6.5,3.1,6.5z M6.9,6.5c-0.4,0-0.8-0.4-0.8-0.8s0.4-0.8,0.8-0.8s0.8,0.4,0.8,0.8 C7.7,6.1,7.3,6.5,6.9,6.5z M10.7,6.5c-0.4,0-0.8-0.4-0.8-0.8s0.4-0.8,0.8-0.8c0.4,0,0.8,0.4,0.8,0.8C11.6,6.1,11.2,6.5,10.7,6.5z"}))},Component:wa},[za.a.COLLABORATORS]:{Icon:function(e){return Object(r.jsx)("svg",Da({viewBox:"0 0 14 14","data-icon-name":"ChatTriggerCollaborators",focusable:"false"},e),Object(r.jsx)("path",{d:"M12.103 7.498c.077 0 .145 0 .216.005l.11.013-.02-.157a5.233 5.233 0 00-2.392-3.729l-.247-.148A2.925 2.925 0 017.22 5.37l-.224.008A2.944 2.944 0 014.3 3.673l-.078-.192-.212.126a5.236 5.236 0 00-2.445 3.908 1.823 1.823 0 01.325-.018 2.893 2.893 0 012.945 2.836A2.797 2.797 0 014.11 12.2l-.155.16.114.072a5.598 5.598 0 002.625.822l.322.01.336-.01a5.591 5.591 0 002.724-.894 2.744 2.744 0 01-.88-2.026 2.86 2.86 0 012.907-2.836z"}),Object(r.jsx)("path",{d:"M1.893 8.51a1.934 1.934 0 00-1.087.332l-.015.011a1.801 1.801 0 00-.792 1.481 1.858 1.858 0 001.72 1.816l.174.008.17-.008a1.856 1.856 0 001.723-1.816A1.889 1.889 0 001.893 8.51zm10.214 0a1.864 1.864 0 00-1.893 1.824 1.837 1.837 0 001.248 1.715 1.936 1.936 0 00.477.102l.168.007.17-.008a1.822 1.822 0 00-.17-3.64zM6.998 4.366a1.864 1.864 0 001.894-1.824A1.848 1.848 0 006.998.737 1.864 1.864 0 005.105 2.56a1.849 1.849 0 001.893 1.805z"}))},Component:wa},[za.a.CLOUD]:{Icon:function(e){return Object(r.jsx)("svg",Na({viewBox:"0 0 14 14","data-icon-name":"ChatTriggerCloud",focusable:"false"},e),Object(r.jsx)("path",{d:"M7.1,0C3.2,0,0.1,3.1,0.1,6.9c0,1.7,0.5,3,1.5,4.2l-1,2.5C0.5,13.8,0.6,14,0.8,14h0.1l3.7-0.6C5.4,13.7,6,13.8,7,13.8h0.1 c3.8,0,6.8-3.1,6.8-6.9C13.9,3.1,10.9,0,7.1,0z M3.2,7.8C2.8,7.8,2.4,7.4,2.4,7s0.4-0.8,0.8-0.8S4,6.6,4,7C4,7.5,3.7,7.8,3.2,7.8z M7.2,7.8C6.7,7.8,6.4,7.4,6.4,7s0.4-0.8,0.8-0.8S8,6.6,8,7C7.9,7.5,7.6,7.8,7.2,7.8z M11,7.8c-0.4,0-0.8-0.4-0.8-0.8 s0.4-0.8,0.8-0.8c0.4,0,0.8,0.4,0.8,0.8C11.8,7.5,11.5,7.8,11,7.8z"}))},Component:wa},[za.a.MIC]:{Icon:function(e){return Object(r.jsx)("svg",Ua({viewBox:"0 0 14 14","data-icon-name":"ChatTriggerMic",focusable:"false"},e),Object(r.jsx)("path",{id:"Shape-Copy-3",d:"M7.1,0C4.5,0,2.5,2,2.5,4.5V6H2.3c-1.1,0-2,0.9-2,2v1.2c0,1.1,0.9,2,2,2h1.5c0.3,0,0.5-0.2,0.5-0.5V6.4 C4.3,6.2,4.1,6,3.9,6H3.4V4.5c0-2,1.6-3.6,3.7-3.6s3.7,1.6,3.7,3.6V6h-0.5C9.9,6,9.8,6.2,9.8,6.4v4.2c0,0.3,0.2,0.5,0.5,0.5h0.4 c-0.1,0.3-0.3,0.5-0.6,0.7c-0.4,0.3-1,0.5-1.9,0.6c-0.2-0.4-0.6-0.7-1.1-0.7c-0.7,0-1.2,0.5-1.2,1.2C5.8,13.5,6.3,14,7,14 c0.5,0,0.9-0.3,1.1-0.8c1-0.1,1.9-0.3,2.4-0.8c0.5-0.4,0.8-0.9,0.9-1.4h0.2c1.1,0,2-0.9,2-2V7.9c0-1.1-0.9-2-2-2h-0.2V4.5 C11.6,2,9.6,0,7.1,0z"}))},Component:wa},[za.a.ELLIPSIS]:{Icon:function(e){return Object(r.jsx)("svg",La({viewBox:"0 0 32 32","data-icon-name":"ChatTriggerEllipsis",focusable:"false"},e),Object(r.jsx)("path",{id:"Combined-Shape",fillRule:"evenodd",clipRule:"evenodd",d:"M28.28387,3.51813C30.33623,3.51813,32,5.1819,32,7.23426 v14.45782c0,2.05236-1.66377,3.71613-3.71613,3.71613l-1.29445-0.00002l0.61046,3.88583 c0.02475,0.1576,0.00841,0.31823-0.04651,0.46661l-0.04838,0.10876c-0.21984,0.41951-0.71518,0.60119-1.14754,0.43933 l-0.10658-0.04768l-9.26093-4.85285L3.71613,25.40821C1.66377,25.40821,0,23.74444,0,21.69208V7.23426 C0,5.1819,1.66377,3.51813,3.71613,3.51813H28.28387z M16,11.3664c-1.7103,0-3.09677,1.38647-3.09677,3.09677 S14.2897,17.55995,16,17.55995s3.09678-1.38647,3.09678-3.09678S17.7103,11.3664,16,11.3664z M7.52941,12.639 c-1.03959,0-1.88235,0.81671-1.88235,1.82417s0.84276,1.82417,1.88235,1.82417s1.88235-0.81671,1.88235-1.82417 S8.56901,12.639,7.52941,12.639z M24.47059,12.639c-1.0396,0-1.88235,0.81671-1.88235,1.82417s0.84276,1.82417,1.88235,1.82417 c1.03959,0,1.88235-0.81671,1.88235-1.82417S25.51018,12.639,24.47059,12.639z"}))},Component:wa},[za.a.ELLIPSIS_STROKE]:{Icon:function(e){return Object(r.jsx)("svg",ka({viewBox:"0 0 14 14","data-icon-name":"ChatTriggerEllipsisStroke",focusable:"false"},e),Object(r.jsx)("path",{d:"M2.4,13.8c-0.2-0.1-0.3-0.2-0.3-0.4v-2.6H1.7C0.7,10.8,0,10,0,9.1V1.9c0-1,0.8-1.7,1.7-1.7h10.5c1,0,1.7,0.8,1.7,1.7v7.2 c0,1-0.8,1.7-1.7,1.7H5.7l-2.8,2.8C2.7,13.8,2.5,13.9,2.4,13.8L2.4,13.8z M0.8,1.9v7.2c0,0.5,0.4,0.9,0.9,0.9h0.8 C2.8,10,3,10.2,3,10.5v2l2.2-2.3C5.3,10.1,5.4,10,5.5,10h6.8c0.5,0,0.9-0.4,0.9-0.9V1.9c0-0.5-0.4-0.9-0.9-0.9H1.7 C1.2,1,0.8,1.4,0.8,1.9z M6.2,5.5C6.2,5,6.6,4.7,7,4.7c0.5,0,0.8,0.4,0.8,0.8C7.8,6,7.5,6.3,7,6.3S6.2,6,6.2,5.5L6.2,5.5z M9.3,5.5 c0-0.5,0.4-0.8,0.8-0.8c0.5,0,0.8,0.4,0.8,0.8c0,0.5-0.3,0.8-0.8,0.8S9.3,6,9.3,5.5L9.3,5.5z M3,5.5C3,5,3.4,4.7,3.8,4.7 c0.5,0,0.8,0.4,0.8,0.8c0,0.5-0.4,0.8-0.8,0.8l0,0C3.4,6.3,3,6,3,5.5L3,5.5z"}))},Component:wa},[za.a.CROSS]:{Icon:function(e){return Object(r.jsx)("svg",Ga({viewBox:"0 0 14 14","data-icon-name":"Close",focusable:"false"},e),Object(r.jsx)("path",{d:"M12.8 12.7c.3-.3.3-.8 0-1L8 7l4.6-4.7c.3-.3.3-.8 0-1.1-.3-.3-.8-.3-1.1 0L6.9 6 2.3 1.3C2 1 1.5 1 1.2 1.3s-.3.7 0 1L5.9 7l-4.7 4.7c-.3.3-.3.8 0 1.1.3.3.8.3 1 0l4.7-4.7 4.7 4.6c.3.3.8.3 1.2 0z"}))},Component:Sa},[za.a.CHEVRON]:{Icon:Ba.a,Component:Sa}};var Ka=o.a.memo((e=>{const{className:t,minimizedIconClassName:n,maximizedIconClassName:i,triggerIconName:c=za.a.BUBBLE,label:s,innerLabelRef:d,mode:l=qa.MINIMIZED,closeIconName:u=za.a.CROSS,onLoad:b=Tn.a}=e,{Icon:p,Component:f}=Xa[c],{Icon:y,Component:O}=Xa[u],v=Object(z.b)(),[g,h]=Object(a.useState)(!1),j=Object(a.useMemo)((()=>Ha(v)),[v]),m=Object(Ma.a)(),{direction:I}=Object(ee.a)(),C=l===qa.MINIMIZED,T=!bt()(j)&&C&&!g,E=!m,S=E||C;Object(a.useEffect)((()=>{T||b(!0)}),[b,T]);const x=Object(a.useCallback)((()=>{h(!0)}),[]);return T?Object(r.jsx)(Wa,{"data-testid":"custom-trigger",className:t,theme:v,customTriggerIconUrls:j,onLoad:b,onError:x}):Object(r.jsx)(ja,{className:t,theme:v},Object(r.jsx)(o.a.Fragment,null,E&&Object(r.jsx)(xa,{className:`center-x-y ${i}`,css:C?Ia:Ta},Object(r.jsx)(O,{alt:y})),S&&Object(r.jsx)(_a,{className:`center-x-y ${n}`,css:C?Ea:Ca,"data-testid":"default-trigger"},Object(r.jsx)(f,{alt:p}),s?Object(r.jsx)(Aa,{ref:d,className:"m-b-0",direction:I,isPhone:m,theme:v},s):null)))})),Ya=n(245),Qa=n(224),Za=n(296);var Ja=n(906),eo=n(294);const to=e=>Object(P.g)(Object(D.b)(e)),no=e=>Object(D.d)(e);var ao=o.a.memo(Object(W.c)((e=>{const{direction:t}=Object(Ce.a)(),{showTrigger:n,handleShowTriggerStateChange:o,triggerHandlers:i,hideChatTrigger:c}=e,{onTouchStart:d,onTouchEnd:l,...u}=i,b=Object(Za.a)(n),p=Object(de.a)(),f=Object(z.b)(),y=Object(nt.a)(),{triggerPosition:O,onAction:v,isDragging:g}=Object(zn.a)(),h="vertical"===f.styles.trigger.orientation,j=Object(a.useRef)(),m=Object(a.useRef)(null),I=Object(Qa.a)()(eo.a.getTriggerConfig(p),"label"),[C,T]=Object(a.useState)(!0),[E,S]=Object(a.useState)(I),[x,_]=Object(a.useState)(!1),w=Object(s.d)(to),R=Object(s.d)(no),P=eo.a.getAnimationInfoOfTrigger(p),{showChatTriggerAnimation:D}=(()=>{var e,t;const[n,o]=Object(a.useState)(!1),i=Object(A.a)(),c=Object(de.a)(),r=null===(e=i.triggerAnimationConfig)||void 0===e?void 0:e.filter,{hasPassed:s}=Object(M.a)(r,{defaultValue:!1,logOnSuccess:!0}),d=null===(t=c.trigger)||void 0===t?void 0:t.animation,l=st()(d,"effect");return Object(a.useEffect)((()=>{!bt()(r)&&l&&o(s)}),[r,l,s]),{showChatTriggerAnimation:n}})(),N=yt()(E);Object(a.useEffect)((()=>(n&&!y&&(j.current=window.requestAnimationFrame((()=>{window.requestAnimationFrame((()=>{_(!0)}))}))),()=>{j.current&&window.cancelAnimationFrame(j.current)})),[n,y]),Object(a.useEffect)((()=>{const e=y&&!h?"":I;N!==e&&S(e)}),[y,I,N,h]);const L=e.intl.formatMessage,k=eo.a.canTriggerBeManuallyRemoved(p)&&w&&bt()(R),U=Object(a.useMemo)((()=>Object(qe.e)("trigger.icon.type")({theme:f})),[f]),B=Object(a.useMemo)((()=>Object(qe.e)("trigger.closeIcon.type")({theme:f})),[f]),G=Object(a.useCallback)((()=>{var e;v({type:"UPDATE_WIDTH",payload:ba({showLabel:w&&!!E,showTrigger:b.current,labelWidth:(e=m.current,e?Math.ceil(e.clientWidth):0),theme:f})})}),[w,E,f]),$=Object(a.useCallback)((()=>{b.current&&G()}),[G]),F=Object(a.useCallback)((e=>{o(e),G()}),[G]),V=Object(a.useCallback)((e=>{T(e)}),[]),H=L(w?Bn.a.openChat:Bn.a.closeChat),W=Object(a.useRef)();return Object(r.jsx)(ua,{enableTriggerHideIcon:k,applyRemoveIconStyles:C,"data-testid":"triggerContainer"},Object(r.jsx)(Ya.a,Object(ke.a)({component:pa,showTrigger:n,css:D?na({triggerAnimationInfo:P,theme:f}):"",triggerPosition:O,enableTriggerWidthTransition:!h&&x,animationDuration:E!==N?"0.25":"0.08",theme:f,className:"spr-chat__trigger-box spr-live-chat-frame",id:"spr-chat__trigger-button",ariaLabel:H,onTouchStart:()=>{V(!1),d(),W.current=window.setTimeout((()=>{V(!0),W.current=void 0}),700)},onTouchEnd:e=>{W.current&&window.clearTimeout(W.current),l(e)},onContextMenu:e=>{e.preventDefault(),V(!0)}},u),Object(r.jsx)(fa,{"aria-label":L(Bn.a.liveChat),name:"spr-chat__trigger-frame",contentDidMount:$,shouldHideLocaleLoader:!0,title:L(Bn.a.liveChat)},Object(r.jsx)(r.Global,{styles:ya(f,{isMinimized:w})}),Object(r.jsx)("div",{className:"full-height full-width"},Object(r.jsx)(Zn.FrameContextConsumer,null,(e=>{let{window:t}=e;return Object(r.jsx)(va.a,{window:t,onResize:G,resizeRefs:m},(e=>Object(r.jsx)(Ka,{className:"full-width",label:E,triggerIconName:U,closeIconName:B,mode:w?qa.MINIMIZED:qa.MAXIMIZED,onLoad:F,innerLabelRef:e,minimizedIconClassName:"spa",maximizedIconClassName:"spa"})))})))),Object(r.jsx)(Oa,null)),k&&n&&!g&&Object(r.jsx)(ra,{onClick:c,"data-testid":"triggerCloseIconContainer",direction:t,className:Ja.a},Object(r.jsx)(sa,null,Object(r.jsx)(da,{alt:$e.a,name:at.a.CLOSE}))))}))),oo=n(453),io=n(663);const co=Object(Fe.a)("div",{target:"e5qlxka0"})("display:flex;background:transparent;overflow:hidden;border-radius:",(e=>Object(qe.e)("trigger.overlayIconButton.borderRadius",Object(qe.e)("trigger.overlayIconButton.button.height")(e)/2+"px")(e)),";position:absolute;bottom:",(e=>ia(e)),"px;",(e=>ca(e)),";height:",Object(qe.e)("trigger.overlayIconButton.button.height"),"px;width:",Object(qe.e)("trigger.overlayIconButton.button.width"),"px;transform:translatez(",Object(qe.e)("frame.translateZ"),"px);z-index:",Object(qe.e)("frame.zIndex"),";box-shadow:var(--spr-lc-bxs-3);"),ro=Object(Fe.a)(He.a,{target:"e5qlxka1"})({name:"1l2nfdo",styles:"border:0 none;height:100%;width:100%;"}),so=Object(Fe.a)(io.a,{target:"e5qlxka2"})("font-size:",Object(qe.e)("trigger.overlayIconButton.fontSize"),";height:",Object(qe.e)("trigger.overlayIconButton.button.height"),"px;width:",Object(qe.e)("trigger.overlayIconButton.button.width"),"px;line-height:",Object(qe.e)("trigger.overlayIconButton.button.height"),"px;border-radius:",(e=>Object(qe.e)("trigger.overlayIconButton.borderRadius",Object(qe.e)("trigger.overlayIconButton.button.height")(e)/2+"px")(e)),";"),lo="spr-chat-proactive-box-anim",uo=Object(r.css)(".",lo,"-enter{opacity:0;}.",lo,"-enter.",lo,"-enter-active{opacity:1;transition:opacity 0.3s ease,transform 0.15s ease;}.",lo,"-enter-done,.",lo,"-appear{}.",lo,"-exit{opacity:1;}.",lo,"-exit.",lo,"-exit-active{opacity:0;transition:opacity 0s ease,transform 0s ease;}"),bo=Object(Fe.a)("div",{target:"e5qlxka3"})({name:"79elbk",styles:"position:relative;"});var po=n(431);const fo=Object(oo.a)((e=>Object(P.g)(Object(D.b)(e))),(e=>Object(On.B)(Object(On.u)(Object(D.c)(e)))),((e,t)=>({isMinimized:e,totalUnreadCount:t})));var yo=o.a.memo(Object(W.c)((e=>{const{isMinimized:t,totalUnreadCount:n}=Object(s.d)(fo),a=Object(z.b)(),{isDragging:i}=Object(zn.a)(),{direction:c}=Object(Ce.a)(),{isTriggerLoaded:d}=e,l=e.intl.formatMessage;return Object(r.jsx)(o.a.Fragment,null,Object(r.jsx)(r.Global,{styles:uo}),Object(r.jsx)(Vn.a,{in:t,timeout:{enter:300,exit:0},classNames:lo,mountOnEnter:!0,unmountOnExit:!0,appear:!0},Object(r.jsx)(bo,{className:"notification-container"},Object(r.jsx)(po.a,{unreadCount:n,shouldPlay:!0}),n>0&&d&&!i?Object(r.jsx)(co,{className:"spr-chat__notification-box spr-live-chat-frame","data-testid":"notification-frame-container",theme:a,direction:c},Object(r.jsx)(ro,{name:"spr-chat__notification-frame","aria-label":l(Bn.a.liveChatNotification),title:l(Bn.a.liveChatNotification)},Object(r.jsx)(so,{className:"center-x-y",count:n}))):null)))}))),Oo=n(51),vo=n.n(Oo);const go=Object(Fe.a)("div",{target:"ezg1tqb0"})("position:fixed;",(e=>vo()(e.triggerPosition.top)?`bottom: ${e.triggerPosition.bottom}px`:`top: ${e.triggerPosition.top}px`),";",(e=>{const t=e.triggerPosition.edge;return`${[t]}: ${[e.triggerPosition[t]]}px;`})," z-index:",Object(qe.e)("frame.zIndex"),";",(e=>{let{theme:t,triggerPosition:n}=e;const a=Object(qe.e)("trigger.orientation")({theme:t}),o=Object(qe.e)("trigger.align")({theme:t}),i=Math.abs((n.width-n.height)/2),c=Object(qe.e)("frame.translateZ")({theme:t});if(a===be.j.VERTICAL)switch(o){case"B_L":case"C_L":return`transform: rotate(90deg) translate3d(-${i}px, ${i}px, ${c}px)`;case"T_L":return`transform: rotate(90deg) translate3d(${i}px, ${i}px, ${c}px)`;case"B_R":case"C_R":return`transform: rotate(270deg) translate3d(${i}px, ${i}px, ${c}px)`;case"T_R":return`transform: rotate(270deg) translate3d(-${i}px, ${i}px, ${c}px)`;default:return`transform: translateZ(${c}px)`}return`transform: translateZ(${c}px)`}),";",(e=>!e.isDragging&&"transition: bottom 0.16s linear"),";",(e=>e.isDragAllowed?"cursor: grab":"cursor: pointer"),";"),ho=Object(dn.a)((()=>n.e(28).then(n.bind(null,1468)).then((e=>({default:e.DraggableContainer}))))),jo=e=>{let{children:t,shouldDrag:n,...i}=e;return n?Object(r.jsx)(a.Suspense,{fallback:null},Object(r.jsx)(ho,i,t)):Object(r.jsx)(o.a.Fragment,null,t)};var mo=n(908);const Io=e=>Object(P.g)(Object(D.b)(e)),Co=e=>Object(P.g)(Object(D.b)(e));var To=n(291),Eo=n(241),So=n(242);const xo=e=>Object(D.b)(e).meta.isTriggerManuallyHidden,_o=()=>{var e;(()=>{const e=Object(pt.a)(Ct.h),t=Object(A.a)(),n=R.a.getNoDisplayConfigFilter(t),{hasPassed:o}=Object(M.a)(n,{defaultValue:!1,logOnSuccess:!0}),i=Object(s.d)(Co);Object(a.useEffect)((()=>{!bt()(n)&&i&&(o&&Object(L.a)("Sprinklr Chat hidden by display criteria"),e({value:o}))}),[n,i,o])})();const t=Object(pt.a)(Ct.c),n=null===(e=Object(de.a)().trigger)||void 0===e?void 0:e.hideTimeout,o=Object(s.c)(),i=Object(a.useRef)(null),c=Object(a.useRef)(!n),r=Object(s.d)(xo),d=Object(s.d)(jt.h),l=Object(Eo.d)(d),u=Object(Zt.a)();c.current||(c.current=!0,Object(To.c)(l).then((e=>{e&&Date.now()<=e?i.current=window.setTimeout((()=>{o({type:So.p,payload:{}})}),e-Date.now()):o({type:So.p,payload:{}})})));const b=Object(a.useCallback)((async()=>{n&&(await Object(To.m)(l,Date.now()+n),i.current=window.setTimeout((()=>{o({type:So.p,payload:{}})}),n)),u({action:Xn.a.CHAT_TRIGGER_REMOVED}),t()}),[n,t,o,l]);return Object(a.useEffect)((()=>{r||(Object(To.j)(l),i.current&&(window.clearTimeout(i.current),i.current=null))}),[r]),b},Ao=e=>Object(P.g)(Object(D.b)(e)),wo=e=>Object(P.f)(Object(D.b)(e));var Mo=()=>{const e=Object(z.b)(),[t,n]=Object(a.useState)(!1),{triggerPosition:o,isDragAllowed:i,isDragging:c}=Object(zn.a)(),d=Object(nt.a)(),l=Object(s.d)(Ao),u=Object(s.d)(wo),b=_o(),p=Object(Zt.a)(),f=yt()(u),y=yt()(t);Object(a.useEffect)((()=>{(f||!y)&&!(u||!t)&&p({action:Xn.a.TRIGGER_VISIBLE})}),[t,y,u,f,p]);const{triggerHandlers:O,dragHandlers:{onDragStart:v,onDragStop:g}}=(e=>{const t=Object(z.b)(),n=Object(pt.a)(Ct.g),o=Object(s.d)(Io),i=Object(Zt.a)(),c=Object(a.useMemo)((()=>Ha(t)),[t]),r=Object(a.useCallback)((()=>{e||(n(!o),o&&i({action:Xn.a.CHAT_TRIGGER_CLICKED,...(null===c||void 0===c?void 0:c.length)>1?{additional:{triggerImageUrl:Va}}:{}}))}),[e,o,n]),{onDragStart:d,onDragStop:l,onTouchStart:u,onTouchMove:b,onTouchEnd:p,onTouchCancel:f}=Object(mo.a)(r);return Object(a.useMemo)((()=>({triggerHandlers:{onTouchStart:u,onTouchMove:b,onTouchEnd:p,onTouchCancel:f,onClick:r},dragHandlers:{onDragStart:d,onDragStop:l}})),[u,b,p,f,r,d,l])})(!!c),h=u||d&&!l,j=_n();return h?null:Object(r.jsx)(jo,{shouldDrag:j,onDragStart:v,onDragStop:g},Object(r.jsx)(go,{theme:e,shouldDrag:j,isDragAllowed:!!i,isDragging:!!c,triggerPosition:o},Object(r.jsx)(ao,{triggerHandlers:O,showTrigger:t,handleShowTriggerStateChange:n,hideChatTrigger:b}),Object(r.jsx)(yo,{isTriggerLoaded:t})))};var Ro=()=>{const e=Object(a.useRef)(null);return Object(r.jsx)(Un,null,Object(r.jsx)(jn,{chatBoxFrameRef:e}),Object(r.jsx)(Mo,null),Object(r.jsx)(Qn,{ref:e}),Object(r.jsx)(Pt,{parentFrameRef:e}),Object(r.jsx)(sn.c,{parentFrameRef:e}),Object(r.jsx)(lt,null))},Po=function(e){var t=Object(a.useRef)();return Object(a.useEffect)((function(){t.current=e})),t.current};var Do=function(e,t){var n=function(){var e=Object(a.useRef)(!0);return e.current?(e.current=!1,!0):e.current}();Object(a.useEffect)((function(){if(!n)return e()}),t)},No=n(721);const Lo={initPollerConnection:Gn.d,initPusherConnection:Gn.e},ko=e=>Object(On.z)(Object(On.u)(Object(D.c)(e)));var Uo=()=>{const e=Object(G.O)()?$n:Ro;return(()=>{var e;const t=null===(e=Object(A.a)().otherConfigs.settings)||void 0===e?void 0:e.delayInitializePoller,n=Object(No.a)().userId,{initPusherConnection:o,initPollerConnection:i}=Object(pt.a)(Lo),c=Object(s.d)(ko),r=Po(c);Do((()=>{o()}),[n]),Object(a.useEffect)((()=>{!r&&c&&(t?i():o())}),[c,r,o,i,t]),Object(a.useEffect)((()=>{t?o():i()}),[i,o])})(),Object(r.jsx)(H.b,null,Object(r.jsx)(Ne,null,Object(r.jsx)(Le.b,null,Object(r.jsx)(V,null,Object(r.jsx)(_e,null,Object(r.jsx)(S.b,null,Object(r.jsx)(o.a.Fragment,null,Object(r.jsx)(e,null))))))))},Bo=n(501);var Go=function(e){let{applicationConfig:t,store:n,history:o}=e;const i=Object(Te.b)(),c=Object(a.useMemo)((()=>Object(Bo.a)(i.document)),[i.document]),u=Object(a.useMemo)((()=>Object(Eo.d)(n.getState().usersMap)),[n]),b=Object(d.a)({category:"LIVE_CHAT",userId:u});return Object(r.jsx)(E,{logger:b},Object(r.jsx)(r.CacheProvider,{value:c},Object(r.jsx)(m.a,{window:i},Object(r.jsx)(s.a,{store:n},Object(r.jsx)(f.c.Provider,{value:t},Object(r.jsx)(g,null,Object(r.jsx)(l.b,null,Object(r.jsx)(O.a,null,Object(r.jsx)(C.b,null,Object(r.jsx)(p,{history:o},Object(r.jsx)(h.b,null,Object(r.jsx)(j.a,null,Object(r.jsx)(I.b,{history:o},Object(r.jsx)(y.a,null,Object(r.jsx)(Uo,null)))))))))))))))},$o=n(372),Fo=function(e){return"@@redux-saga/"+e},Vo=Fo("CANCEL_PROMISE"),Ho=Fo("CHANNEL_END"),Wo=Fo("IO"),zo=Fo("MATCH"),qo=Fo("MULTICAST"),Xo=Fo("SAGA_ACTION"),Ko=Fo("SELF_CANCELLATION"),Yo=Fo("TASK"),Qo=Fo("TASK_CANCEL"),Zo=Fo("TERMINATE"),Jo=Fo("LOCATION"),ei=n(426),ti=n(722),ni=function(e){return null===e||void 0===e},ai=function(e){return null!==e&&void 0!==e},oi=function(e){return"function"===typeof e},ii=function(e){return"string"===typeof e},ci=Array.isArray,ri=function(e){return e&&oi(e.then)},si=function(e){return e&&oi(e.next)&&oi(e.throw)},di=function e(t){return t&&(ii(t)||bi(t)||oi(t)||ci(t)&&t.every(e))},li=function(e){return e&&oi(e.take)&&oi(e.close)},ui=function(e){return oi(e)&&e.hasOwnProperty("toString")},bi=function(e){return Boolean(e)&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype};var pi=function(e,t){var n;void 0===t&&(t=!0);var a=new Promise((function(a){n=setTimeout(a,e,t)}));return a[Vo]=function(){clearTimeout(n)},a},fi=function(e){return function(){return e}}(!0),yi=function(){};var Oi=function(e){return e};"function"===typeof Symbol&&Symbol.asyncIterator&&Symbol.asyncIterator;var vi=function(e,t){Object(ei.a)(e,t),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(t).forEach((function(n){e[n]=t[n]}))};function gi(e,t){var n=e.indexOf(t);n>=0&&e.splice(n,1)}function hi(e){var t=!1;return function(){t||(t=!0,e())}}var ji=function(e){throw e},mi=function(e){return{value:e,done:!0}};function Ii(e,t,n){void 0===t&&(t=ji),void 0===n&&(n="iterator");var a={meta:{name:n},next:e,throw:t,return:mi,isSagaIterator:!0};return"undefined"!==typeof Symbol&&(a[Symbol.iterator]=function(){return a}),a}function Ci(e,t){var n=t.sagaStack;console.error(e),console.error(n)}var Ti=function(e){return Array.apply(null,new Array(e))},Ei=function(e){return function(t){return e(Object.defineProperty(t,Xo,{value:!0}))}},Si=function(e){return e===Zo},xi=function(e){return e===Qo},_i=function(e){return Si(e)||xi(e)};function Ai(e,t){var n=Object.keys(e),a=n.length;var o,i=0,c=ci(e)?Ti(a):{},r={};return n.forEach((function(e){var n=function(n,r){o||(r||_i(n)?(t.cancel(),t(n,r)):(c[e]=n,++i===a&&(o=!0,t(c))))};n.cancel=yi,r[e]=n})),t.cancel=function(){o||(o=!0,n.forEach((function(e){return r[e].cancel()})))},r}function wi(e){return{name:e.name||"anonymous",location:Mi(e)}}function Mi(e){return e[Jo]}var Ri={isEmpty:fi,put:yi,take:yi};function Pi(e,t){void 0===e&&(e=10);var n=new Array(e),a=0,o=0,i=0,c=function(t){n[o]=t,o=(o+1)%e,a++},r=function(){if(0!=a){var t=n[i];return n[i]=null,a--,i=(i+1)%e,t}},s=function(){for(var e=[];a;)e.push(r());return e};return{isEmpty:function(){return 0==a},put:function(r){var d;if(a<e)c(r);else switch(t){case 1:throw new Error("Channel's Buffer overflow!");case 3:n[o]=r,i=o=(o+1)%e;break;case 4:d=2*e,n=s(),a=n.length,o=n.length,i=0,n.length=d,e=d,c(r)}},take:r,flush:s}}var Di=function(){return Ri},Ni=function(e){return Pi(e,3)},Li=function(e){return Pi(e,4)},ki=Object.freeze({__proto__:null,none:Di,fixed:function(e){return Pi(e,1)},dropping:function(e){return Pi(e,2)},sliding:Ni,expanding:Li}),Ui="TAKE",Bi="PUT",Gi="ALL",$i="RACE",Fi="CALL",Vi="FORK",Hi="CANCEL",Wi="SELECT",zi="ACTION_CHANNEL",qi="CANCELLED",Xi=function(e,t){var n;return(n={})[Wo]=!0,n.combinator=!1,n.type=e,n.payload=t,n},Ki=function(e){return Xi(Vi,Object(ei.a)({},e.payload,{detached:!0}))};function Yi(e,t){return void 0===e&&(e="*"),di(e)?Xi(Ui,{pattern:e}):li(n=e)&&n[qo]&&ai(t)&&di(t)?Xi(Ui,{channel:e,pattern:t}):li(e)?Xi(Ui,{channel:e}):void 0;var n}function Qi(e,t){return ni(t)&&(t=e,e=void 0),Xi(Bi,{channel:e,action:t})}function Zi(e){var t=Xi(Gi,e);return t.combinator=!0,t}function Ji(e){var t=Xi($i,e);return t.combinator=!0,t}function ec(e,t){var n,a=null;return oi(e)?n=e:(ci(e)?(a=e[0],n=e[1]):(a=e.context,n=e.fn),a&&ii(n)&&oi(a[n])&&(n=a[n])),{context:a,fn:n,args:t}}function tc(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return Xi(Fi,ec(e,n))}function nc(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return Xi(Vi,ec(e,n))}function ac(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return Ki(nc.apply(void 0,[e].concat(n)))}function oc(e){return void 0===e&&(e=Ko),Xi(Hi,e)}function ic(e){void 0===e&&(e=Oi);for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return Xi(Wi,{selector:e,args:n})}function cc(e,t){return Xi(zi,{pattern:e,buffer:t})}var rc=tc.bind(null,pi);function sc(){var e={};return e.promise=new Promise((function(t,n){e.resolve=t,e.reject=n})),e}var dc=sc,lc=[],uc=0;function bc(e){try{yc(),e()}finally{Oc()}}function pc(e){lc.push(e),uc||(yc(),vc())}function fc(e){try{return yc(),e()}finally{vc()}}function yc(){uc++}function Oc(){uc--}function vc(){var e;for(Oc();!uc&&void 0!==(e=lc.shift());)bc(e)}var gc=function(e){return function(t){return e.some((function(e){return Cc(e)(t)}))}},hc=function(e){return function(t){return e(t)}},jc=function(e){return function(t){return t.type===String(e)}},mc=function(e){return function(t){return t.type===e}},Ic=function(){return fi};function Cc(e){var t="*"===e?Ic:ii(e)?jc:ci(e)?gc:ui(e)?jc:oi(e)?hc:bi(e)?mc:null;if(null===t)throw new Error("invalid pattern: "+e);return t(e)}var Tc={type:Ho},Ec=function(e){return e&&e.type===Ho};function Sc(e){void 0===e&&(e=Li());var t=!1,n=[];return{take:function(a){t&&e.isEmpty()?a(Tc):e.isEmpty()?(n.push(a),a.cancel=function(){gi(n,a)}):a(e.take())},put:function(a){if(!t){if(0===n.length)return e.put(a);n.shift()(a)}},flush:function(n){t&&e.isEmpty()?n(Tc):n(e.flush())},close:function(){if(!t){t=!0;var e=n;n=[];for(var a=0,o=e.length;a<o;a++){(0,e[a])(Tc)}}}}}function xc(e,t){void 0===t&&(t=Di());var n,a=!1,o=Sc(t),i=function(){a||(a=!0,oi(n)&&n(),o.close())};return n=hi(n=e((function(e){Ec(e)?i():o.put(e)}))),a&&n(),{take:o.take,flush:o.flush,close:i}}function _c(){var e=function(){var e,t=!1,n=[],a=n,o=function(){a===n&&(a=n.slice())},i=function(){t=!0;var e=n=a;a=[],e.forEach((function(e){e(Tc)}))};return(e={})[qo]=!0,e.put=function(e){if(!t)if(Ec(e))i();else for(var o=n=a,c=0,r=o.length;c<r;c++){var s=o[c];s[zo](e)&&(s.cancel(),s(e))}},e.take=function(e,n){void 0===n&&(n=Ic),t?e(Tc):(e[zo]=n,o(),a.push(e),e.cancel=hi((function(){o(),gi(a,e)})))},e.close=i,e}(),t=e.put;return e.put=function(e){e[Xo]?t(e):pc((function(){t(e)}))},e}function Ac(e,t){var n=e[Vo];oi(n)&&(t.cancel=n),e.then(t,(function(e){t(e,!0)}))}var wc,Mc=0,Rc=function(){return++Mc};function Pc(e){e.isRunning()&&e.cancel()}var Dc=((wc={}).TAKE=function(e,t,n){var a=t.channel,o=void 0===a?e.channel:a,i=t.pattern,c=t.maybe,r=function(e){e instanceof Error?n(e,!0):!Ec(e)||c?n(e):n(Zo)};try{o.take(r,ai(i)?Cc(i):null)}catch(s){return void n(s,!0)}n.cancel=r.cancel},wc.PUT=function(e,t,n){var a=t.channel,o=t.action,i=t.resolve;pc((function(){var t;try{t=(a?a.put:e.dispatch)(o)}catch(c){return void n(c,!0)}i&&ri(t)?Ac(t,n):n(t)}))},wc.ALL=function(e,t,n,a){var o=a.digestEffect,i=Mc,c=Object.keys(t);if(0!==c.length){var r=Ai(t,n);c.forEach((function(e){o(t[e],i,r[e],e)}))}else n(ci(t)?[]:{})},wc.RACE=function(e,t,n,a){var o=a.digestEffect,i=Mc,c=Object.keys(t),r=ci(t)?Ti(c.length):{},s={},d=!1;c.forEach((function(e){var t=function(t,a){d||(a||_i(t)?(n.cancel(),n(t,a)):(n.cancel(),d=!0,r[e]=t,n(r)))};t.cancel=yi,s[e]=t})),n.cancel=function(){d||(d=!0,c.forEach((function(e){return s[e].cancel()})))},c.forEach((function(e){d||o(t[e],i,s[e],e)}))},wc.CALL=function(e,t,n,a){var o=t.context,i=t.fn,c=t.args,r=a.task;try{var s=i.apply(o,c);if(ri(s))return void Ac(s,n);if(si(s))return void Vc(e,s,r.context,Mc,wi(i),!1,n);n(s)}catch(d){n(d,!0)}},wc.CPS=function(e,t,n){var a=t.context,o=t.fn,i=t.args;try{var c=function(e,t){ni(e)?n(t):n(e,!0)};o.apply(a,i.concat(c)),c.cancel&&(n.cancel=c.cancel)}catch(r){n(r,!0)}},wc.FORK=function(e,t,n,a){var o=t.context,i=t.fn,c=t.args,r=t.detached,s=a.task,d=function(e){var t=e.context,n=e.fn,a=e.args;try{var o=n.apply(t,a);if(si(o))return o;var i=!1;return Ii((function(e){return i?{value:e,done:!0}:(i=!0,{value:o,done:!ri(o)})}))}catch(c){return Ii((function(){throw c}))}}({context:o,fn:i,args:c}),l=function(e,t){return e.isSagaIterator?{name:e.meta.name}:wi(t)}(d,i);fc((function(){var t=Vc(e,d,s.context,Mc,l,r,void 0);r?n(t):t.isRunning()?(s.queue.addTask(t),n(t)):t.isAborted()?s.queue.abort(t.error()):n(t)}))},wc.JOIN=function(e,t,n,a){var o=a.task,i=function(e,t){if(e.isRunning()){var n={task:o,cb:t};t.cancel=function(){e.isRunning()&&gi(e.joiners,n)},e.joiners.push(n)}else e.isAborted()?t(e.error(),!0):t(e.result())};if(ci(t)){if(0===t.length)return void n([]);var c=Ai(t,n);t.forEach((function(e,t){i(e,c[t])}))}else i(t,n)},wc.CANCEL=function(e,t,n,a){var o=a.task;t===Ko?Pc(o):ci(t)?t.forEach(Pc):Pc(t),n()},wc.SELECT=function(e,t,n){var a=t.selector,o=t.args;try{n(a.apply(void 0,[e.getState()].concat(o)))}catch(i){n(i,!0)}},wc.ACTION_CHANNEL=function(e,t,n){var a=t.pattern,o=Sc(t.buffer),i=Cc(a),c=function t(n){Ec(n)||e.channel.take(t,i),o.put(n)},r=o.close;o.close=function(){c.cancel(),r()},e.channel.take(c,i),n(o)},wc.CANCELLED=function(e,t,n,a){n(a.task.isCancelled())},wc.FLUSH=function(e,t,n){t.flush(n)},wc.GET_CONTEXT=function(e,t,n,a){n(a.task.context[t])},wc.SET_CONTEXT=function(e,t,n,a){var o=a.task;vi(o.context,t),n()},wc);function Nc(e,t){return e+"?"+t}function Lc(e){var t=e.name,n=e.location;return n?t+"  "+Nc(n.fileName,n.lineNumber):t}function kc(e){var t=function(e,t){var n;return(n=[]).concat.apply(n,t.map(e))}((function(e){return e.cancelledTasks}),e);return t.length?["Tasks cancelled due to error:"].concat(t).join("\n"):""}var Uc=null,Bc=[],Gc=function(){Uc=null,Bc.length=0},$c=function(){var e=Bc[0],t=Bc.slice(1),n=e.crashedEffect?function(e){var t=Mi(e);return t?t.code+"  "+Nc(t.fileName,t.lineNumber):""}(e.crashedEffect):null;return["The above error occurred in task "+Lc(e.meta)+(n?" \n when executing effect "+n:"")].concat(t.map((function(e){return"    created by "+Lc(e.meta)})),[kc(Bc)]).join("\n")};function Fc(e,t,n,a,o,i,c){var r;void 0===c&&(c=yi);var s,d,l=0,u=null,b=[],p=Object.create(n),f=function(e,t,n){var a,o=[],i=!1;function c(e){t(),s(),n(e,!0)}function r(t){o.push(t),t.cont=function(r,s){i||(gi(o,t),t.cont=yi,s?c(r):(t===e&&(a=r),o.length||(i=!0,n(a))))}}function s(){i||(i=!0,o.forEach((function(e){e.cont=yi,e.cancel()})),o=[])}return r(e),{addTask:r,cancelAll:s,abort:c,getTasks:function(){return o}}}(t,(function(){b.push.apply(b,f.getTasks().map((function(e){return e.meta.name})))}),y);function y(t,n){if(n){if(l=2,(i={meta:o,cancelledTasks:b}).crashedEffect=Uc,Bc.push(i),O.isRoot){var a=$c();Gc(),e.onError(t,{sagaStack:a})}d=t,u&&u.reject(t)}else t===Qo?l=1:1!==l&&(l=3),s=t,u&&u.resolve(t);var i;O.cont(t,n),O.joiners.forEach((function(e){e.cb(t,n)})),O.joiners=null}var O=((r={})[Yo]=!0,r.id=a,r.meta=o,r.isRoot=i,r.context=p,r.joiners=[],r.queue=f,r.cancel=function(){0===l&&(l=1,f.cancelAll(),y(Qo,!1))},r.cont=c,r.end=y,r.setContext=function(e){vi(p,e)},r.toPromise=function(){return u||(u=dc(),2===l?u.reject(d):0!==l&&u.resolve(s)),u.promise},r.isRunning=function(){return 0===l},r.isCancelled=function(){return 1===l||0===l&&1===t.status},r.isAborted=function(){return 2===l},r.result=function(){return s},r.error=function(){return d},r);return O}function Vc(e,t,n,a,o,i,c){var r=e.finalizeRunEffect((function(t,n,a){if(ri(t))Ac(t,a);else if(si(t))Vc(e,t,d.context,n,o,!1,a);else if(t&&t[Wo]){(0,Dc[t.type])(e,t.payload,a,l)}else a(t)}));u.cancel=yi;var s={meta:o,cancel:function(){0===s.status&&(s.status=1,u(Qo))},status:0},d=Fc(e,s,n,a,o,i,c),l={task:d,digestEffect:b};return c&&(c.cancel=d.cancel),u(),d;function u(e,n){try{var o;n?(o=t.throw(e),Gc()):xi(e)?(s.status=1,u.cancel(),o=oi(t.return)?t.return(Qo):{done:!0,value:Qo}):o=Si(e)?oi(t.return)?t.return():{done:!0}:t.next(e),o.done?(1!==s.status&&(s.status=3),s.cont(o.value)):b(o.value,a,u)}catch(i){if(1===s.status)throw i;s.status=2,s.cont(i,!0)}}function b(t,n,a,o){void 0===o&&(o="");var i,c=Rc();function s(n,o){i||(i=!0,a.cancel=yi,e.sagaMonitor&&(o?e.sagaMonitor.effectRejected(c,n):e.sagaMonitor.effectResolved(c,n)),o&&function(e){Uc=e}(t),a(n,o))}e.sagaMonitor&&e.sagaMonitor.effectTriggered({effectId:c,parentEffectId:n,label:o,effect:t}),s.cancel=yi,a.cancel=function(){i||(i=!0,s.cancel(),s.cancel=yi,e.sagaMonitor&&e.sagaMonitor.effectCancelled(c))},r(t,c,s)}}function Hc(e,t){var n=e.channel,a=void 0===n?_c():n,o=e.dispatch,i=e.getState,c=e.context,r=void 0===c?{}:c,s=e.sagaMonitor,d=e.effectMiddlewares,l=e.onError,u=void 0===l?Ci:l;for(var b=arguments.length,p=new Array(b>2?b-2:0),f=2;f<b;f++)p[f-2]=arguments[f];var y=t.apply(void 0,p);var O,v=Rc();if(s&&(s.rootSagaStarted=s.rootSagaStarted||yi,s.effectTriggered=s.effectTriggered||yi,s.effectResolved=s.effectResolved||yi,s.effectRejected=s.effectRejected||yi,s.effectCancelled=s.effectCancelled||yi,s.actionDispatched=s.actionDispatched||yi,s.rootSagaStarted({effectId:v,saga:t,args:p})),d){var g=$o.d.apply(void 0,d);O=function(e){return function(t,n,a){return g((function(t){return e(t,n,a)}))(t)}}}else O=Oi;var h={channel:a,dispatch:Ei(o),getState:i,sagaMonitor:s,onError:u,finalizeRunEffect:O};return fc((function(){var e=Vc(h,y,r,v,wi(t),!0,void 0);return s&&s.effectResolved(v,e),e}))}var Wc=function(e){var t,n=void 0===e?{}:e,a=n.context,o=void 0===a?{}:a,i=n.channel,c=void 0===i?_c():i,r=n.sagaMonitor,s=Object(ti.a)(n,["context","channel","sagaMonitor"]);function d(e){var n=e.getState,a=e.dispatch;return t=Hc.bind(null,Object(ei.a)({},s,{context:o,channel:c,dispatch:a,getState:n,sagaMonitor:r})),function(e){return function(t){r&&r.actionDispatched&&r.actionDispatched(t);var n=e(t);return c.put(t),n}}}return d.run=function(){return t.apply(void 0,arguments)},d.setContext=function(e){vi(o,e)},d},zc=Wc,qc=n(357),Xc=n.n(qc),Kc=n(392),Yc=n(263);class Qc{constructor(){this.data={}}setReducer(e){return this.data.reducer=e,this}setSaga(e){return this.data.saga=e,this}setPreloadedState(e){return this.data.preloadedState=e,this}setHTTPClient(e){return this.data.httpClient=e,this}setApplicationConfig(e){return e&&(this.data.applicationConfig=e),this}setHandshakeDetails(e){return e&&(this.data.handshakeDetails=e),this}setChatSettings(e){return e&&(this.data.chatSettings=e),this}build(){const{applicationConfig:e,handshakeDetails:t,chatSettings:n,httpClient:a,reducer:o,preloadedState:i,saga:c}=this.data,r=n.clientContext;Xc()(a,"HTTP Client is not configured"),Object(Kc.b)(a),Xc()(o,"Reducer is not configured");const s=[];const d=zc();s.push(d);const l=Object($o.e)(o,i,Object($o.a)(...s));c&&d.run(c);const u={payload:{applicationConfig:e,handshakeDetails:t,clientContext:r},type:Yc.a};return l.dispatch(u),this.data.store=l,l}}var Zc=function(e){return{done:!0,value:e}},Jc={};function er(e){return li(e)?"channel":ui(e)?String(e):oi(e)?e.name:String(e)}function tr(e,t,n){var a,o,i,c=t;function r(t,n){if(c===Jc)return Zc(t);if(n&&!o)throw c=Jc,n;a&&a(t);var r=n?e[o](n):e[c]();return c=r.nextState,i=r.effect,a=r.stateUpdater,o=r.errorState,c===Jc?Zc(t):i}return Ii(r,(function(e){return r(null,e)}),n)}function nr(e,t){for(var n=arguments.length,a=new Array(n>2?n-2:0),o=2;o<n;o++)a[o-2]=arguments[o];var i,c={done:!1,value:Yi(e)},r=function(e){return{done:!1,value:nc.apply(void 0,[t].concat(a,[e]))}},s=function(e){return i=e};return tr({q1:function(){return{nextState:"q2",effect:c,stateUpdater:s}},q2:function(){return{nextState:"q1",effect:r(i)}}},"q1","takeEvery("+er(e)+", "+t.name+")")}function ar(e,t){for(var n=arguments.length,a=new Array(n>2?n-2:0),o=2;o<n;o++)a[o-2]=arguments[o];var i,c,r={done:!1,value:Yi(e)},s=function(e){return{done:!1,value:nc.apply(void 0,[t].concat(a,[e]))}},d=function(e){return{done:!1,value:oc(e)}},l=function(e){return i=e},u=function(e){return c=e};return tr({q1:function(){return{nextState:"q2",effect:r,stateUpdater:u}},q2:function(){return i?{nextState:"q3",effect:d(i)}:{nextState:"q1",effect:s(c),stateUpdater:l}},q3:function(){return{nextState:"q1",effect:s(c),stateUpdater:l}}},"q1","takeLatest("+er(e)+", "+t.name+")")}function or(e,t){for(var n=arguments.length,a=new Array(n>2?n-2:0),o=2;o<n;o++)a[o-2]=arguments[o];var i,c={done:!1,value:Yi(e)},r=function(e){return{done:!1,value:tc.apply(void 0,[t].concat(a,[e]))}},s=function(e){return i=e};return tr({q1:function(){return{nextState:"q2",effect:c,stateUpdater:s}},q2:function(){return{nextState:"q1",effect:r(i)}}},"q1","takeLeading("+er(e)+", "+t.name+")")}function ir(e,t){for(var n=arguments.length,a=new Array(n>2?n-2:0),o=2;o<n;o++)a[o-2]=arguments[o];return nc.apply(void 0,[nr,e,t].concat(a))}var cr=n(199),rr=n(278),sr=n(302);function dr(e){return e.type===sr.q||e.type===sr.v}function*lr(e){try{yield Zi(e.filter(dr).map((e=>Qi(e))))}catch(t){Object(cr.b)(t)}}function*ur(e){try{const{events:t}=e.payload;yield tc(lr,t)}catch(t){Object(cr.b)(t)}}function*br(){try{yield ir(rr.j,ur)}catch(e){Object(cr.b)(e)}}function*pr(e){try{yield rc(e),yield Qi(Object(Gn.h)())}catch(t){Object(cr.b)(t)}}function*fr(){let e;const t=yield cc([sr.q,sr.v]);for(;;)try{const n=yield Yi(t);e&&!e.isCancelled()&&(yield oc(e)),n.type===sr.q&&(e=yield nc(pr,n.payload.waitTime),yield Qi(Object(Gn.f)({waitTime:n.payload.waitTime,reason:n.payload.reason}))),n.type===sr.v&&(yield Qi(Object(Gn.h)()))}catch(n){Object(cr.b)(n)}}function*yr(){try{yield Zi([nc(fr)])}catch(e){Object(cr.b)(e)}}function*Or(){try{yield Zi([nc(br),nc(yr)])}catch(e){Object(cr.b)(e)}}var vr=n(281),gr=n.n(vr),hr=n(50),jr=n.n(hr),mr=n(339),Ir=n.n(mr),Cr=n(703),Tr=n.n(Cr),Er=n(689),Sr=n.n(Er),xr=n(243),_r=n(221),Ar=n(232),wr=n(285),Mr=n(286),Rr=n(461),Pr=n(247);function*Dr(e){let{chatMessage:t,conversationId:n,transientId:a,postbackParentMessageId:o,error:i}=e;try{yield Qi({type:xr.L,payload:{chatMessage:new Ar.a(t).setCreationTime(Date.now()).build(),conversationId:Ar.a.getConversationId(t)}}),yield Qi({payload:{conversationId:n,transientId:a,postbackParentMessageId:o,error:i},type:xr.I})}catch(c){Object(cr.b)(c)}}function*Nr(e){try{Object(Mr.l)(e)&&(yield Qi(Object(Pr.p)(e)))}catch(t){Object(cr.b)(t)}}function Lr(e){return Object(_r.__awaiter)(this,void 0,void 0,(function*(){let t=e;Object(Mr.k)(e)||(t=Y()(e,"id"));return yield Object(Rr.t)(t)}))}function*kr(e){try{return yield tc(Lr,e)}catch(t){return void Object(cr.b)(t)}}function*Ur(e){try{const n=e.id,a=Ar.a.getConversationId(e);let o;const i=st()(wr.a.getAttachment(Ar.a.getMessagePayload(e)),"messageId");try{o=yield tc(Lr,e)}catch(t){throw yield tc(Dr,{chatMessage:e,conversationId:a,transientId:n,postbackParentMessageId:i,error:{status:1}}),t}Object(Mr.l)(o)&&(yield Qi({payload:{chatMessage:o,conversationId:a,transientId:n},type:xr.J}))}catch(n){Object(cr.b)(n)}}var Br=n(1066);var Gr=()=>Object(_r.__awaiter)(void 0,void 0,void 0,(function*(){return(yield Object(Br.a)()).default}));function*$r(e){try{const t=(yield Gr()).makeTextMessage(e.payload);yield tc(Nr,t),yield tc(Ur,t)}catch(t){Object(cr.b)(t)}}function*Fr(){try{yield ir(xr.cb,$r)}catch(e){Object(cr.b)(e)}}function*Vr(e){try{const t=(yield Gr()).makeLocationAttachmentMessage(e.payload);yield tc(Nr,t),yield tc(Ur,t)}catch(t){Object(cr.b)(t)}}function*Hr(){try{yield ir(xr.E,Vr)}catch(e){Object(cr.b)(e)}}var Wr=n(208);const zr=(e,t)=>{const n=wr.a.getAttachment(Ar.a.getMessagePayload(e));return gr()(e,{messagePayload:{attachment:{$merge:Object.assign(Object.assign({},n.showSubmittedContent?{clickedButtonId:t.buttonId}:{}),{submitted:!n.reSubmittable})}}})},qr=(e,t)=>{const n=wr.a.getAttachment(Ar.a.getMessagePayload(e));return gr()(e,{messagePayload:{attachment:{$merge:Object.assign(Object.assign({},n.showSubmittedContent?{filledForm:t.filledForm}:{}),{submitted:!0})}}})},Xr={[Wr.c.CARD]:zr,[Wr.c.CAROUSEL]:zr,[Wr.c.CO_BROWSE_INVITE]:zr,[Wr.c.PRODUCT_CARD]:zr,[Wr.c.PRODUCT_SHOWCASE_CARD]:zr,[Wr.c.INFO_CARD]:zr,[Wr.c.PRODUCT_BANNER]:zr,[Wr.c.PRODUCT_LIST]:zr,[Wr.c.FORM]:qr,[Wr.c.CONTACT_DETAILS_FORM]:qr,[Wr.c.SECURE_FORM]:qr,[Wr.c.APPOINTMENT]:(e,t)=>gr()(e,{messagePayload:{attachment:{$merge:{selectedDate:t.selectedDate,selectedSlot:t.selectedSlot,submitted:!0}}}}),[Wr.c.SURVEY]:(e,t)=>gr()(e,{messagePayload:{attachment:{$merge:{opened:!!t.opened,submitted:!!t.submitted}}}}),[Wr.c.VIDEO_CHAT]:(e,t)=>{var n;return(null===(n=null===e||void 0===e?void 0:e.messagePayload)||void 0===n?void 0:n.attachment)?gr()(e,{messagePayload:{attachment:{currentState:{$merge:{state:t.state,createdTime:Date.now()}},previousStates:{$push:[e.messagePayload.attachment.currentState]}}}}):e},[Wr.c.RICH_TEXT_CAROUSEL]:zr,[Wr.c.SURVEY_QUESTION]:(e,t)=>{const n=wr.a.getAttachment(Ar.a.getMessagePayload(e));return gr()(e,{messagePayload:{attachment:{$merge:Object.assign(Object.assign({},n.showSubmittedContent?{response:t.response}:{}),{submitted:!0})}}})}},Kr=(e,t)=>{var n,a;if(!e||!(null===t||void 0===t?void 0:t.messagePayload))return{};switch(null===(a=null===(n=e.messagePayload)||void 0===n?void 0:n.attachment)||void 0===a?void 0:a.type){case Wr.c.CAROUSEL:case Wr.c.CO_BROWSE_INVITE:case Wr.c.PRODUCT_CARD:case Wr.c.PRODUCT_SHOWCASE_CARD:case Wr.c.INFO_CARD:case Wr.c.PRODUCT_BANNER:case Wr.c.PRODUCT_LIST:case Wr.c.CARD:return{buttonId:t.messagePayload.attachment.buttonId};case Wr.c.SURVEY:return{submitted:!t.messagePayload.attachment.reSubmittable,opened:!0};case Wr.c.SECURE_FORM:case Wr.c.FORM:case Wr.c.CONTACT_DETAILS_FORM:return{filledForm:t.messagePayload.attachment.filledForm};case Wr.c.APPOINTMENT:{const e=t.messagePayload.attachment;return{selectedDate:e.selectedDate,selectedSlot:e.selectedSlot}}case Wr.c.SURVEY_QUESTION:return{response:t.messagePayload.attachment.response};default:return{}}};function*Yr(e){let{chatMessage:t,conversationId:n,params:a}=e;var o,i;try{const e=null===(i=null===(o=null===t||void 0===t?void 0:t.messagePayload)||void 0===o?void 0:o.attachment)||void 0===i?void 0:i.type;if(!e)return null;const c=Xr[e];if(c){const e=c(t,a);return yield Qi({type:xr.L,payload:{chatMessage:e,conversationId:n}}),e}}catch(c){Object(cr.b)(c)}return null}function*Qr(e){const{postback:{messageId:t},conversationId:n}=e.payload;let a,o;try{const i=yield ic(jt.c);o=Object(On.n)(Object(On.p)(i,n),t);const c=(yield Gr()).makeTemplatePostbackAttachmentMessage(e.payload);a=yield tc(Yr,{chatMessage:o,conversationId:n,params:Kr(o,c)}),c&&(yield tc(Nr,c),yield tc(Ur,c),e.promise.resolve())}catch(i){a&&(yield Qi({type:xr.L,payload:{chatMessage:o,conversationId:n}})),e.promise.reject(),Object(cr.b)(i)}}function*Zr(){try{yield ir(xr.bb,Qr)}catch(e){Object(cr.b)(e)}}function*Jr(e){try{const t=(yield Gr()).makeQuickReplyPostbackAttachmentMessage(e.payload);t&&(yield tc(Nr,t),yield tc(Ur,t))}catch(t){Object(cr.b)(t)}}function*es(){try{yield ir(xr.U,Jr)}catch(e){Object(cr.b)(e)}}var ts=n(290),ns=n.n(ts),as=n(252),os=n(316),is=n(425),cs=n(274);const rs=e=>({userId:e,email:"",firstName:"",userType:"PARTNER",phoneNo:"",profileImageUrl:"",locale:"en",agentPersonaDetail:{name:"BRAND_DISPLAY_NAME",image:"BRAND_DISPLAY_IMAGE"}});function*ss(e){try{const t=we()(e,(e=>e.sender)),n=yield tc(is.c,e),a=we()(n,(e=>cs.a.getId(e)));let o=[];jr()(t,(e=>{!a.includes(e)&&Object(as.c)(e)&&(o=[...o,rs(e)])})),yield Qi({type:os.h,payload:{users:[...n,...o]}})}catch(t){Object(cr.b)(t)}}function*ds(e){try{const t=ns()(e);if(0===t.length)return;const n=((e,t)=>{const n={};return Z()(t,((t,a)=>{const o=a.sender;return n[o]||!!Object(Eo.g)(e,o)||(n[o]=o,t.push(a)),t}),[])})(yield ic(jt.h),t);if(0===n.length)return;yield tc(ss,n)}catch(t){Object(cr.b)(t)}}function*ls(e){try{yield tc(ss,ns()(e))}catch(t){Object(cr.b)(t)}}const us="/co-browse/conversation",bs=e=>{let{messageId:t,markCompletedSession:n}=e;return Object(_r.__awaiter)(void 0,void 0,void 0,(function*(){return(yield Kc.a.post(`${us}/${n?"completed":"cancelled"}?messageId=${t}`)).data}))},ps=e=>{let{messageId:t,actionPayload:n}=e;return Object(_r.__awaiter)(void 0,void 0,void 0,(function*(){return(yield Kc.a.post(`${us}/push?messageId=${t}`,{type:"CO_BROWSE",payload:n})).data}))},fs=e=>{let{messageId:t,payload:n}=e;return Object(_r.__awaiter)(void 0,void 0,void 0,(function*(){return(yield Kc.a.post(`${us}/push/status?messageId=${t}`,n)).data}))},ys=e=>{let{messageId:t,otp:n,additionalInfo:a}=e;return Object(_r.__awaiter)(void 0,void 0,void 0,(function*(){return fs({messageId:t,payload:{status:"SUCCESS",otp:n,additionalInfo:a}})}))},Os=e=>{let{messageId:t,reason:n}=e;return Object(_r.__awaiter)(void 0,void 0,void 0,(function*(){return fs({messageId:t,payload:{status:"FAILED",reason:n}})}))},vs=e=>{let{messageId:t,payload:n}=e;return Kc.a.post(`${us}/event?messageId=${t}`,n)},gs=e=>{let{messageId:t}=e;return Object(_r.__awaiter)(void 0,void 0,void 0,(function*(){return(yield Kc.a.post(`${us}/session/live?messageId=${t}`)).data}))};var hs=n(430),js=n(607),ms=n(910),Is=n(318);function*Cs(e){try{const{messageId:t}=yield ic(jt.f);yield tc(ps,{messageId:t,actionPayload:e.payload})}catch(t){Object(cr.b)(t)}}function*Ts(e){const{messageId:t,conversationId:n,agentId:a,type:o}=yield ic(jt.f);try{const{otp:o,additionalInfo:i}=e.payload;yield tc(ys,{messageId:t,otp:o,additionalInfo:i}),yield Qi(Object(hs.k)({state:{messageId:t,conversationId:n,agentId:a}}))}catch(i){try{yield Qi(Object(hs.f)({reason:ms.a.OTP_SEND_FAILED,type:o})),yield tc(Os,{messageId:t,reason:ms.a.OTP_SEND_FAILED})}catch(c){Object(cr.b)(i)}}}function*Es(e){try{const{messageId:t,reason:n,type:a}=e.payload;yield Qi(Object(hs.f)({reason:n,type:a})),yield tc(Os,{messageId:t,reason:n})}catch(t){Object(cr.b)(t)}}function*Ss(e){let{messageId:t}=e;try{const[e,n]=yield Ji([Yi((e=>{let{type:n,payload:a}=e;return n===xr.J&&st()(a,"chatMessage.messagePayload.attachment.messageId")===t})),Yi((e=>{let{type:n,payload:a}=e;return n===xr.I&&st()(a,"postbackParentMessageId")===t})),Yi(js.h),Yi(js.i)]);e&&(yield Qi(Object(hs.s)())),n&&(yield Qi(Object(hs.f)({reason:ms.a.POSTBACK_SEND_FAILED,type:Is.a.REQUEST})))}catch(n){Object(cr.b)(n)}}function*xs(e){try{const{messageId:t}=yield ic(jt.f);yield tc(vs,{messageId:t,payload:e.payload})}catch(t){Object(cr.b)(t)}}function*_s(e){try{const{messageId:t,endedByAgent:n,markCompletedSession:a}=e.payload;if(n||!t)return;return void(yield tc(bs,{messageId:t,markCompletedSession:a}))}catch(t){Object(cr.b)(t)}}function*As(e){try{const{mode:t}=e.payload;yield Qi(Object(hs.b)(e.payload)),yield Qi(Object(hs.l)({type:t,payload:{status:"ACCEPT"}}))}catch(t){Object(cr.b)(t)}}function*ws(e){try{const{settings:{skipUserPermissionForRemoteControl:t}={}}=e.payload;t&&(yield Qi(Object(hs.k)({state:{skipUserPermissionForRemoteControl:t}})))}catch(t){Object(cr.b)(t)}}function*Ms(e){try{const{mode:t}=e.payload;yield Qi(Object(hs.l)({type:t,payload:{status:"REJECT"}}))}catch(t){Object(cr.b)(t)}}function*Rs(e){try{const{mode:t,shouldNotifyAgent:n}=e.payload;n&&(yield Qi(Object(hs.l)({type:t,payload:{status:"STOP"}})))}catch(t){Object(cr.b)(t)}}function*Ps(e){const{messageId:t,conversationId:n,agentId:a,type:o}=e.payload.state;try{const[i]=yield Zi([tc(gs,{messageId:t}),tc(ds,{sender:a,conversationId:n})]);i?yield Qi(Object(hs.r)(e.payload)):yield Qi(Object(hs.f)({reason:ms.a.RESUME_SESSION_FAILED,type:o}))}catch(i){yield Qi(Object(hs.g)({messageId:t,reason:ms.a.RESUME_SESSION_FAILED,type:o})),Object(cr.b)(i)}}function*Ds(e){try{e.payload.type===Is.a.AGENT_PRESENT&&(yield Qi(Object(hs.k)({state:e.payload})))}catch(t){Object(cr.b)(t)}}function*Ns(e){var t,n;try{const{conversationId:n,messageId:a,url:o}=e.payload,i=yield ic(jt.c),c=Object(On.n)(Object(On.p)(i,n),a);yield Qi(Object(hs.e)({messageId:a,conversationId:n,agentId:c.sender,agentPresentUrl:o,type:Is.a.AGENT_PRESENT})),yield tc(Yr,{chatMessage:c,conversationId:n,params:{}}),null===(t=e.promise)||void 0===t||t.resolve()}catch(a){null===(n=e.promise)||void 0===n||n.reject(),Object(cr.b)(a)}}function*Ls(){try{yield Zi([ir(js.p,Ts),ir(js.q,Es),ir(js.h,_s),ir(js.a,As),ir(js.e,Ms),ir(js.c,Rs),ir(js.b,ws),ir(js.f,Cs),ir(js.l,Ps),ir(js.g,xs),ir(js.j,Ds),ir(js.s,Ns)])}catch(e){Object(cr.b)(e)}}var ks=n(423);function*Us(e){const t=e?ns()(e):ks.a;if(0===t.length)return;const n=Ar.a.getConversationId(t[0]),a=we()(t,(e=>({sender:Ar.a.getSender(e),conversationId:n})));yield tc(ds,a)}var Bs=n(532),Gs=n(415),$s=n(299),Fs=n(374),Vs=n(49);let Hs={};function*Ws(e){try{const n=e.payload.conversationId;if(Hs[n]){for(;;){const[t,a]=yield Ji([Yi(xr.O),Yi(xr.P)]);if(st()(t||a,"payload.transientConversationId")===n){e.promise&&(t&&e.promise.resolve({conversationId:t.payload.conversationResponse.id,caseNumber:t.payload.conversationResponse.caseNumber}),a&&e.promise.reject(Object(Bs.a)(a.payload.error)));break}}return}try{Hs[n]=!0;const t=yield ic(jt.c),a=yield ic(jt.d),o=pn()(a),i=Object(On.p)(t,n),c=Object(On.u)(t),r=Object(On.k)(c,n),s=st()(Object(On.j)(c,n),"assignToUser"),d=Object(On.C)(i),l=Object(On.i)(Object(On.u)(t),n)||{},u=l.clickedOnPrompt,b=yield tc(Rr.o,Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},d?{chatMessages:Object(On.o)(i).map((e=>({messagePayload:Ar.a.getMessagePayload(e),sender:Ar.a.getSender(e)})))}:void 0),{createCase:Object(On.G)(Object(On.u)(t),n),startedByContext:r}),l),e.payload.appContext),!u&&o?{creativeId:o.additional.creativeId,interceptId:o.additional.interceptId,clickedOnPrompt:!1}:{}),{assignToUser:s})),p=yield ic(jt.h),f=Object(Eo.b)(p),y=Object(Eo.d)(p);yield Qi({payload:{transientConversationId:n,conversationResponse:b,botUserIds:f,userId:y},type:xr.O}),e.promise&&e.promise.resolve({conversationId:b.id,caseNumber:b.caseNumber})}catch(t){yield Qi({type:xr.P,payload:{transientConversationId:e.payload.conversationId,error:t}}),e.promise&&e.promise.reject(Object(Bs.a)(t)),Object(cr.b)(t)}finally{delete Hs[e.payload.conversationId]}}catch(n){}}function*zs(e){try{const t=Ir()(ns()(eo.a.getDefaultMessages(R.a.getCustomizationConfig(e)))),n=Ir()(t.map(((e,t)=>Object(Bs.c)(e,Vs.g,`${Vs.f}${t}`))));if(n.length){const e=yield ic(jt.h),t=n.map((t=>{const n=Object(Gs.e)(e,Ar.a.getSender(t));return Qi(Object($s.g)(t,n))}));yield Zi(t)}return n}catch(t){Object(cr.b)(t)}}function*qs(e,t){try{const n=eo.a.getContactDetailsMessage(R.a.getCustomizationConfig(e)),a=[];if(n&&Object(Bs.e)(n,Fs.a.getChatUser(t))){const e=Object(Bs.c)(n,Vs.g,Vs.e),t=yield ic(jt.h),o=Object(Gs.e)(t,Ar.a.getSender(e));a.push(e),yield Qi(Object($s.g)(e,o))}return a}catch(n){Object(cr.b)(n)}}function*Xs(e,t){try{const n=yield tc(zs,e),a=yield tc(qs,e,t);return[...n,...a]}catch(n){Object(cr.b)(n)}}function Ks(){Hs={}}function*Ys(){try{const t=st()(Object(Eo.c)(yield ic(jt.h)),"userId");for(;;)try{const e=yield ic(jt.c),n=Object(On.p)(e,Vs.g),a=Object(On.n)(n,Vs.e);if(!a)break;const{payload:{users:o}}=yield Yi(os.h),i=o.find((e=>e.userId===t));i&&!Object(Bs.e)(a,i)&&(yield Qi(Object($s.h)(Vs.g,Vs.e)))}catch(e){Object(cr.b)(e)}}catch(e){Object(cr.b)(e)}}function*Qs(){try{yield ir(Yc.c,Ks)}catch(e){Object(cr.b)(e)}}function*Zs(){try{yield ir(xr.N,Ws)}catch(e){Object(cr.b)(e)}}function*Js(){try{const{payload:{applicationConfig:e,handshakeDetails:t}}=yield Yi(Yc.a);yield tc(Xs,e,null!==t&&void 0!==t?t:pe.a),yield Zi([nc(Ys),nc(Zs),nc(Qs)])}catch(e){Object(cr.b)(e)}}var ed=n(394);function*td(e){try{const{payload:t}=e,{actionParams:n}=t;n.actionType===ed.a&&(yield Qi(Object($s.i)({conversationId:t.conversationId,action:{attachment:n.attachment,values:n.values,actionId:n.actionId}})))}catch(t){Object(cr.b)(t)}}function*nd(e){try{const{payload:t}=e,{actionParams:n}=t;n.actionType===ed.b&&(yield Qi(Object($s.j)({conversationId:t.conversationId,action:{attachment:n.attachment,values:n.values,actionId:n.actionId}})))}catch(t){Object(cr.b)(t)}}function*ad(e){try{yield Zi([tc(td,e),tc(nd,e)])}catch(t){Object(cr.b)(t)}}function*od(e){try{const{payload:t}=e,{actionParams:n}=t;let a=Tn.a;new Promise(((e,t)=>{const n=setTimeout((()=>t(new Error("Timeout"))),6e4);a=(a,o)=>(clearTimeout(n),o?t(o):e(a))})).then((t=>{const n=gr()(e,{payload:{actionParams:{values:{$merge:t}}}});e.promise.resolve(n)})).catch((t=>e.promise.reject(t)));yield Qi(Object($s.k)({conversationId:t.conversationId,action:{attachment:n.attachment,values:n.values,actionId:n.actionId},callback:a}))}catch(t){e.promise.reject(t),Object(cr.b)(t)}}function*id(e){const{messageId:t,conversationId:n}=e.payload,a=yield ic(jt.c),o=Object(On.n)(Object(On.p)(a,n),t);let i;try{i=yield tc(Yr,{chatMessage:o,conversationId:n,params:{opened:!0}}),yield tc(Rr.r,t)}catch(c){i&&(yield Qi({type:xr.L,payload:{chatMessage:o,conversationId:n}})),Object(cr.b)(c)}}function*cd(e){try{const{attachment:t}=e.payload;return void(st()(t,"opened")||(yield tc(id,e)))}catch(t){Object(cr.b)(t)}}function*rd(){try{yield ir(xr.Y,cd)}catch(e){Object(cr.b)(e)}}var sd=n(333),dd=n(535),ld=n(330),ud=n(875),bd=n(724),pd=n(454),fd=n(837),yd=n(496),Od=n(317),vd=n(328);function gd(e){return Object(_r.__awaiter)(this,void 0,void 0,(function*(){return Kc.a.post("/livechat/event/publish",Object.assign({type:e.type},e.payload))}))}var hd=n(452),jd=n(449);const md={VIDEO_CHAT:It.c.VIDEO,AUDIO_CHAT:It.c.AUDIO},Id=e=>Object(Od.e)(Object(jt.e)(e));function Cd(e){return e===ed.a||e===ed.b}function Td(e){return e===ed.c}function Ed(e){return e===dd.a.OPEN_URL}function Sd(e){return e===dd.a.OPEN_AGENT_PRESENT_URL}function xd(e){return e===dd.a.DIAL}function _d(e){return e===dd.a.FETCH_APPOINTMENT_TIME_SLOTS}function Ad(e){return e===dd.a.RESERVE_APPOINTMENT_TIME_SLOT}function wd(e){return e===dd.a.VIDEO_CALL}function Md(e){return e===dd.a.AUDIO_CALL}function Rd(e){return e===dd.a.REJOIN_CALL}function Pd(e){return e===dd.a.ACCOUNT_LINK}function*Dd(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3;try{if(!(yield ic(Id)))for(;;){const{payload:e}=yield Yi(rr.d);if(e.status===hd.a.CONNECTED)break}return yield tc(e,t)}catch(a){if(Object(vd.c)(a)&&n>1)return yield tc(Dd,e,t,n-1);throw a}}function Nd(e,t){return ud.a.makeMessage({messageId:e.id,messagePayload:Ar.a.getMessagePayload(e),conversationId:t,sender:Ar.a.getSender(e),creationTime:Ar.a.getCreationTime(e),clientMessageId:Ar.a.getClientMessageId(e),deleted:Ar.a.getDeleted(e)})}function*Ld(e){try{const{payload:t}=e,{conversationId:n,cursor:a}=t,o=yield tc(Rr.g,n,{size:t.size,cursor:a}),i=Ir()(o.results.map((e=>Nd(e,n))));yield tc(Us,i),yield Qi({payload:{conversationMessagesResponse:Object.assign(Object.assign({},o),{results:i}),conversationId:n,cursor:a},type:xr.m}),e.promise&&e.promise.resolve()}catch(t){e.promise&&e.promise.reject(),yield Qi({type:xr.n,payload:{conversationId:e.payload.conversationId}}),Object(cr.b)(t)}}function*kd(e){try{const{payload:t,promise:n}=e,{conversationId:a,includeAll:o}=t,i=o?yield tc(Rr.c,n):yield tc(Rr.d,a,n);yield Qi(Object($s.a)({conversationId:a,includeAll:o,deleted:!0,surveyUrl:null===i||void 0===i?void 0:i.surveyUrl}))}catch(t){Object(cr.b)(t)}}function*Ud(){try{yield ir(xr.i,kd)}catch(e){Object(cr.b)(e)}}function*Bd(e){try{const{payload:t,promise:n}=e,{conversationId:a,includeAll:o}=t,i=o?yield tc(Rr.a,n):yield tc(Rr.b,a,n);yield Qi(Object($s.a)({conversationId:a,includeAll:o,closed:!0,surveyUrl:null===i||void 0===i?void 0:i.surveyUrl}))}catch(t){Object(cr.b)(t)}}function*Gd(){try{yield ir(xr.h,Bd)}catch(e){Object(cr.b)(e)}}function*$d(){try{yield ir(xr.l,Ld)}catch(e){Object(cr.b)(e)}}function*Fd(e){try{const{query:t,conversationId:n,faqAttachment:a,locale:o}=e.payload,i=yield tc(Rr.k,n,t,a,o);e.promise&&e.promise.resolve(i)}catch(t){e.promise&&e.promise.reject(),Object(cr.b)(t)}}function*Vd(){try{yield ir(xr.B,Fd)}catch(e){Object(cr.b)(e)}}function*Hd(e){try{const t=Z()(e,((e,t)=>{const n=ld.a.getParticipants(t);return jr()(n,(n=>{e.push({sender:n,conversationId:t.id})})),e}),[]);yield tc(ds,t)}catch(t){Object(cr.b)(t)}}function*Wd(){try{for(;;)try{const e=yield Yi(xr.f),t=yield tc(Rr.e,e.payload);yield tc(Hd,t.results);const n=yield ic(jt.h),a=Object(Eo.b)(n),o=Object(Eo.d)(n);yield Qi({payload:{conversationResponse:t,botUserIds:a,chatUserId:o},type:xr.g})}catch(e){Object(cr.b)(e)}}catch(t){Object(cr.b)(t)}}function*zd(e){try{const t=e.payload,n=yield tc(Rr.m,t);e.promise.resolve(n)}catch(t){e.promise.reject(t),Object(cr.b)(t)}}function*qd(){try{yield ir(xr.D,zd)}catch(e){Object(cr.b)(e)}}function*Xd(e){let{isPhone:t,conversationId:n,deflection:a}=e;try{const{type:e,source:o}=a;yield Qi(Object(sd.i)({conversationId:n,isPhone:t,type:e,source:o}))}catch(o){Object(cr.b)(o)}}function*Kd(){var e,t;try{for(;;){let o,i,c;const r=yield Yi(xr.s);i=r.payload.caseId,o=r.payload.conversationId,c=r.payload.context;const{isPhone:s}=r.payload,d=yield ic(jt.h),l=Object(Eo.b)(d),u=Object(Eo.d)(d);try{const t=yield tc(Rr.h,r.payload.caseId);if(yield Qi({payload:{caseId:i,conversationResponse:t,botUserIds:l,chatUserId:u},type:xr.t}),null===(e=null===t||void 0===t?void 0:t.deflectionParams)||void 0===e?void 0:e.initiateCall){const{type:e}=t.deflectionParams;yield nc(Xd,{conversationId:t.id,isPhone:s,deflection:{type:md[e],source:{type:Vs.c.SOCIAL_TO_LIVE_CHAT_DEFLECTION,autoInitiateCall:!0}}})}}catch(n){try{if(Object(vd.a)(n))throw n;{const e=yield tc(Rr.o,Object.assign({createCase:!0,caseId:i},c));if(yield Qi({payload:{caseId:i,conversationResponse:e,botUserIds:l,chatUserId:u,loaded:!0},type:xr.t}),null===(t=null===e||void 0===e?void 0:e.deflectionParams)||void 0===t?void 0:t.initiateCall){const{type:t}=e.deflectionParams;yield nc(Xd,{conversationId:e.id,isPhone:s,deflection:{type:md[t],source:{type:Vs.c.SOCIAL_TO_LIVE_CHAT_DEFLECTION,autoInitiateCall:!0}}})}}}catch(a){yield Qi({payload:{conversationId:o,error:Object(Bs.a)(a)},type:xr.u})}}}}catch(o){Object(cr.b)(o)}}function*Yd(){var e;try{for(;;){let n,a,o;try{const t=yield Yi(xr.v);n=t.payload.conversationId,a=t.payload.externalCaseId;const i=t.payload.isPhone;n?o=yield tc(Rr.j,n):a&&(o=yield tc(Rr.i,a));const c=yield ic(jt.h),r=Object(Eo.b)(c),s=Object(Eo.d)(c);if(yield Qi({payload:{conversationResponse:o,botUserIds:r,chatUserId:s},type:xr.w}),null===(e=null===o||void 0===o?void 0:o.deflectionParams)||void 0===e?void 0:e.initiateCall){const{type:e}=o.deflectionParams;yield nc(Xd,{conversationId:o.id,isPhone:i,deflection:{type:md[e],source:{type:Vs.c.SOCIAL_TO_LIVE_CHAT_DEFLECTION,autoInitiateCall:!0}}})}}catch(t){yield Qi({payload:Object.assign(Object.assign(Object.assign({},n?{conversationId:n}:{}),a?{externalCaseId:a}:{}),{error:Object(Bs.a)(t)}),type:xr.x}),Object(cr.b)(t)}}}catch(n){Object(cr.b)(n)}}function*Qd(e){try{const{conversationId:n,chatMessage:a}=e.payload,o=yield ic(jt.c);if(Object(On.j)(Object(On.u)(o),n).deleted)return null;for(;;){const e=yield ic(Id);try{if(e){const e=Nd(a,n);return yield tc(Us,e),e}yield Yi(rr.d)}catch(t){if(Object(cr.b)(t),!Object(vd.c)(t))break}}return null}catch(n){return Object(cr.b)(n),null}}function*Zd(e){try{const t=e.payload;yield Qi(Object($s.l)({type:t.actionType,payload:Y()(e.payload,["actionType"])}))}catch(t){Object(cr.b)(t)}}function*Jd(e){try{const t=yield tc(Qd,e);t&&(yield Qi({type:xr.L,payload:{chatMessage:t,conversationId:Ar.a.getConversationId(t)}}))}catch(t){Object(cr.b)(t)}}function*el(e){try{const t=yield ic(jt.c),n=Object(On.u)(t),a=Object(Eo.c)(yield ic(jt.h)),{sender:o,deleted:i,closed:c,caseNumber:r,conversationId:s,requestClientId:d}=e.payload,l=Object(On.j)(n,s);(o!==a.userId||d&&d!==fd.a.get()||r&&l&&!l.caseNumber&&!i&&!c)&&(yield Qi(Object($s.a)(e.payload)),r&&l&&!l.caseNumber&&(yield Qi(Object(Gn.c)({action:an.a.NEW_CONVERSATION_CREATED,conversationId:s,additional:{caseNumber:r}}))))}catch(t){Object(cr.b)(t)}}function*tl(e){try{const{conversationId:t,videoCallEnabled:n,audioCallEnabled:a}=e.payload;yield Qi({type:xr.d,payload:{conversationId:t,videoCallEnabled:n,audioCallEnabled:a}})}catch(t){Object(cr.b)(t)}}function*nl(e){try{const{payload:t}=e,{actionParams:n}=t;Cd(n.actionType)&&(yield tc(ad,e),e.promise.resolve(e))}catch(t){e.promise.reject(),Object(cr.b)(t)}}function*al(e){try{const{payload:t}=e,{actionParams:n}=t;Td(n.actionType)&&(yield tc(od,e))}catch(t){Object(cr.b)(t)}}function*ol(e){try{const{payload:t}=e,{actionParams:n,conversationId:a}=t;if(Pd(n.actionType)){const t=Object(yd.a)(n.actionId,n.attachment);yield Qi(Object(Gn.a)({ssoId:t.accountLinkUrl,conversationId:a,messageId:n.messageId})(Object(Bs.d)(e)))}}catch(t){e.promise.reject(),Object(cr.b)(t)}}function*il(e){try{const{actionParams:{attachment:t,values:n}}=e.payload,a=t,o=yield tc(Bs.b,{values:n,publicKeyForEncryption:a.publicKeyForEncryption,multiSubmitResponseUrl:a.multiSubmitResponseUrl});return{fieldNameVsToken:yield tc(Rr.u,a,o),originalData:n.originalData}}catch(t){return Object(cr.b)(t),null}}function*cl(e){try{const{actionParams:{messageId:t,actionType:n,values:a},conversationId:o}=e.payload;if(n===dd.a.ACCEPT_CO_BROWSE){const e=yield ic((e=>Object(On.n)(Object(On.p)(Object(jt.c)(e),o),t))),n=Ar.a.getSender(e);yield Qi(Object(hs.e)({messageId:t,conversationId:o,agentId:n,type:Is.a.REQUEST})),yield ac(Ss,{messageId:t})}return a}catch(t){return Object(cr.b)(t),null}}function*rl(e){try{const{actionParams:{attachment:t,actionId:n,values:a,messageId:o},conversationId:i}=e.payload,c=st()(Object(yd.a)(n,t),"surveyUrl","");yield Qi(Object($s.e)({surveyUrl:c,conversationId:i})),yield Qi({type:xr.Y,payload:{messageId:o,conversationId:i,attachment:t}});const[r]=yield Ji([Yi(xr.Z),Yi(xr.W),Yi(xr.ab)]);return r?a:null}catch(t){return Object(cr.b)(t),null}}function*sl(e){try{const{actionParams:{actionType:t,values:n}}=e.payload;return function(e){return e===dd.a.SECURE_FORM_POST_BACK}(t)?yield tc(il,e):function(e){return e===dd.a.ACCEPT_CO_BROWSE||e===dd.a.DENY_CO_BROWSE}(t)?yield tc(cl,e):function(e){return e===dd.a.SURVEY_POST_BACK}(t)?yield tc(rl,e):n}catch(t){return Object(cr.b)(t),null}}function*dl(e){try{const{payload:a}=e,{actionParams:o,appContext:i}=a;if(!Cd(t=o.actionType)&&!Ed(t)&&!Sd(t)&&!xd(t)&&!_d(t)&&!Ad(t)&&!Md(t)&&!wd(t)&&!Rd(t)&&!Pd(t)&&!Td(t))try{const t=yield tc(sl,e);Sr()(t)?e.promise&&e.promise.resolve(e):yield Qi(Object($s.p)({conversationId:a.conversationId,sender:a.sender,postback:{attachment:o.attachment,values:t,additional:o.additional,appContext:i,messageId:o.messageId,postbackId:o.actionId,postbackType:o.actionType},inReplyToChatMessageId:a.inReplyToChatMessageId})(Object(Bs.d)(e)))}catch(n){e.promise.reject(),Object(L.a)(n)}}catch(a){e.promise.reject(),Object(cr.b)(a)}var t}function*ll(e){try{const{actionParams:{messageId:t,actionId:n,actionType:a,attachment:o},conversationId:i}=e.payload;Sd(a)&&(yield Qi(Object(hs.j)({conversationId:i,messageId:t,buttonId:n,attachment:o})(Object(Bs.d)(e))))}catch(t){e.promise.reject(),Object(cr.b)(t)}}function*ul(e){try{const{actionParams:{attachment:t,actionId:n,actionType:a}}=e.payload;Ed(a)&&(yield Qi(Object($s.f)({attachment:t,actionId:n})(Object(Bs.d)(e))))}catch(t){e.promise.reject(),Object(cr.b)(t)}}function*bl(e){try{const{payload:t}=e,{actionParams:n}=t;xd(n.actionType)&&(yield Qi(Object($s.d)({attachment:n.attachment,actionId:n.actionId})(Object(Bs.d)(e))))}catch(t){e.promise.reject(),Object(cr.b)(t)}}function*pl(e){var t,n;try{const{payload:a}=e,{actionParams:{actionId:o,actionType:i,attachment:c,messageId:r,values:s},conversationId:d,appContext:l,applicationConfig:u}=a,b=null===(t=null===u||void 0===u?void 0:u.callConfiguration)||void 0===t?void 0:t.allUserPermissions;if(Rd(i)){s.participantPermissions||Object(cr.b)(`Participant permissions (${s.participantPermissions}) unset`),s.participantInfos||Object(cr.b)("Participant infos is unset");const t=s.audioOnly?It.c.AUDIO:It.c.VIDEO;yield Qi(Object(sd.p)({conversationId:d,isPhone:l.isPhone,type:t,isIncomingCall:s.isIncomingCall,videoConversationId:s.videoChatConversationId,participantPermissions:null!==(n=s.participantPermissions)&&void 0!==n?n:Object(pd.c)(t,b),participantInfos:s.participantInfos,prevState:Object(bd.a)(s.currentState,s.isIncomingCall)})),e.promise&&e.promise.resolve(e)}else if(wd(i)||Md(i)){const t=yield ic(jt.b);if(Object(mt.a)(t))return void(e.promise&&e.promise.reject());const n=wd(i)?It.c.VIDEO:It.c.AUDIO,a=st()(Object(yd.a)(o,c),"title","");let s={};o&&(s={sourceButtonId:o,messageId:r,messageText:a,type:Vs.c.CONVERSATION_MESSAGE}),yield Qi(Object(sd.i)({conversationId:d,isPhone:l.isPhone,type:n,source:s})),e.promise&&e.promise.resolve(e)}}catch(a){e.promise.reject(),Object(cr.b)(a)}}function*fl(e){try{const{payload:n}=e,{actionParams:a,conversationId:o,appContext:i}=n,c=_d(a.actionType),r=Ad(a.actionType);let s,d;if(c||r)try{const t=yield ic(jt.c);let n;s=Object(On.n)(Object(On.p)(t,o),a.messageId),c&&(yield Qi({type:xr.L,payload:{chatMessage:gr()(s,{messagePayload:{attachment:{$merge:{slots:void 0}}}}),conversationId:o}}),d=yield tc(Rr.f,{selectedDate:a.values.selectedDate,slotDefinitionId:a.attachment.slotDefinitionConfigId,timeZone:i.timeZone,appointmentAssetParams:a.attachment.params,messageId:a.messageId}),yield Qi({type:xr.L,payload:{chatMessage:gr()(s,{messagePayload:{attachment:{$merge:{slots:d}}}}),conversationId:o}})),r&&(d=yield tc(Rr.s,{selectedDate:a.values.selectedDate,selectedSlot:a.values.selectedSlot,timeZone:i.timeZone,slotDefinitionId:a.attachment.slotDefinitionConfigId,appointmentAssetParams:a.attachment.params,messageId:a.messageId}),n=d.reservationId,n||(yield Qi({type:xr.L,payload:{chatMessage:gr()(s,{messagePayload:{attachment:{$merge:Object.assign(Object.assign({},d.slots?{slots:d.slots}:{}),d.availableDates?{availableDates:d.availableDates}:{})}}}),conversationId:o}}))),e.promise.resolve({actionType:a.actionType,response:{reservationId:n,selectedSlot:a.values.selectedSlot,selectedDate:a.values.selectedDate,visibleSlots:a.values.visibleSlots}})}catch(t){Object(cr.b)(t),e.promise.reject({actionType:a.actionType,response:{error:d}})}}catch(n){e.promise.reject(),Object(cr.b)(n)}}function*yl(e){try{yield Zi([tc(nl,e),tc(al,e),tc(dl,e),tc(ul,e),tc(ll,e),tc(bl,e),tc(ol,e),tc(fl,e),tc(pl,e)])}catch(t){Object(cr.b)(t)}}function*Ol(e,t){try{const n=gr()(e,{payload:{actionParams:{$set:Object.assign(Object.assign({},Y()(e.payload.actionParams,["actionTypes"])),{actionType:t})}}}),a=new Promise(((e,t)=>{n.promise={resolve:e,reject:t}}));return yield tc(yl,n),yield a}catch(n){throw Object(cr.b)(n),n}}function*vl(e){try{const t=e.payload.actionParams.actionTypes;let n=e;for(let e=0;e<Tr()(t);e+=1)n=yield tc(Ol,n,t[e]);e.promise.resolve(n)}catch(t){e.promise.reject(t),Object(cr.b)(t)}}function*gl(){try{yield ir(xr.c,vl)}catch(e){Object(cr.b)(e)}}function*hl(e){try{let n,a;try{const{disclaimerStatus:t}=e.payload,o=yield ic(jt.c),i=Object(On.u)(o);n=e.payload.conversationId,a=st()(Object(On.l)(i,n),"disclaimerStatus"),yield Qi({type:xr.r,payload:{conversationId:n,disclaimerStatus:t}}),yield tc(Rr.w,n,t),e.promise.resolve()}catch(t){e.promise.reject(),yield Qi({type:xr.r,payload:{conversationId:n,disclaimerStatus:a}}),Object(cr.b)(t)}}catch(n){Object(cr.b)(n)}}function*jl(){try{yield ir(xr.q,hl)}catch(e){Object(cr.b)(e)}}function*ml(e){try{const{context:t,filters:n}=e.payload,a=yield ic(jt.c),o=Object(On.A)(a),i=Object(On.e)(o,n||Object(On.q)());i?(yield tc(Dd,Rr.v,{context:t,conversationId:i,payload:e.payload}),e.promise.resolve({conversationId:i})):e.promise.reject(jd.a.NOT_FOUND)}catch(t){e.promise.reject(Object(Bs.a)(t)),Object(cr.b)(t)}}function*Il(e){try{yield Yi(xr.g),yield tc(ml,e)}catch(t){e.promise.reject(Object(Bs.a)(t)),Object(cr.b)(t)}}function*Cl(e){try{const{context:t,conversationId:n,includeDeleted:a}=e.payload;if(n)return yield tc(Dd,Rr.v,{context:t,conversationId:n,payload:e.payload}),void e.promise.resolve({conversationId:n});if(a)return yield tc(Dd,Rr.x,{context:t,updateLatest:a,payload:e.payload}),void e.promise.resolve({conversationId:n});const o=yield ic(jt.c),i=Object(On.u)(o);if(Object(On.b)(i))return void(yield tc(ml,e));yield nc(Il,e)}catch(t){e.promise.reject(Object(Bs.a)(t)),Object(cr.b)(t)}}function*Tl(){try{yield ir(xr.k,Cl)}catch(e){Object(cr.b)(e)}}function*El(e){try{const{lastReadMessageId:t}=e.payload;yield tc(gd,{type:"MESSAGE_READ",payload:{messageId:t}})}catch(t){Object(cr.b)(t)}}function*Sl(){try{yield ir(xr.R,El)}catch(e){Object(cr.b)(e)}}function*xl(e){try{const e=yield tc(Rr.l);yield Qi({payload:{openConversationCount:e},type:xr.db})}catch(t){Object(cr.b)(t)}}function*_l(){try{yield function(e,t){for(var n=arguments.length,a=new Array(n>2?n-2:0),o=2;o<n;o++)a[o-2]=arguments[o];return nc.apply(void 0,[or,e,t].concat(a))}(xr.C,xl)}catch(e){Object(cr.b)(e)}}function*Al(){try{yield Zi([nc(Wd),nc(qd),nc(Yd),nc(Vd),nc(Js),nc($d),nc(Ud),nc(Gd),nc(Fr),nc(Hr),nc(Zr),nc(es),nc(gl),nc(Tl),nc(Kd),nc(jl),nc(Sl),nc(rd),nc(_l)])}catch(e){Object(cr.b)(e)}}const wl={},Ml="START_TYPING",Rl="STOP_TYPING";function*Pl(e,t){try{yield tc(gd,{type:e,payload:{conversationId:t}})}catch(n){Object(cr.b)(n)}}function*Dl(e,t){for(;;)try{yield nc(Pl,Ml,e),yield rc(25e3),yield Yi(t)}catch(n){Object(cr.b)(n)}}function*Nl(e,t){let n,a;try{for(n=Sc(ki.dropping(1)),a=yield nc(Dl,e,n);;){const e=yield Yi(t);if(e.type!==xr.eb)break;n.put(e)}}catch(o){Object(cr.b)(o)}finally{yield nc(Pl,Rl,e),n&&n.close(),a&&a.cancel()}}function*Ll(e,t){for(;;)try{let n;if(n=yield Yi(t),n.type!==xr.eb)continue;yield tc(Nl,e,t)}catch(n){Object(cr.b)(n)}}function*kl(){try{for(;;)try{const e=yield Ji([Yi(xr.eb),Yi(xr.fb)]),t=Ir()(e)[0],{payload:{conversationId:n}}=t;let a=wl[n];a||(a=Sc(ki.sliding(1)),wl[n]=a,yield nc(Ll,n,a)),a.put(t)}catch(e){Object(cr.b)(e)}}catch(e){Object(cr.b)(e)}}function*Ul(){try{yield nc(kl)}catch(e){Object(cr.b)(e)}}var Bl=n(340),Gl=n.n(Bl),$l=n(277),Fl=n.n($l),Vl=n(393),Hl=n.n(Vl);const Wl={};function*zl(){throw yield rc(3e4),new Error("")}function*ql(e,t,n,a){let o;try{for(yield Qi({type:xr.a,payload:{conversationId:t,userId:n,actionTime:a}}),o=yield nc(zl);;){const a=yield Yi(e);if(a.type===sr.j)o.isCancelled()||(yield oc(o)),o=yield nc(zl),yield Qi({type:xr.a,payload:{conversationId:t,userId:n,actionTime:a.payload.actionTime}});else{const e=yield ic(jt.c),o=Object(On.p)(e,t),i=Object(On.y)(o,n);if(i&&Ar.a.getCreationTime(i)<a.payload.actionTime)break}}}catch(i){Object(cr.b)(i)}finally{yield Qi({type:xr.b,payload:{conversationId:t,userId:n}}),o&&!o.isCancelled()&&(yield oc(o))}}function*Xl(e,t,n){for(;;)try{let a;if(a=yield Yi(e),a.type!==sr.j)continue;yield tc(ql,e,t,n,a.payload.actionTime)}catch(a){}}function*Kl(e){try{const{payload:{conversationId:t,sender:n}}=e,a=yield ic(jt.h),o=pn()(Object(Gs.e)(a,n)),i=function(e,t){return`${e}_${t}`}(t,o);let c=Wl[i];c||(c=Sc(ki.sliding(1)),Wl[i]=c,yield nc(Xl,c,t,o)),c.put(e)}catch(t){Object(cr.b)(t)}}function*Yl(e){try{yield Zi(e.map((e=>tc(Kl,e))))}catch(t){Object(cr.b)(t)}}function*Ql(e){try{yield Zi(e.map((e=>tc(Kl,e))))}catch(t){Object(cr.b)(t)}}const Zl=["AGENT_ASSIGNED","AGENT_UNASSIGNED","AGENT_ASSIGNMENT_CHANGED","WORK_QUEUE_ASSIGNED"];function*Jl(e,t,n){try{if((a=e)&&Zl.includes(a.type)){const{newAgentId:a,oldAgentId:o,queueId:i}=e,c=[],r=[];o&&(c.push({conversationId:t,sender:o}),r.push(o)),a&&(c.push({conversationId:t,sender:a}),r.push(a)),yield tc(ds,c),yield Qi(Object($s.a)({conversationId:t,agentAssigned:!!a,participants:r,workQueueAssigned:!!i}));const s=yield ic((e=>a?Object(Eo.g)(Object(jt.h)(e),a):void 0)),d={currentlyAssignedUser:s,previouslyAssignedUser:yield ic((e=>o?Object(Eo.g)(Object(jt.h)(e),o):void 0)),assignmentTime:n};a&&(yield Qi(Object(Gn.c)({conversationId:t,additional:d,action:an.a.AGENT_ASSIGNED})))}}catch(o){Object(cr.b)(o)}var a}function*eu(e){try{const{conversationId:t,messagePayload:n,creationTime:a}=e,o=n.events;yield Zi(o.map((e=>tc(Jl,e,t,a))))}catch(t){Object(cr.b)(t)}}function*tu(e){try{const t=e.data;Object(Mr.g)(t)&&(yield Zi([tc(eu,t)]))}catch(t){Object(cr.b)(t)}}const nu=(()=>{const e=new Set;return{add:t=>e.add(t),has:t=>e.has(t),delete:t=>e.delete(t),clear:()=>e.clear()}})(),au=(()=>{let e=[];return{set:t=>{e=t},get:()=>e,push:t=>{e=[...e,...ns()(t)]},clear:()=>{e=[]}}})();function ou(e){return e.type===sr.t}function iu(e){return e.type===sr.j}function cu(e){return e.type===sr.k}function*ru(e){try{const{data:t}=e;if(t){yield tc(tu,e);const n=yield ic(jt.h),a=Object(Gs.e)(n,Ar.a.getSender(t));yield Qi(Object($s.g)(t,a))}}catch(t){Object(cr.b)(t)}}function*su(e){try{const t=e.filter(ou);yield Zi(t.map((e=>tc(ru,e))));const n=t.reduce(((e,t)=>{const{data:n}=t;return n&&e.push(Ar.a.getId(n)),e}),[]);bt()(n)||(yield tc(Rr.q,n))}catch(t){Object(cr.b)(t)}}function*du(e){try{const t=e.filter(iu);if(!t.length)return;yield tc(Yl,t)}catch(t){Object(cr.b)(t)}}function*lu(e){try{const t=e.filter(cu);if(!t.length)return;yield tc(Ql,t)}catch(t){Object(cr.b)(t)}}function*uu(e){try{yield Zi([tc(su,e),tc(du,e),tc(lu,e)])}catch(t){Object(cr.b)(t)}}function*bu(e){try{const{id:t,data:n}=e;if(nu.add(t),jr()(au.get(),(e=>{if(e.id===t)return e.data=n,!1})),t===st()(pn()(au.get()),"id")){const{resolvedEvents:e,unresolvedEvents:t}=Z()(au.get(),((e,t)=>nu.has(t.id)&&bt()(e.unresolvedEvents)?(nu.delete(t.id),Object.assign(Object.assign({},e),{resolvedEvents:[...e.resolvedEvents,t]})):Object.assign(Object.assign({},e),{unresolvedEvents:[...e.unresolvedEvents,t]})),{resolvedEvents:[],unresolvedEvents:[]});au.set(t),yield nc(uu,e)}}catch(t){Object(cr.b)(t)}}function*pu(e){try{if(ou(e)){const t=yield tc(Qd,e);yield tc(bu,{id:e.id,data:t})}}catch(t){Object(cr.b)(t)}}function*fu(e){try{if(iu(e)){const t=Hl()(e.payload,["conversationId","sender"]);yield tc(ds,t),yield tc(bu,{id:e.id,data:{}})}}catch(t){Object(cr.b)(t)}}function*yu(e){try{cu(e)&&(yield tc(bu,{id:e.id,data:{}}))}catch(t){Object(cr.b)(t)}}function*Ou(e){try{yield Zi([tc(pu,e),tc(fu,e),tc(yu,e)])}catch(t){Object(cr.b)(t)}}function*vu(e){try{au.push(e),yield Zi(e.map((e=>nc(Ou,e))))}catch(t){Object(cr.b)(t)}}var gu=n(824),hu=n.n(gu);function ju(e){return e.type===sr.s}function mu(e){return e.type===sr.i}function Iu(e){return e.type===sr.l}function Cu(e){return e.type===sr.p}function Tu(e){return e.type===sr.m}function*Eu(e){try{yield Zi(e.filter(Cu).map((e=>tc(Zd,e))))}catch(t){Object(cr.b)(t)}}function*Su(e){try{yield Zi(e.filter(ju).map((e=>tc(Jd,e))))}catch(t){Object(cr.b)(t)}}function*xu(e){try{yield Zi(hu()(e.filter(Iu).map((e=>[tc(ls,{sender:e.payload.chatUserId,conversationId:e.payload.conversationId}),Qi(Object(Gn.c)({conversationId:e.payload.conversationId,action:an.a.USER_PROFILE_UPDATED,additional:{sender:e.payload.chatUserId}}))]))))}catch(t){Object(cr.b)(t)}}function*_u(e){try{yield Zi(e.filter(Tu).map((e=>tc(el,e))))}catch(t){Object(cr.b)(t)}}function*Au(e){try{yield Zi(e.filter(mu).map((e=>tc(tl,e))))}catch(t){Object(cr.b)(t)}}function*wu(e){try{yield Zi([tc(Eu,e),tc(Su,e),tc(xu,e),tc(_u,e),tc(Au,e)])}catch(t){Object(cr.b)(t)}}const Mu=[sr.t,sr.j,sr.k];function*Ru(e){try{const{events:t}=e.payload;let n=[],a=[];jr()(t,(e=>{Gl()(Mu,e.type)?n=[...n,Object.assign(Object.assign({},e),{id:Fl()()})]:a=[...a,e]})),yield tc(vu,n),yield tc(wu,a)}catch(t){Object(cr.b)(t)}}function*Pu(){try{yield ir(rr.j,Ru)}catch(e){Object(cr.b)(e)}}function*Du(){try{yield Yi(Yc.c),nu.clear(),au.clear()}catch(e){Object(cr.b)(e)}}function*Nu(){try{yield Zi([nc(Pu),nc(Du)])}catch(e){Object(cr.b)(e)}}var Lu=n(303),ku=n(297);const Uu=e=>{const t=R.a.getNoDisplayConfigFilter(e);return!bt()(t)&&Object(ku.d)(t,Lu.a.IS_CONVERSATION_OPEN)};function*Bu(e){try{const t=yield ic(jt.c),n=Object(On.u)(t);if(!Object(On.b)(n))return;yield Qi(Object($s.b)({shouldFetchNumberOfOpenConversation:Uu(e.applicationConfig),size:n.ids.length}))}catch(t){Object(cr.b)(t)}}function*Gu(){try{const e=yield ic(jt.c),t=Object(On.u)(e),n=Object(On.s)(e),a=Z()(n,((e,n,a)=>{const o=n.messages;if(!a.startsWith(Vs.g)&&Object(On.a)(o)&&!Object(On.E)(t,a)){const t=Object($s.c)(a,{size:Object(On.o)(o).length})();e.push(Qi(t))}return e}),[]);a.length&&(yield Zi(a))}catch(e){Object(cr.b)(e)}}function*$u(){try{const e=yield tc(is.a);yield Qi({type:os.h,payload:{users:[e]}})}catch(e){Object(cr.b)(e)}}function*Fu(e){try{yield Zi([nc(Bu,e),nc(Gu),nc($u)])}catch(t){Object(cr.b)(t)}}function*Vu(){try{const{payload:{applicationConfig:e}}=yield Yi(Yc.a);yield ir(rr.k,Fu,{applicationConfig:e})}catch(e){Object(cr.b)(e)}}function*Hu(){try{yield Zi([nc(Al),nc(Ul),nc(Nu),nc(Vu)])}catch(e){Object(cr.b)(e)}}function*Wu(e){try{const t=e.payload,n=Object(Eo.c)(yield ic(jt.h));yield tc(is.f,Object.assign(Object.assign({},n),{customContext:t})),yield Qi(Object(Gn.c)({action:an.a.USER_PROFILE_UPDATED}))}catch(t){Object(cr.b)(t)}}function*zu(){try{yield ir(os.g,Wu)}catch(e){Object(cr.b)(e)}}function*qu(e){try{const t=e.payload,n=yield tc(is.e,t);e.promise.resolve(n);const a=n.results;yield Qi({type:os.h,payload:{users:a}})}catch(t){e.promise.reject(t),Object(cr.b)(t)}}function*Xu(){try{yield ir(os.e,qu)}catch(e){console.error(e)}}function*Ku(e){try{const{userId:t}=e.payload,n=yield tc(is.b,t);e.promise.resolve(n),yield Qi({type:os.h,payload:{users:[n]}})}catch(t){e.promise.reject(t),Object(cr.b)(t)}}function*Yu(){try{yield ir(os.b,Ku)}catch(e){Object(cr.b)(e)}}function*Qu(e){try{const t=e.payload,n=yield tc(is.d,t);e.promise.resolve(n);const a=n.results;yield Qi({type:os.h,payload:{users:a}})}catch(t){e.promise.reject(t),Object(cr.b)(t)}}function*Zu(){try{yield ir(os.d,Qu)}catch(e){console.error(e)}}function*Ju(){try{yield Zi([nc(zu),nc(Xu),nc(Zu),nc(Yu)])}catch(e){Object(cr.b)(e)}}var eb=n(533),tb=n(422);function nb(e){return e.type===sr.d}function ab(e){return e.type===sr.c}function ob(e){return e.type===sr.b}function ib(e){return e.type===sr.e}function cb(e){return e.type===sr.h}function*rb(e,t){try{const n=Object(Eo.c)(yield ic(jt.h));yield Zi(e.filter(nb).map((e=>{var a,o;const i=e.payload.participantInfos.find((e=>e.snId===n.userId)),c=e.payload.type,r=null!==(a=null===i||void 0===i?void 0:i.permissions)&&void 0!==a?a:Object(pd.c)(c,null===(o=t.callConfiguration)||void 0===o?void 0:o.allUserPermissions);return Qi(Object(sd.o)({conversationId:e.payload.conversationId,videoConversationId:e.payload.videoConversationId,permissions:r,participantInfos:e.payload.participantInfos,type:c}))})))}catch(n){Object(cr.b)(n)}}function*sb(e){try{const t=yield ic(jt.b);yield Zi(e.filter(ab).map((e=>{const{callDetails:n,isIncomingCall:a,isOutgoingCall:o}=Object(eb.a)(t,e.payload.videoConversationId),i=a&&n.state===It.f.WAITING;if((a||o)&&!Object(pd.f)({isIncomingCall:a,state:n.state}))return Qi(i?Object(sd.q)({videoConversationId:e.payload.videoConversationId}):Object(sd.m)({callDetails:n,isIncomingCall:a,notifyAgent:!1,notifyUser:!0,videoConversationId:e.payload.videoConversationId,endedBy:e.payload.videoParticipantId}))})).filter((e=>e)))}catch(t){Object(cr.b)(t)}}function*db(e){try{const t=yield ic(jt.b);yield Zi(e.filter(ib).map((e=>{const{callDetails:n,isIncomingCall:a,isOutgoingCall:o}=Object(eb.a)(t,e.payload.videoConversationId);if((a||o)&&!Object(pd.f)({isIncomingCall:a,state:n.state}))return Qi(Object(sd.h)({isIncomingCall:a,conversationId:e.payload.conversationId,videoConversationId:e.payload.videoConversationId}))})).filter((e=>e)))}catch(t){Object(cr.b)(t)}}function*lb(e){try{const t=yield ic(jt.b),n=e.filter(ob).map((e=>{const{callDetails:n,isOutgoingCall:a}=Object(eb.a)(t,e.payload.videoConversationId);if(a&&!Object(pd.f)({isIncomingCall:!1,state:n.state}))return Qi(Object(sd.c)({isIncomingCall:!1,conversationId:e.payload.conversationId,videoConversationId:e.payload.videoConversationId}))})).filter((e=>e));yield Zi(n)}catch(t){Object(cr.b)(t)}}function*ub(e){try{const t=yield ic(jt.b);yield Zi(e.filter((e=>function(e){return e.type===sr.f}(e))).map((e=>{const{callDetails:n}=Object(eb.a)(t,e.payload.videoConversationId);return n.state===It.h.WAITING?Qi(Object(sd.v)({videoConversationId:e.payload.videoConversationId,callInfo:{conversation:e.payload.conversation,participant:e.payload.participant}})):Qi({type:tb.x,payload:{participantInfos:Object(pd.b)(e.payload.conversation),participantPermissions:e.payload.participant.permissions,videoConversationId:e.payload.videoConversationId}})})))}catch(t){Object(cr.b)(t)}}function*bb(e){try{yield Zi(e.filter((e=>function(e){return e.type===sr.g}(e))).map((e=>Qi({type:tb.x,payload:{participantInfos:Object(pd.b)(e.payload.conversation),videoConversationId:e.payload.videoConversationId}}))))}catch(t){Object(cr.b)(t)}}function*pb(e){try{yield Zi(e.filter(cb).map((e=>Qi({type:tb.x,payload:{videoConversationId:e.payload.videoConversationId,participantPermissions:e.payload.permissions}}))))}catch(t){Object(cr.b)(t)}}function*fb(e,t){try{const{events:n}=t.payload;yield Zi([tc(sb,n),tc(rb,n,e),tc(lb,n),tc(ub,n),tc(db,n),tc(pb,n),tc(bb,n)])}catch(n){Object(cr.b)(n)}}function*yb(){try{const{payload:{applicationConfig:e}}=yield Yi(Yc.a);yield ir(rr.j,fb,e)}catch(e){Object(cr.b)(e)}}const Ob="/video-chat/conversation";function vb(e){let{videoConversationId:t,shouldWaitForConnection:n}=e;return Object(_r.__awaiter)(this,void 0,void 0,(function*(){return(yield Kc.a.post(`${Ob}/accept/${t}?shouldWaitForConnection=${n}`)).data}))}function gb(e){let{videoConversationId:t}=e;return Object(_r.__awaiter)(this,void 0,void 0,(function*(){return Kc.a.post(`${Ob}/leave/${t}`)}))}function hb(e){let{conversationId:t,audioOnly:n,messageText:a,sourceButtonId:o,postBackChatMessageId:i,shouldWaitForConnection:c,videoConversationId:r,activityEventType:s,autoInitiateCall:d}=e;return Object(_r.__awaiter)(this,void 0,void 0,(function*(){return(yield Kc.a.post(`${Ob}/initiate/${t}`,{audioOnly:n,messageText:a,clickedButtonId:o,postBackChatMessageId:i,shouldWaitForConnection:c,videoChatConversationId:r,activityEventType:s,autoInitiateCall:d})).data}))}function jb(e){let{videoConversationId:t,meetingId:n}=e;return Object(_r.__awaiter)(this,void 0,void 0,(function*(){return(yield Kc.a.post(`${Ob}/participant/connected/${t}?meetingId=${n}`)).data}))}function mb(e){return Object(_r.__awaiter)(this,void 0,void 0,(function*(){return(yield Kc.a.post(`${Ob}/fetch/ongoing/conversation?caseId=${e}`)).data}))}function Ib(e){let{videoConversationId:t,reason:n,subReason:a}=e;return Object(_r.__awaiter)(this,void 0,void 0,(function*(){return(yield Kc.a.post(`${Ob}/callFailed/${t}`,{reason:n,subReason:a})).data}))}var Cb=n(606);function*Tb(e,t,n){try{const a=yield ic(jt.c),o=Object(bd.b)(a,e,t);o&&(yield tc(Yr,{chatMessage:o,conversationId:e,params:{state:n}}))}catch(a){Object(cr.b)(a)}}function*Eb(e){try{const{notifyAgent:t,notifyUser:n,callDetails:a,videoConversationId:o,isIncomingCall:i}=e.payload,c=a.conversationId;if(yield Qi(Object(Gn.c)({conversationId:c,action:an.a.CALL_ENDED,additional:{videoConversationId:o,userInitiated:!n}})),yield tc(Tb,c,o,Cb.a.CALL_ENDED),!t)return;if(!i&&!a.hasInitiateSucceeded&&a.state===It.h.WAITING){if((yield Yi(Object(pd.d)(o))).type===tb.e)return}if(i&&a.state===It.f.ACCEPTED){if((yield Yi(Object(bd.c)(o))).type===tb.e)return}yield tc(gb,{videoConversationId:o})}catch(t){Object(cr.b)(t)}}function*Sb(e){try{e.payload.isOutgoingWaiting&&(yield tc(Eb,e)),yield Qi({type:xr.cb,payload:{text:e.payload.text,sender:e.payload.sender,conversationId:e.payload.conversationId}})}catch(t){Object(cr.b)(t)}}function*xb(e){var t,n;try{const{actionParams:{messageId:a,actionId:o},conversationId:i}=e.payload,c=yield ic(jt.b),r=Object(mt.f)(c),s=null===(t=r.source)||void 0===t?void 0:t.messageId;if(s&&a===s&&o!==(null===(n=r.source)||void 0===n?void 0:n.sourceButtonId)){const e=yield ic(jt.c),t=Object(On.n)(Object(On.p)(e,i),a);t&&!wr.a.getAttachment(Ar.a.getMessagePayload(t)).reSubmittable&&(yield Qi(Object(sd.m)({notifyAgent:!0,notifyUser:!1,callDetails:r,isIncomingCall:!1,videoConversationId:r.videoConversationId})))}}catch(a){Object(cr.b)(a)}}function*_b(e,t){try{yield Qi(Object(sd.r)({conversationId:t.payload.conversationId,controls:Object(bd.g)(t.payload.isPhone),type:t.payload.type,source:t.payload.source,allUserPermissions:e,videoConversationId:Fl.a.v4()}))}catch(n){Object(cr.b)(n)}}function*Ab(e){let{error:t,videoConversationId:n,reason:a,isIncomingCall:o}=e;try{const e=yield ic(jt.b),i=o?Object(mt.d)(e):Object(mt.f)(e);if(bt()(i)||i.videoConversationId!==n||Object(pd.f)({isIncomingCall:o,state:i.state}))return;if(Object(vd.f)(t)){const e=st()(t,"response.data.error")||Object(Bs.a)(t);if(e===It.a.CALL_ALREADY_ENDED)return void(yield Qi({type:tb.c,payload:{videoConversationId:n,notifyAgent:!1,notifyUser:!0,callDetails:i,isIncomingCall:o}}));yield Qi({type:tb.e,payload:{videoConversationId:n,reason:a,subReason:e}})}}catch(i){Object(cr.b)(i)}}function*wb(e){try{const{videoConversationId:t}=e.payload;yield Qi(Object(sd.b)({videoConversationId:t,controls:Object(bd.g)(e.payload.isPhone)}));const n=yield tc(vb,{videoConversationId:t,shouldWaitForConnection:!0});yield Qi({type:tb.x,payload:{participantPermissions:n.participant.permissions,participantInfos:n.conversation.participantInfos,videoConversationId:n.conversation.id}}),yield Qi(Object(sd.u)({videoConversationId:t}))}catch(t){Object(cr.b)(t),yield tc(Ab,{videoConversationId:e.payload.videoConversationId,isIncomingCall:!0,error:t,reason:It.e.ACCEPT_FAILED})}}function*Mb(e){let t;try{const{videoConversationId:n,source:a}=e.payload,{autoInitiateCall:o,creativeId:i,interceptId:c,interceptTargetId:r,messageId:s,messageText:d,sourceButtonId:l,type:u}=a||{},b=yield ic(jt.b);let p=Object(mt.f)(b).conversationId;if(p.startsWith(Vs.g)){const e=yield Yi(Object(Gs.h)(p));if(e.type!==xr.O)throw e.payload.error;p=e.payload.conversationResponse.id,yield Qi({type:tb.x,payload:{videoConversationId:n,conversationId:p}})}const f=Object(mt.h)(b,n);if(yield Qi(Object(Gn.c)({conversationId:p,action:f?an.a.AUDIO_CALL_OUTGOING_STARTING:an.a.VIDEO_CALL_OUTGOING_STARTING,sourceSubType:u,additional:{videoConversationId:n,creativeId:i,interceptId:c,interceptTargetId:r,sourceButtonId:l,messageId:s}})),s){const e=yield ic(jt.c);t=Object(On.n)(Object(On.p)(e,p),s),yield tc(Yr,{chatMessage:t,conversationId:p,params:{buttonId:l}})}const y=yield tc(hb,{conversationId:p,audioOnly:f,messageText:d,sourceButtonId:l,postBackChatMessageId:s,shouldWaitForConnection:!0,videoConversationId:n,activityEventType:"CALL_STARTED",autoInitiateCall:o});yield Qi({type:tb.x,payload:{hasInitiateSucceeded:!0,agentWaitTime:y.conversation.agentWaitTime,participantInfos:y.conversation.participantInfos,participantPermissions:y.participant.permissions,videoConversationId:y.conversation.id}})}catch(n){t&&(yield Qi({type:xr.L,payload:{chatMessage:t,conversationId:e.payload.conversationId}})),yield tc(Ab,{videoConversationId:e.payload.videoConversationId,reason:It.g.INITIATE_FAILED,error:n,isIncomingCall:!1}),Object(cr.b)(n)}}function*Rb(e){try{const{conversationId:n,type:a,isPhone:o,prevState:i,videoConversationId:c,participantInfos:r,participantPermissions:s}=e.payload,d=yield ic(jt.b),l=Object(mt.c)(d);if(Object(bd.h)({callDetails:l}))return;const u=a===It.c.AUDIO,b=Object(bd.d)(i);yield Qi(Object(Gn.c)({conversationId:n,action:Object(bd.e)(u,b),additional:{videoConversationId:c}})),yield Qi(Object(sd.s)({conversationId:n,videoConversationId:c,state:b?It.f.ACCEPTED:It.f.SETUP,controls:Object(bd.g)(o),type:a,participantPermissions:s,participantInfos:r}));let p=yield tc(mb,n);if(bt()(p))return void(yield Qi({type:tb.c,payload:{videoConversationId:e.payload.videoConversationId,notifyAgent:!1,notifyUser:!0,isIncomingCall:!0}}));if(yield Qi({type:tb.x,payload:{participantPermissions:p.participant.permissions,participantInfos:p.conversation.participantInfos,videoConversationId:p.conversation.id}}),b){try{p=yield tc(vb,{videoConversationId:p.conversation.id,shouldWaitForConnection:!0}),yield Qi({type:tb.x,payload:{participantPermissions:p.participant.permissions,participantInfos:p.conversation.participantInfos,videoConversationId:p.conversation.id}})}catch(t){return Object(cr.b)(t),void(yield tc(Ab,{videoConversationId:e.payload.videoConversationId,reason:It.e.ACCEPT_FAILED,error:t,isIncomingCall:!0}))}yield Qi(Object(sd.u)({videoConversationId:p.conversation.id}))}}catch(t){return Object(cr.b)(t),void(yield tc(Ab,{videoConversationId:e.payload.videoConversationId,reason:It.e.REJOIN_FAILED,error:t,isIncomingCall:!0}))}}function*Pb(e){try{const{conversationId:t,type:n,isPhone:a,prevState:o,videoConversationId:i,participantInfos:c,participantPermissions:r}=e.payload,s=yield ic(jt.b),d=Object(mt.c)(s);if(Object(bd.h)({callDetails:d}))return;const l=n===It.c.AUDIO;yield Qi(Object(Gn.c)({conversationId:t,action:Object(bd.e)(l),additional:{videoConversationId:i}})),yield Qi(Object(sd.t)({conversationId:t,videoConversationId:i,state:Object(bd.f)(o),controls:Object(bd.g)(a),type:n,participantPermissions:r,participantInfos:c}));const u=yield tc(mb,e.payload.conversationId);if(bt()(u))return void(yield Qi({type:tb.c,payload:{videoConversationId:e.payload.videoConversationId,notifyAgent:!1,notifyUser:!0}}));yield Qi({type:tb.x,payload:{agentWaitTime:u.conversation.agentWaitTime,participantPermissions:u.participant.permissions,participantInfos:u.conversation.participantInfos,videoConversationId:u.conversation.id}})}catch(t){Object(cr.b)(t),yield tc(Ab,{videoConversationId:e.payload.videoConversationId,reason:It.g.REJOIN_FAILED,error:t,isIncomingCall:!1})}}function*Db(e){try{const t=e.payload,{isIncomingCall:n}=t,a=Object(_r.__rest)(t,["isIncomingCall"]);n?yield Qi(Object(sd.f)(a)):yield Qi(Object(sd.k)(a))}catch(t){Object(cr.b)(t)}}function*Nb(e){const t=yield ic(jt.b),{videoConversationId:n}=e.payload,{isOutgoingCall:a}=Object(eb.a)(t,n);try{const t=a?sd.l:sd.g;yield Qi(t({videoConversationId:n})),yield tc(jb,e.payload)}catch(o){yield tc(Ab,{videoConversationId:n,reason:a?It.g.JOIN_FAILED:It.e.JOIN_FAILED,error:o,isIncomingCall:!a}),Object(cr.b)(o)}}function*Lb(e){try{const t=yield ic(jt.b),{callDetails:n,isIncomingCall:a}=Object(eb.a)(t,e.payload.videoConversationId);if(n.reason&&n.reason!==e.payload.reason)return;const o=n.conversationId,i=n.videoConversationId;if(yield Qi(Object(Gn.c)({conversationId:o,action:an.a.CALL_FAILED,additional:{videoConversationId:e.payload.videoConversationId}})),yield tc(Tb,o,i,Cb.a.CALL_FAILED),!a&&!n.hasInitiateSucceeded){if((yield Yi(Object(pd.d)(i))).type===tb.e)return}yield tc(Ib,{videoConversationId:e.payload.videoConversationId,reason:e.payload.reason,subReason:e.payload.subReason})}catch(t){Object(cr.b)(t)}}function*kb(e){try{const{isIncomingCall:t,conversationId:n,videoConversationId:a}=e.payload;yield Qi(Object(Gn.c)({conversationId:n,action:an.a.CALL_DECLINED,additional:{videoConversationId:a,userInitiated:t}})),yield tc(Tb,n,a,Cb.a.CALL_DECLINED),yield tc(gb,{videoConversationId:a})}catch(t){Object(cr.b)(t)}}function*Ub(e){try{const{conversationId:t,videoConversationId:n,isIncomingCall:a}=e.payload;yield Qi(Object(Gn.c)({conversationId:t,action:an.a.CALL_MISSED,additional:{videoConversationId:n,userInitiated:a}})),yield tc(Tb,t,n,Cb.a.CALL_MISSED)}catch(t){Object(cr.b)(t)}}function*Bb(){var e;try{const{payload:{applicationConfig:t}}=yield Yi(Yc.a);yield ir(tb.g,wb),yield ir(tb.c,Eb),yield ir(tb.o,_b,null===(e=null===t||void 0===t?void 0:t.callConfiguration)||void 0===e?void 0:e.allUserPermissions),yield ir(tb.u,Mb),yield ir(tb.d,Sb),yield ir(tb.v,Db),yield ir(tb.k,Rb),yield ir(tb.r,Pb),yield ir(xr.c,xb),yield ir(tb.y,Nb),yield ir(tb.e,Lb),yield ir(tb.b,kb),yield ir(tb.n,Ub)}catch(t){Object(cr.b)(t)}}function*Gb(){yield Zi([nc(yb),nc(Bb)])}function $b(e){return e.type===sr.n}function*Fb(){try{const e=yield ic(jt.f);bt()(e)||(yield Qi(Object(hs.h)()))}catch(e){Object(cr.b)(e)}return null}function*Vb(e){try{const{events:t}=e.payload,n=yield ic(jt.f);yield Zi(t.filter($b).map((e=>{if(n.type!==Is.a.REQUEST)return null;const{status:t}=e.payload;return"LIVE"===t?tc(Fb):"COMPLETED"===t?Qi(Object(hs.d)({endedByAgent:!0})):null})))}catch(t){Object(cr.b)(t)}}function*Hb(){try{yield ir(rr.j,Vb)}catch(e){Object(cr.b)(e)}}function*Wb(){yield Zi([nc(Ls),nc(Hb)])}function*zb(){try{yield Zi([nc(Or),nc(Hu),nc(Ju),nc(Gb),nc(Wb)])}catch(e){Object(cr.b)(e)}}function*qb(){try{const e=yield nc(zb);yield Yi(Yc.c),yield rc(0),yield oc(e)}catch(e){Object(cr.b)(e)}}var Xb=n(356),Kb=n(295),Yb=n(319),Qb=n(500),Zb=n(52);function Jb(e,t){const n=Object(Qb.a)(e,{path:"/conversation/:conversationId/:transientId?"});if(!n)return{};const a=st()(n.params,"conversationId"),o=st()(n.params,"transientId");return"all"===a?{isConversationPath:!1,isDefiniteConversation:!1,matchedConversationId:void 0}:"new"===a?{isConversationPath:!0,isDefiniteConversation:!1,matchedConversationId:t?t.slice(1):o}:"last"===a?{isConversationPath:!0,isDefiniteConversation:!1,matchedConversationId:a}:{isConversationPath:!0,isDefiniteConversation:!0,matchedConversationId:a}}function*ep(){try{const e=Object(Eo.e)(yield ic(D.h));return{...Object(Zb.a)(),locale:e}}catch(e){return void Object(cr.b)(e)}}const tp=e=>e.type===rr.d&&st()(e,"payload.status")===hd.a.CONNECTED,np=e=>e.type===rr.d&&st()(e,"payload.status")===hd.a.DISCONNECTED;var ap=n(725),op=n(451),ip=n(911),cp=n(810);function*rp(e){try{const{conversationId:t,chatMessage:n}=e.payload;ip.a.emit(e);const a=Object(Eo.d)(yield ic(D.h)),o=yield ic(D.c),i=Object(On.j)(o.conversations,t);if(i){const e=we()(i.defaultMessages,"id"),o=Ar.a.getId(n);if(e.includes(o))return void(yield Qi({type:xr.R,payload:{conversationId:t,lastReadMessageId:o}}));if(function(e,t){return!(Ar.a.getSender(e)===t)&&!Object(Mr.g)(e)}(n,a)){const{isConversationPath:e,conversationId:n}=yield ic(Yb.c),a=yield ic(D.b),{isMinimized:o}=a,c=Object(Xb.b)(),r=!!e,s=!bt()(i);(Object(G.D)()?s&&t===n:s)&&(yield Qi({type:xr.S,payload:{conversationId:t,count:1}}),o&&!r&&c.push(`/conversation/${t}`))}}}catch(t){Object(cr.b)(t)}}function*sp(){try{yield ir(xr.G,rp)}catch(e){Object(cr.b)(e)}}function*dp(e){try{var t;const n=Object(Rn.b)(),{url:a}=Object(ap.a)({url:Object(Kb.d)(e.payload.url)},{location_url:Object(Zb.b)()});Object(Rn.c)(n)?n.open(a,e.payload.target):window.open(a),null===(t=e.promise)||void 0===t||t.resolve()}catch(a){var n;null===(n=e.promise)||void 0===n||n.reject(),Object(cr.b)(a)}}function*lp(){try{yield ir(xr.T,dp)}catch(e){Object(cr.b)(e)}}function*up(e){try{var t;window.open(Object(Kb.c)(e.payload.phoneNumber)),null===(t=e.promise)||void 0===t||t.resolve()}catch(a){var n;null===(n=e.promise)||void 0===n||n.reject(),Object(cr.b)(a)}}function*bp(){try{yield ir(xr.p,up)}catch(e){Object(cr.b)(e)}}function*pp(e){try{const{surveyUrl:t,shouldReplace:n,conversationId:a}=e.payload,o=Object(Xb.b)(),i=Object(G.E)()||Object(G.J)()?`${t}&showCancel=true`:t,c=`/survey/${encodeURIComponent(`${i}&hideThankYouPage=true`)}`,r=a?`/conversation/${a}${c}`:c;return n?o.replace(c):o.push(r)}catch(t){return void Object(cr.b)(t)}}function*fp(){try{yield ir(xr.X,pp)}catch(e){Object(cr.b)(e)}}function*yp(e){try{const{deleted:n,closed:a,surveyUrl:o,conversationId:i}=e.payload;try{if(n||a){const e=Object(Xb.b)(),{matchedConversationId:t}=Jb(e.location.pathname,e.location.hash),a=n&&!!i&&t===i&&!Object(G.E)();o?yield Qi(Object(Pr.n)({surveyUrl:o,shouldReplace:a,conversationId:i})):a&&e.goBack()}}catch(t){Object(cr.b)(t)}}catch(t){Object(cr.b)(t)}}function*Op(){try{yield ir(xr.j,yp)}catch(e){Object(cr.b)(e)}}function*vp(){try{yield Yi(Yc.a);const e=Object(Xb.b)(),t=e.location.pathname.includes("logout")?e.entries[e.entries.length-2]:e.location,n=Object(op.b)(),{matchedConversationId:a,isConversationPath:o,isDefiniteConversation:i}=Jb(t.pathname,t.hash);if(o&&i){const e=Object(G.f)(a);if(e){const t=Object(G.e)(e),a=yield tc(Zb.a);yield Qi(Object(Pr.a)(e,t,a,n))}else{const e=yield ic(D.c);Object(On.j)(Object(On.u)(e),a)||(yield Qi(Object(Pr.b)({conversationId:a,isPhone:n})))}}yield rc(1e3),yield Qi(Object(Pr.g)())}catch(e){Object(cr.b)(e)}}function*gp(e){try{const{payload:t,promise:n}=e,{conversationId:a}=t;yield tc(cp.b,a),n&&n.resolve()}catch(t){e.promise&&e.promise.reject(),Object(cr.b)(t)}}function*hp(){try{yield ir(xr.o,gp)}catch(e){Object(cr.b)(e)}}function*jp(e){try{const t=yield ic(D.h),n=Object(Eo.d)(t),a=yield ic(D.c),o=((e,t,n)=>{if(n)return[{conversationId:n,count:Object(Yb.b)(e[n],t)}];return Z()(e,((e,n)=>{const a=Object(Yb.b)(n,t);return e.push({conversationId:n.id,count:a}),e}),[])})(Object(On.u)(a).byId,n,e);bt()(o)||(yield Qi({type:xr.Q,payload:o}))}catch(t){console.warn(t)}}function*mp(){try{if(Object(G.D)()){if(Object(G.L)())for(;;){yield Yi(xr.g);const{conversationId:e}=yield ic(Yb.c);yield tc(jp,e)}if(Object(G.I)()||Object(G.H)()){yield Ji([Yi(xr.t),Yi(xr.u),Yi(xr.w),Yi(xr.x)]);const{conversationId:e}=yield ic(Yb.c);return void(yield tc(jp,e))}return}if(Object(G.I)()||Object(G.H)())return yield Zi([Ji([Yi(xr.t),Yi(xr.w),Yi(xr.u),Yi(xr.x)]),Yi(xr.g)]),void(yield tc(jp));if(Object(G.N)()||Object(G.K)()||Object(G.L)())for(;;)yield Yi(xr.g),yield tc(jp)}catch(e){Object(cr.b)(e)}}function*Ip(){try{yield Zi([nc(vp),nc(sp),nc(lp),nc(bp),nc(hp),nc(fp),nc(Op),nc(mp)])}catch(e){Object(cr.b)(e)}}function*Cp(e){let{action:t}=e;try{const e=t.payload;if((n=e).type!==ed.i&&n.type!==ed.j)return;const a=yield ic(D.c),o=Object(On.f)(Object(On.A)(a));e.type===ed.i&&(yield tc(To.n,e.payload.contextId||o,e.payload.abortedProcessContext,[])),e.type===ed.j&&(yield tc(To.k,e.payload.contextId||o))}catch(a){Object(cr.b)(a)}var n}function*Tp(e){try{const{conversationId:t,chatMessage:n}=e.payload,a=yield tc(To.f,t);if(a){const e=wr.a.getAttachment(Ar.a.getMessagePayload(n));if(Object(as.c)(Ar.a.getSender(n))&&e&&Object(yd.d)(e)){const e=Ar.a.getId(n),o=a.messageIds;yield tc(To.n,t,a.context,[...o,e])}}}catch(t){Object(cr.b)(t)}}function*Ep(e){try{const{conversationId:t,chatMessage:n}=e.payload,a=yield tc(To.f,t);a&&(yield tc(To.n,t,a.context,[]))}catch(t){Object(cr.b)(t)}}function*Sp(){try{yield ir(xr.G,Tp)}catch(e){Object(cr.b)(e)}}function*xp(){try{yield ir(xr.J,Ep)}catch(e){Object(cr.b)(e)}}function*_p(e){try{const t=yield tc(To.f,e);t&&(yield Zi(t.messageIds.map((e=>tc(Rr.p,e)))),yield tc(Rr.v,{context:t.context,conversationId:e}),yield tc(To.k,e))}catch(t){Object(cr.b)(t)}}function*Ap(e){try{const{results:t}=e.payload.conversationResponse;yield Zi(t.map((e=>tc(_p,e.id))))}catch(t){Object(cr.b)(t)}}function*wp(){try{yield ir(xr.g,Ap)}catch(e){Object(cr.b)(e)}}function*Mp(){try{yield Zi([nc(Sp),nc(xp),nc(wp)])}catch(e){Object(cr.b)(e)}}var Rp=n(314),Pp=n.n(Rp),Dp=n(246),Np=n.n(Dp),Lp=n(273),kp=n.n(Lp),Up=n(528),Bp=n.n(Up),Gp=n(272),$p=n.n(Gp),Fp=n(727),Vp=n(614),Hp=n(492),Wp=n(602);const zp=e=>t=>t.type===xr.w&&st()(t,"payload.conversationResponse.externalCaseId")===e,qp=e=>t=>t.type===xr.x&&st()(t,"payload.externalCaseId")===e;function*Xp(){try{const e=yield ic(D.b),{isMinimized:t}=e;t&&(yield Qi({type:So.d,payload:{}}))}catch(e){Object(cr.b)(e)}}function*Kp(e){const{payload:t,promise:n}=e;let a,o;try{let i=yield ic(D.c),c=Object(On.u)(i);a=t.conversationId,o=t.externalCaseId;const r=Object(op.b)();if(!a)if(Object(On.b)(c)||(yield Yi(xr.g),i=yield ic(D.c),c=Object(On.u)(i)),o){if(a=Object(On.d)(Object(On.A)(i),o),!a&&i.conversations.hasMore){yield Qi(Object(Pr.b)({externalCaseId:o,isPhone:r}));const[e,t]=yield Ji([Yi(zp(o)),Yi(qp(o))]);if(t)throw t.payload.error;a=st()(e,"payload.conversationResponse.id"),i=yield ic(D.c),c=Object(On.u)(i)}}else{const t=Object(On.A)(i),n=e.payload.fallbackConversationIdFilter;a=n?Object(On.e)(t,n):Object(On.f)(t)}if(!a)return null===n||void 0===n||n.reject(jd.a.NOT_FOUND),null;const s=Object(Xb.b)(),{isConversationPath:d,matchedConversationId:l}=Jb(s.location.pathname,s.location.hash),u=!!d,b=`/conversation/${a}`;let p=a,f=[];if(l!==a){if(Object(G.B)(a)){const e=Object(G.f)(a),t=Object(G.e)(e),n=Object(On.m)(c,e);if(p=t,!Gl()(c.ids,n)){const n=yield tc(ep);yield Qi(Object(Pr.a)(e,t,n,r)),f=[xr.t,xr.u]}}else Gl()(c.ids,a)||(yield Qi(Object(Pr.b)({conversationId:a,isPhone:r})),f=[xr.w,xr.x]);for(;!bt()(f);){const[e,t]=yield Ji([Yi(f[0]),Yi(f[1])]);if(p===(st()(e,"payload.conversationResponse.id")||st()(t,"payload.conversationId"))){if(t)throw t.payload.error;break}}}t.silent||(u?s.replace(b):s.push(b),yield tc(Xp)),null===n||void 0===n||n.resolve({conversationId:a})}catch(i){n?n.reject(Object(Bs.a)(i)):Object(cr.b)(i)}finally{(yield Xi(qi,{}))&&n&&n.reject(jd.a.UNEXPECTED_ERROR)}return a}function*Yp(e){let{initialMessages:t,conversationContext:n,createCase:a,additional:o,assignToUser:i,conversationId:c,applicationConfig:r}=e;try{const e=yield ic(D.h),s=Object(Eo.d)(e);let d,l;const u=kp()(t,(e=>{const t=Np()(e)?e:e.message;return!bt()(Bp()(t))}));if(bt()(u))if(bt()(t)&&Re()(t))l=!0,d=[];else{const e=yield ic(D.c),t=Object(On.p)(e,Vs.g);d=Object(On.o)(t),l=Object(On.C)(t)}else{const e=(e=>e.map((e=>Np()(e)?{message:{text:e},isSentByUser:!1}:Np()(e.message)?{...e,message:{text:e.message}}:e)))(u),t=yield Gr();d=Ir()(e.map(((e,n)=>{if(!e.isSentByUser)return e.message.text?Object(Bs.c)(e.message.text,c,`${n}`,e.message.disableManualResponse):void 0;const{maskedText:a,maskedValues:o}=Object(Fp.a)({text:e.message.text,maskingConfigs:r.maskingConfigs});return t.makeTextMessage({text:a||"",conversationId:c,sender:s,maskingDetails:o,disableManualResponse:e.message.disableManualResponse})}))),l=!0}yield Qi({type:xr.M,payload:{conversationId:c,messages:d,conversationContext:n,hasInitialItems:l,createCase:a,assignToUser:i,additional:o}})}catch(s){throw Object(cr.b)(s),s}}function*Qp(e,t){const{payload:{silent:n},promise:a}=t,o=`${Vs.g}_${Pp()()}`;yield tc(Yp,{...t.payload,conversationId:o,applicationConfig:e});const i=yield tc(ep);if(n)yield Qi({type:xr.N,payload:{conversationId:o,appContext:i},promise:a});else{const e=yield tc(Xb.b),{isConversationPath:t}=Jb(e.location.pathname,e.location.hash),n=`/conversation/new/${o}`;t?e.replace(n):e.push(n),yield tc(Xp)}return o}function*Zp(e,t){const{payload:{silent:n,additional:a},promise:o}=t;try{var i;const c=null===(i=e.otherConfigs)||void 0===i?void 0:i.settings;let r=yield ic(D.g),s=yield ic(jt.b);const d=(e,t)=>st()(e,t);$p()(Object(On.z)(Object(On.u)(Object(D.c)(r))))&&(yield Qi({type:xr.C,payload:{}}),yield Yi(xr.db),r=yield ic(D.g),s=yield ic(jt.b));const l=null===a||void 0===a?void 0:a.actionType;if(l===Vs.b.VIDEO_CALL||l===Vs.b.AUDIO_CALL){if(!Object(Vp.b)(e))throw jd.a.NOT_ACCEPTABLE;const t=Object(mt.c)(s);if(!bt()(t))throw yield tc(Kp,Object(Hp.a)({conversationId:t.conversationId,silent:n})),jd.a.LIMIT_REACHED}let u;const{isLocked:b}=Object(Yb.e)({chatState:Object(D.e)(r),chatConversationsState:Object(D.c)(r),customizationSettings:c,getLocaleMessage:d});if(b){if(!l)throw n||(u=yield tc(Kp,Object(Hp.a)({}))),jd.a.LIMIT_REACHED;{const e=Object(On.h)(l===Vs.b.AUDIO_CALL?It.c.AUDIO:It.c.VIDEO);if(u=yield tc(Kp,Object(Hp.a)({conversationId:u,silent:n,fallbackConversationIdFilter:e})),!u)throw jd.a.NOT_FOUND}}else u=yield tc(Qp,e,t);if((l===Vs.b.VIDEO_CALL||l===Vs.b.AUDIO_CALL)&&u){const{creativeId:e,interceptId:t,interceptTargetId:n,sourceButtonId:i,sourceType:c}=a||{},r=l===Vs.b.AUDIO_CALL?It.c.AUDIO:It.c.VIDEO;for(yield nc(Xd,{isPhone:Object(op.b)(),conversationId:u,deflection:{type:r,source:{type:c,creativeId:e,interceptId:t,interceptTargetId:n,sourceButtonId:i}}});;){const[e,t]=yield Ji([Yi(tb.x),Yi(tb.e)]);if(t){null===o||void 0===o||o.reject(jd.a.UNEXPECTED_ERROR);break}if(s=yield ic(jt.b),s.outgoing.state===It.h.WAITING&&(u=e.payload.conversationId,e.payload.hasInitiateSucceeded)){null===o||void 0===o||o.resolve({conversationId:u});break}}}}catch(c){o&&o.reject(Object(Bs.a)(c)),Object(cr.b)(c)}}function*Jp(){try{const{payload:{applicationConfig:e}}=yield Yi(Yc.a);yield ir(Wp.c,Zp,e)}catch(e){Object(cr.b)(e)}}function*ef(){try{yield function(e,t){for(var n=arguments.length,a=new Array(n>2?n-2:0),o=2;o<n;o++)a[o-2]=arguments[o];return nc.apply(void 0,[ar,e,t].concat(a))}(Wp.a,Kp)}catch(e){Object(cr.b)(e)}}var tf=n(355),nf=n.n(tf),af=n(625);const of={[Wr.c.PROGRESS_BAR]:e=>e.status===af.a.ABORTED||e.status===af.a.ERROR},cf=e=>{var t;const n=null===(t=e.messagePayload)||void 0===t?void 0:t.attachment,a=n&&of[n.type];return a&&a(n)};class rf{constructor(){this.queueItems=void 0,this.queueItems=[]}isEmpty(){return 0===this.queueItems.length}put(e){const t=nf()(this.queueItems,(t=>Ar.a.getId(e.message)===Ar.a.getId(t.message)));-1!==t&&this.queueItems.splice(t,1),this.queueItems.push(e)}take(){return this.queueItems.shift()}flush(){return this.queueItems}}const sf="EXTERNAL_MESSAGE_SEND";function*df(e){try{const{message:t,externalMessageId:n}=e,a=yield tc(kr,t);a&&(yield Qi({type:sf,payload:{id:n,message:a}}))}catch(t){Object(cr.b)(t)}}function*lf(e){try{for(;;){const t=yield Yi(e);cf(t.message)||(yield tc(df,t))}}catch(t){Object(cr.b)(t)}}let uf;function*bf(e,t){try{var n;uf||(uf=yield tc(Sc,new rf),yield ac(lf,uf));const a=yield ic(D.c),o=Object(On.f)(Object(On.A)(a)),i=yield ic(D.h),c=Object(Eo.d)(i),r=e.message.text,s=e.isSentByUser?Object(Fp.a)({text:r,maskingConfigs:null===t||void 0===t?void 0:t.maskingConfigs}):{text:r},d=(yield Gr()).makeDynamicMessage({externalMessageId:e.id,messageId:e.sprMsgId,messagePayload:{...e.message,text:null!==(n=s.maskedText)&&void 0!==n?n:s.text,maskingDetails:s.maskedValues},conversationId:e.contextId||o,messageContext:e.messageContext,sender:e.isSentByUser?c:Vs.d});if(!d)return;const l={externalMessageId:e.id,message:d};!e.sprMsgId||cf(d)?yield nc(df,l):yield Qi(uf,l);const{payload:{id:u,message:b}}=yield Yi(sf);return{id:u,message:b}}catch(a){return void Object(cr.b)(a)}}var pf=n(450),ff=n(375);function*yf(e){let{action:t,applicationConfig:n}=e;try{if(t.payload.type!==ed.e)return;const e=yield tc(bf,t.payload.payload,n);if(!e)return void Object(N.a)({topic:pf.R,payload:{error:ff.a.INCORRECT_PAYLOAD,request:t.payload}});const{id:a,message:o}=e;yield Qi(Object($s.m)({id:a,conversationId:null===o||void 0===o?void 0:o.conversationId,messageId:null===o||void 0===o?void 0:o.id})),Object(N.a)({topic:pf.R,payload:{data:{id:a,conversationId:null===o||void 0===o?void 0:o.conversationId,messageId:null===o||void 0===o?void 0:o.id},request:t.payload}})}catch(a){Object(cr.b)(a)}}function*Of(e){let{action:t}=e;try{if(t.payload.type!==ed.d)return;const{payload:e}=t.payload,n=(yield Gr()).makeDynamicMessage({externalMessageId:e.id,messagePayload:{events:ns()(e.event)},conversationId:e.contextId,sender:Vs.d});if(!n)return;yield tc(kr,n)}catch(n){Object(cr.b)(n)}}var vf=n(611),gf=n.n(vf),hf=n(726),jf=n.n(hf);const mf=/\$\{(\w+)\}/g,If=(e,t)=>{const n=Object.keys(t);return jf()(e,mf,((e,a)=>n.includes(a)?t[a]:e))},Cf=(e,t)=>{const{totalUnits:n,completedUnits:a,action:o,status:i}=t,c=e[`progress.${o}.${i}.title`];return If(c,{completedUnits:a,totalUnits:n})},Tf=(e,t)=>{const{totalUnits:n,completedUnits:a,action:o,status:i}=t,c=e[`progress.${o}.${i}.description`];return If(c,{completedUnits:a,totalUnits:n})};class Ef{constructor(){this.queueItems=void 0,this.queueItems=[]}isEmpty(){return 0===this.queueItems.length}put(e){const t=nf()(this.queueItems,(t=>e.action.payload.contextId===t.action.payload.contextId));-1!==t&&this.queueItems.splice(t,1),this.queueItems.push(e)}take(){return this.queueItems.shift()}flush(){return this.queueItems}}const Sf=(e,t)=>`${e}_${t}`,xf=gf()((()=>{const e={};return{get:t=>e[t],set:(t,n)=>{e[t]=n},remove:t=>{delete e[t]}}}));function*_f(e){for(;;)try{const{action:n,localeData:a}=yield Yi(e),{payload:{contextId:o,id:i,data:c,progressContext:r}}=n,s={type:Wr.c.PROGRESS_BAR,title:Cf(a,c),description:Tf(a,c),progress:c.progress,status:c.status,action:c.action,enableCancel:c.enableCancel,enableRetry:c.enableRetry},d={attachment:s,disableManualResponse:c.disableManualResponse},l=yield tc(bf,{contextId:o,id:i,sprMsgId:xf().get(Sf(o,s.action)),message:d,messageContext:r});if(!l)return void Object(N.a)({topic:pf.R,payload:{error:ff.a.INCORRECT_PAYLOAD,request:n}});const{id:u,message:b}=l;yield Qi(Object($s.n)({id:u,conversationId:null===b||void 0===b?void 0:b.conversationId,messageId:null===b||void 0===b?void 0:b.id})),Object(N.a)({topic:pf.R,payload:{data:{id:i,conversationId:null===b||void 0===b?void 0:b.conversationId,messageId:null===b||void 0===b?void 0:b.id},request:n}}),(t=s).status!==af.a.COMPLETED&&(t.status!==af.a.ABORTED&&t.status!==af.a.ERROR||t.enableRetry)?xf().set(Sf(o,s.action),null===b||void 0===b?void 0:b.id):xf().remove(Sf(o,s.action))}catch(n){Object(cr.b)(n)}var t}let Af;function*wf(e){let{action:t,localeData:n}=e;try{if(t.payload.type!==ed.g)return;Af||(Af=yield tc(Sc,new Ef),yield ac(_f,Af)),yield Qi(Af,{action:t.payload,localeData:n})}catch(a){Object(cr.b)(a)}}function*Mf(e,t,n){try{yield Zi([tc(yf,{action:n,applicationConfig:t}),tc(Of,{action:n}),tc(wf,{action:n,localeData:e}),tc(Cp,{action:n})])}catch(a){Object(cr.b)(a)}}function*Rf(e,t,n){try{e&&(yield ir(e,Mf,t,n))}catch(a){Object(cr.b)(a)}}function*Pf(){try{const{payload:{applicationConfig:t}}=yield Yi(Yc.a),n=yield cc(xr.z);let a;for(;;)try{const{payload:{data:e}}=yield Yi(os.c);a&&(yield oc(a)),a=yield nc(Rf,n,e,t)}catch(e){Object(cr.b)(e)}}catch(e){Object(cr.b)(e)}}function*Df(){const e=Object(Te.a)();yield Object(To.h)(e.appId)}function*Nf(){yield ir(So.f,Df)}var Lf=n(424),kf=n(362);function*Uf(e,t){let{payload:n,promise:a}=t;try{if(!bt()(n))switch(n.landingScreen){case Jt.a.KNOWLEDGE_BASE_LIST:{var o,i,c;const t=null!==(o=null===(i=e.cardConfigs)||void 0===i||null===(c=i[0])||void 0===c?void 0:c.cards)&&void 0!==o?o:e.cards,n=Object(Xb.b)(),r=null===t||void 0===t?void 0:t.find((e=>e.type===kf.a.KNOWLEDGE_BASE)),s=nn(n.location.pathname);if(!r)return void a.reject({error:jd.a.NOT_FOUND});s!==Jt.a.KNOWLEDGE_BASE_LIST&&n.push(Lf.b);break}default:return void a.reject({error:jd.a.NOT_FOUND})}Object(G.P)()&&(yield Qi({type:So.d,payload:{}})),a.resolve(void 0)}catch(r){Object(cr.b)(r),a.reject({error:jd.a.UNEXPECTED_ERROR})}}function*Bf(){try{const{payload:{applicationConfig:e}}=yield Yi(Yc.a);yield ir(So.m,Uf,e)}catch(e){Object(cr.b)(e)}}function*Gf(){try{yield Zi([nc(Jp),nc(ef),nc(Pf),nc(Nf),nc(Bf)])}catch(e){Object(cr.b)(e)}}var $f=n(292);const Ff=e=>{const t=Object(On.u)(Object(D.c)(e));return{totalCount:Object(On.B)(t),byExternalCaseIds:Object(On.x)(t)}};function*Vf(){try{let t=yield ic(Ff);for(;;)try{yield Ji({notificationReceived:Yi(xr.S),notificationRead:Yi(xr.R),notificationsReceived:Yi(xr.Q)});const e=yield ic(Ff);t.totalCount!==e.totalCount&&(Object(N.a)({topic:B.m,payload:{data:{count:e.totalCount,additional:{...bt()(e.byExternalCaseIds)?{}:{byExternalCaseIds:e.byExternalCaseIds}}}}}),t=e)}catch(e){Object(cr.b)(e)}}catch(e){Object(cr.b)(e)}}function*Hf(e){try{Object(N.a)({topic:B.g,payload:{data:{type:e.payload.type,payload:{...e.payload.payload,userAuthToken:yield Object(To.a)($f.a.getAppId(Object(Te.a)()))}}}})}catch(t){Object(cr.b)(t)}}function*Wf(){try{yield ir(xr.A,Hf)}catch(e){Object(cr.b)(e)}}function zf(e){try{Object(N.a)({topic:B.f,payload:{data:e.payload.payload},callback:e.payload.callback})}catch(t){Object(cr.b)(t)}}function*qf(){try{yield ir(xr.y,zf)}catch(e){Object(cr.b)(e)}}function*Xf(){try{yield Zi([nc(Vf),nc(Wf),nc(qf)])}catch(e){Object(cr.b)(e)}}var Kf=n(266);async function Yf(e,t){return(await Kf.a.post(`/livechat/upload?conversationId=${t}`,{file:e,fileName:e.name},{multipart:!0})).data}function*Qf(e,t,n){try{if(e.size>t){throw{response:{status:413,statusText:"Payload Too Large"}}}return{token:yield tc(Yf,e,n)}}catch(a){return{error:a}}}var Zf=n(516),Jf=n(539);function ey(e){return Gl()(Jf.c,e)}function ty(e){return new Promise((t=>{if(!e)return void t({});const n=document.createElement("img");n.onload=e=>{const n=e.target;n&&t({height:n.naturalHeight,width:n.naturalWidth})},n.src=e}))}function*ny(e){let{conversationId:t,chatUserId:n,file:a,inReplyToChatMessageId:o,isAttachmentMasked:i,maximumContentLength:c}=e;try{if(ey(a.type)){const e=i?void 0:URL.createObjectURL(a),{height:r,width:s}=yield tc(ty,e),d=yield Gr(),l=yield tc(Pr.p,d.makeImageAttachmentMessage({attachmentProperties:{height:r,width:s,url:e,title:a.name},conversationId:t,sender:n,inReplyToChatMessageId:o}));yield Qi(l);const{token:u,error:b}=yield tc(Qf,a,c,t);if(u){const t=Object(Zf.f)({chatMessage:l.payload.chatMessage,token:u});yield tc(Ur,t),e&&URL.revokeObjectURL(e)}else yield tc(Dr,{chatMessage:l.payload.chatMessage,conversationId:t,transientId:l.payload.chatMessage.id,error:b})}}catch(r){Object(cr.b)(r)}}function ay(e){return Gl()(Jf.e,e)}function oy(e){return new Promise((t=>{const n=document.createElement("video");n.onloadeddata=()=>{n.currentTime=0},n.onseeked=e=>{const a=document.createElement("canvas");a.height=n.videoHeight,a.width=n.videoWidth;const o=a.getContext("2d");if(o){o.drawImage(n,0,0,a.width,a.height);(a.toBlob||a.msToBlob).bind(a)((e=>{const a=e?new File([e],"image.jpg",{type:"image/jpeg"}):null;t({previewImageFile:a,height:n.videoHeight,width:n.videoWidth})}))}},n.src=e,n.load()}))}function*iy(e,t,n){try{return yield tc(Qf,e,t,n)}catch(a){return void Object(cr.b)(a)}}function*cy(e){let{conversationId:t,chatUserId:n,file:a,inReplyToChatMessageId:o,isAttachmentMasked:i,maximumContentLength:c}=e;try{if(ay(a.type)){const e=URL.createObjectURL(a),{previewImageFile:r,height:s,width:d}=yield tc(oy,e),l=URL.createObjectURL(r),u=yield Gr(),b=yield tc(Pr.p,u.makeVideoAttachmentMessage({attachmentProperties:{height:s,width:d,previewImageUrl:i?null:l,url:i?null:e,title:a.name},conversationId:t,sender:n,inReplyToChatMessageId:o}));yield Qi(b);const[{token:p,error:f},{token:y}]=yield Zi([tc(Qf,a,c,t),tc(iy,r,c,t)]);if(p){const t=Object(Zf.g)({chatMessage:Object(Zf.f)({chatMessage:b.payload.chatMessage,token:p}),token:y});yield tc(Ur,t),URL.revokeObjectURL(e),URL.revokeObjectURL(l)}else yield tc(Dr,{chatMessage:b.payload.chatMessage,conversationId:t,transientId:b.payload.chatMessage.id,error:f})}}catch(r){Object(cr.b)(r)}}function ry(e){return Gl()(Jf.a,e)}function*sy(e){let{conversationId:t,chatUserId:n,file:a,inReplyToChatMessageId:o,isAttachmentMasked:i,maximumContentLength:c}=e;try{if(ry(a.type)){const e=i?null:URL.createObjectURL(a),r=yield Gr(),s=yield tc(Pr.p,r.makeAudioAttachmentMessage({attachmentProperties:{url:e,mimeType:a.type,title:a.name},conversationId:t,sender:n,inReplyToChatMessageId:o}));yield Qi(s);const{token:d,error:l}=yield tc(Qf,a,c,t);if(d){const t=Object(Zf.f)({chatMessage:s.payload.chatMessage,token:d});yield tc(Ur,t),e&&URL.revokeObjectURL(e)}else yield tc(Dr,{chatMessage:s.payload.chatMessage,conversationId:t,transientId:s.payload.chatMessage.id,error:l})}}catch(r){Object(cr.b)(r)}}var dy=n(912);const ly={"application/pdf":dy.a.PDF,"text/plain":dy.a.DOCUMENT,"application/msword":dy.a.WORD_DOCUMENT,"application/vnd.openxmlformats-officedocument.wordprocessingml.document":dy.a.WORD_DOCUMENT,"application/vnd.ms-excel":dy.a.EXCEL,"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":dy.a.EXCEL,"application/vnd.ms-powerpoint":dy.a.PRESENTATION,"application/vnd.openxmlformats-officedocument.presentationml.presentation":dy.a.PRESENTATION,"application/onenote":dy.a.ONENOTE,"application/json":dy.a.DOCUMENT};function*uy(e){let{conversationId:t,chatUserId:n,file:a,inReplyToChatMessageId:o,isAttachmentMasked:i,maximumContentLength:c}=e;try{if(!(ey(a.type)||ry(a.type)||ay(a.type))){const e=i?null:URL.createObjectURL(a),r=yield Gr(),s=yield tc(Pr.p,r.makeDocumentAttachmentMessage({attachmentProperties:{url:e,title:a.name,documentType:ly[a.type]},conversationId:t,sender:n,inReplyToChatMessageId:o}));yield Qi(s);const{token:d,error:l}=yield tc(Qf,a,c,t);if(d){const t=Object(Zf.f)({chatMessage:s.payload.chatMessage,token:d});yield tc(Ur,t),e&&URL.revokeObjectURL(e)}else yield tc(Dr,{chatMessage:s.payload.chatMessage,conversationId:t,transientId:s.payload.chatMessage.id,error:l})}}catch(r){Object(cr.b)(r)}}function*by(e,t){try{const{isAttachmentMasked:n,maximumContentLength:a}=e,{conversationId:o,chatUserId:i,file:c,inReplyToChatMessageId:r}=t.payload,s={conversationId:o,chatUserId:i,file:c,inReplyToChatMessageId:r,isAttachmentMasked:n,maximumContentLength:a};yield Zi([tc(ny,s),tc(cy,s),tc(sy,s),tc(uy,s)])}catch(n){Object(cr.b)(n)}}var py=function*(){try{const{payload:{applicationConfig:e}}=yield Yi(Yc.a);yield ir(Wp.b,by,{isAttachmentMasked:!!e.maskAttachment,maximumContentLength:e.maximumContentLength})}catch(e){Object(cr.b)(e)}};let fy;const yy=18e5;function*Oy(e){for(;;)try{let t;yield Yi(rr.b),fy=Date.now(),yield Yi(rr.a),t=Date.now();(e||fy&&t-fy>=yy)&&(fy=void 0,yield Qi({type:rr.k,payload:{}}))}catch(t){Object(cr.b)(t)}}function*vy(e){for(;;)try{let t,n;yield Yi(np),n=Date.now(),yield Yi(tp),t=Date.now();(e||n&&t-n>=yy)&&(yield Qi({type:rr.k,payload:{}}))}catch(t){Object(cr.b)(t)}}function*gy(){try{const e=Object(op.a)();yield Zi([nc(Oy,e),nc(vy,e)])}catch(e){Object(cr.b)(e)}}var hy=n(899);function*jy(){try{for(;;)try{yield Yi(So.g);Object(G.O)()?Object(N.a)({topic:B.d}):yield Qi(Object(Ct.b)())}catch(e){Object(cr.b)(e)}}catch(e){Object(cr.b)(e)}}function*my(){try{for(;;)try{const e=yield Yi(So.l),{isMediaOpen:t}=e.payload;t?Object(N.a)({topic:B.i}):Object(N.a)({topic:B.h})}catch(e){Object(cr.b)(e)}}catch(e){Object(cr.b)(e)}}function*Iy(){try{const{payload:{applicationConfig:e}}=yield Yi(Yc.a);setTimeout((()=>{const t=st()(e,"otherConfigs.theme.icons",{});jr()(t,(e=>{Object(hy.a)(e)}))}),1e4)}catch(e){Object(cr.b)(e)}}function*Cy(){try{yield Zi([nc(jy),nc(my),nc(Iy)])}catch(e){Object(cr.b)(e)}}var Ty=n(448),Ey=n(858);function*Sy(e){try{const{user:t,userContext:n,customUser:a}=e.payload||{},o=Object(Eo.c)(yield ic(jt.h)),i=cs.a.getId(o),c=Object(G.Q)(n);if(!vo()(a)&&Object(as.b)(i)||vo()(a)&&Object(as.a)(t)&&!Object(as.b)(i)||Object(as.b)(i)&&Object(as.e)(t,o)){const e=gr()(Object(Te.a)(),{userContext:{$merge:c},user:{$set:{...Object(Te.a)().user||{},...t||{}}},customUser:{$set:a}});Object(Te.f)(e);const{data:n}=yield tc(is.f,{...o,...t,customContext:c,customUser:a});return yield Qi(Object(Gn.c)({action:an.a.USER_PROFILE_UPDATED})),void(yield Qi({type:os.h,payload:{users:[n]}}))}const r=gr()(Object(Te.a)(),{userContext:{$set:c},user:{$set:t},customUser:{$set:a}});return Object(Te.f)(r),void Object(Ty.e)({shouldReboot:!0,shouldContinueSession:(!vo()(a)||!Object(as.a)(t))&&!Object(as.b)(i)})}catch(t){Object(cr.b)(t)}}function*xy(){try{yield ir(Ey.a,Sy)}catch(e){Object(cr.b)(e)}}function*_y(e,t){try{yield Qi(Object(Ct.i)(e,t))}catch(n){Object(cr.b)(n)}}function*Ay(e,t,n){try{const e=yield ic(D.b),t=Object(P.e)(e),n=Object(Eo.c)(yield ic(jt.h)).userId;let a={};jr()(t,((e,t)=>{a={...a,[t]:e.enabled}})),yield Object(To.o)(n,a)}catch(a){yield tc(_y,e,n),Object(cr.b)(a)}}function*wy(){try{for(;;){const e=yield Yi(So.v),{userPreferenceKey:t,newValue:n,oldValue:a}=e.payload;yield tc(_y,t,n),yield tc(Ay,t,n,a)}}catch(e){Object(cr.b)(e)}}function*My(){try{yield Zi([nc(xy),nc(wy)])}catch(e){Object(cr.b)(e)}}function*Ry(){try{return xc((e=>{const t=()=>{e(Object(Gn.g)(!0))},n=()=>{e(Object(Gn.g)(!1))};return window.addEventListener("online",t),window.addEventListener("offline",n),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",n)}}))}catch(e){Object(cr.b)(e)}}function*Py(){let e;try{for(e=yield tc(Ry);;){const t=yield Yi(e);yield Qi(t)}}catch(t){Object(cr.b)(t)}finally{e&&e.close()}}function Dy(){return xc((e=>{const t=Object(Te.b)();if(!t)return Tn.a;const n=()=>{const t=Object(Rn.d)();t||e({type:rr.b}),t&&e({type:rr.a})};return t.document.addEventListener("visibilitychange",n),()=>{t.document.removeEventListener("visibilitychange",n)}}))}function*Ny(){let e;try{for(e=yield tc(Dy);;){const t=yield Yi(e);yield Qi(t)}}catch(t){Object(cr.b)(t)}finally{e&&e.close()}}var Ly=n(807);function*ky(e){try{const{ssoId:t,conversationId:n,messageId:a,ssoTimeout:o,hiddenIframeBasedSSO:i}=e.payload;i?yield Object(Ly.b)({ssoId:t,conversationId:n,messageId:a}):yield Object(Ly.c)({ssoId:t,conversationId:n,messageId:a,ssoTimeout:o}),e.promise&&e.promise.resolve(),Object(Ty.e)({shouldReboot:!0,shouldContinueSession:!0})}catch(t){e.promise&&e.promise.reject()}}function*Uy(){try{yield ir(rr.c,ky)}catch(e){Object(cr.b)(e)}}function*By(){try{yield Zi([nc(Uy)])}catch(e){Object(cr.b)(e)}}let Gy=!0;function*$y(){try{for(;;)try{yield Yi(So.b),yield Qi({type:So.c,payload:{}})}catch(e){Object(cr.b)(e)}}catch(e){Object(cr.b)(e)}}function*Fy(){try{for(;;)try{yield Yi(So.d),yield Qi({type:So.e,payload:{}})}catch(e){Object(cr.b)(e)}}catch(e){Object(cr.b)(e)}}function*Vy(e){try{var t,n,a,o;let i,c;Gy=!1;const r=new Promise(((e,t)=>{i=e,c=t}));yield Qi(Object(Gn.a)({ssoId:null===(t=e.otherConfigs)||void 0===t||null===(n=t.settings)||void 0===n?void 0:n.autoLoginSSOId,ssoTimeout:null===(a=e.otherConfigs.settings)||void 0===a?void 0:a.ssoTimeout,hiddenIframeBasedSSO:null===(o=e.otherConfigs.settings)||void 0===o?void 0:o.hiddenIframeBasedSSO})({resolve:i,reject:c})),yield r}catch(i){Object(cr.b)(i)}finally{yield nc(Fy),yield Qi({type:So.d,payload:{}})}}function*Hy(){try{const{payload:{applicationConfig:e}}=yield Yi(Yc.a);if(Object(G.O)())return;if(!Gy||!Object(Ly.a)(e))return void(yield nc(Fy));yield Yi(So.d),yield tc(Vy,e)}catch(e){Object(cr.b)(e)}}function*Wy(){try{yield Zi([nc(Hy),nc($y)])}catch(e){Object(cr.b)(e)}}var zy=n(235),qy=n.n(zy),Xy=n(527);var Ky=n(913),Yy=n(914);function*Qy(e){try{const{type:t,buttonId:n,promptId:a}=e.payload,o=yield ic(D.d),i=qy()(o,(e=>e.id===a));if(!i)return;t!==Yy.a.TRIGGERED&&(yield Qi(function(e){return{type:Xy.b,payload:{promptId:e}}}(a)));const c=qy()(i.buttons,(e=>e.id===n));t===Yy.a.ENGAGED&&(null===c||void 0===c?void 0:c.type)===Yy.b.URL&&c.value?window.open(Object(Kb.d)(c.value)):t===Yy.a.ENGAGED&&((null===c||void 0===c?void 0:c.type)===Yy.b.OPEN_LAST_CONVERSATION?yield Qi(Object(Hp.a)({})):(null===c||void 0===c?void 0:c.type)!==Yy.b.CLOSE&&(yield Qi(Object(Hp.b)({initialMessages:Ir()([...we()(i.messages,(e=>{let{text:t,disableManualResponse:n=!1}=e;return{message:{text:t,disableManualResponse:n}}})),c?{isSentByUser:!0,message:c.label}:void 0]),createCase:!!st()(i.additional,"createCase"),silent:!(!c||!Vs.b[c.type]||c.type===Vs.b.NEW_CONVERSATION),additional:{...Hl()(i.additional,["interceptId","creativeId"]),interceptTargetId:n,clickedOnPrompt:!0,actionType:c&&Vs.b[c.type],sourceType:Vs.c.PROACTIVE_PROMPT}})()))),Object(N.a)({topic:B.k,payload:{data:{type:t,id:a,button:c}}})}catch(t){Object(cr.b)(t)}}function*Zy(){try{yield ir(Ky.a,Qy)}catch(e){Object(cr.b)(e)}}var Jy=n(55),eO=n.n(Jy),tO=n(716);function*nO(){try{const{appId:e}=Object(Te.a)();yield tc(tO.a.remove,e)}catch(e){Object(cr.b)(e)}}function*aO(e){try{const{appId:t}=Object(Te.a)(),n=yield tc(tO.a.get,t);yield tc(tO.a.set,t,eO()(n,e.payload.state))}catch(t){Object(cr.b)(t)}}function*oO(){try{for(;;)yield Yi([js.j,js.n,js.p,js.o,js.k,js.l,js.m]),yield Qi({type:So.q,payload:{}}),yield Yi([js.i,js.q,js.h]),yield Qi({type:So.r,payload:{}})}catch(e){Object(cr.b)(e)}}function*iO(){try{yield Zi([nc(oO),ir(js.k,aO),ir([js.h,js.i],nO)])}catch(e){Object(cr.b)(e)}}function*cO(){try{for(;;)yield Yi([tb.g,tb.u,tb.v]),yield Qi({type:So.q,payload:{}}),yield Yi([tb.e,tb.c,tb.n,tb.b]),yield Qi({type:So.r,payload:{}})}catch(e){Object(cr.b)(e)}}var rO=n(447);function sO(e){return e.type===sr.w}function dO(e){return e.type===sr.o}function*lO(e){try{const t=yield ic(D.h),n=Object(Eo.c)(t);yield Zi(e.filter(sO).map((e=>(Object(as.d)(n)||rO.d.emit({type:rO.a,payload:{shouldReboot:e.payload.shouldReboot}}),null))))}catch(t){Object(cr.b)(t)}}function*uO(e){try{yield Zi(e.filter(dO).map((e=>Qi({type:So.j,payload:e.payload}))))}catch(t){Object(cr.b)(t)}}function*bO(e){try{const{events:t}=e.payload;yield Zi([tc(lO,t),tc(uO,t)])}catch(t){Object(cr.b)(t)}}function*pO(){try{yield ir(rr.j,bO)}catch(e){Object(cr.b)(e)}}var fO=n(605),yO=n.n(fO),OO=n(626);function vO(e){const t=()=>{Object(OO.a)().disconnect().then((()=>{Object(L.a)("MQTT Client | Disconnected")})).catch((e=>{Object(vd.f)(e)?console.warn(e):console.error(`MQTT Client | Disconnection Error ${e}`)}))};try{Object(OO.a)().connect().catch((t=>{Object(vd.f)(t)?console.warn(t):console.error(`MQTT Client | Connection Error ${t}`),e(null,{shouldInitPoller:!0})})),function(e){const t=Object(OO.a)();t.on("error",(t=>{Object(L.a)("MQTT Client | Error"),e(null,{shouldInitPoller:!0})})),t.on("offline",(()=>{Object(L.a)("MQTT Client | Offline")})),t.on("reconnect",(()=>{Object(L.a)("MQTT Client | Reconnect")})),t.on("close",(()=>{Object(L.a)("MQTT Client | Closed")})),t.on("connect",(()=>{Object(L.a)("MQTT Client | Connect")}))}(e),Object(OO.a)().subscribe().catch((t=>{Object(vd.f)(t)?console.warn(t):console.error(`MQTT client | Subscribe Error ${t}`),e(null,{shouldInitPoller:!0})})),Object(OO.a)().on("message",((t,n)=>{try{const t=JSON.parse(n.toString());e(t)}catch(a){Object(cr.b)(a)}}))}catch(n){Object(cr.b)(n),t()}return t}var gO=n(888);const hO=()=>{return"A_"+(e=Date.now(),`${Math.floor(e/1e3).toString(16)}0000000000000000`);var e},jO=gf()((()=>{let e=hO();return{set:t=>{e=t||e},get:()=>e}}));let mO=!0;const IO=e=>{let{getLastActiveTimeDifference:t,emitter:n}=e;const a=jO();return()=>function(e){return Object(_r.__awaiter)(this,void 0,void 0,(function*(){const{cursor:t,lastActiveDiff:n,active:a}=e||pe.a;return(yield Kc.a.post("/livechat/event/fetch-notifications"+(t?`?cursor=${t}`:""),{lastActiveDiff:n,active:a},{headers:{"x-chat-auto":!0},backoff:!0})).data}))}({cursor:a.get(),lastActiveDiff:t()}).then((e=>{const{results:t,afterCursor:o,details:i,browserTimeAtServerTime:c}=e,{SERVER_TIMESTAMP:r}=i,s={type:So.o,payload:{serverTimestamp:r,browserTimeAtServerTime:c}};n(null,t,{isFirstCall:mO,serverTimeDifferenceAction:s}),mO=!1,a.set(o)})).catch((e=>{n(Object(vd.c)(e)?e:null,[],{})}))};function CO(e,t){let n;function a(){n&&n.stop()}try{n=function(e,t){const n=IO({getLastActiveTimeDifference:t.getLastActiveTimeDifference,emitter:e});return new gO.a(n,{...t||{},pollInterval:15e3})}(e,t),n.start()}catch{a()}return a}var TO=n(915);const EO=()=>{const e=new Set;return{add:t=>e.add(t),clear:()=>e.clear(),has:t=>e.has(t),delete:t=>e.delete(t)}},SO=EO(),xO=EO(),_O={[sr.t]:e=>{const t=TO.a.getPayload(e).messageId,n={messageId:t,conversationId:TO.a.getConversationId(e),chatMessage:TO.a.getPayload(e).chatMessage};return xO.has(t)?(xO.delete(t),{payload:n,type:sr.s}):{payload:n,type:sr.t}},[sr.s]:e=>({payload:{conversationId:TO.a.getConversationId(e),messageId:TO.a.getPayload(e).messageId,chatMessage:TO.a.getPayload(e).chatMessage},type:sr.s}),[sr.p]:e=>({payload:{...Y()(e.payload.externalEvent,["type","action","conversationId","payload"]),actionType:TO.a.getPayload(e).externalEvent.action,externalParams:TO.a.getPayload(e).externalEvent.payload,contextId:TO.a.getConversationId(e)},type:sr.p}),[sr.u]:e=>({type:TO.a.getPayload(e).event.action,payload:TO.a.getPayload(e).event.payload?JSON.parse(TO.a.getPayload(e).event.payload):{}}),[sr.l]:e=>({payload:{conversationId:TO.a.getConversationId(e),chatUserId:TO.a.getPayload(e).chatUserId},type:sr.l}),[sr.j]:e=>({payload:{conversationId:TO.a.getConversationId(e),sender:TO.a.getSender(e),actionTime:TO.a.getCreationTime(e)},type:sr.j}),[sr.k]:e=>({payload:{conversationId:TO.a.getConversationId(e),sender:TO.a.getSender(e),actionTime:TO.a.getCreationTime(e)},type:sr.k}),[sr.m]:e=>({payload:{conversationId:TO.a.getConversationId(e),sender:TO.a.getSender(e),closed:TO.a.getPayload(e).closed,deleted:TO.a.getPayload(e).deleted,caseNumber:TO.a.getPayload(e).caseNumber,caseId:TO.a.getPayload(e).caseId,expireAssetUntilLastMessageId:TO.a.getPayload(e).lastMessageId,requestClientId:null===e||void 0===e?void 0:e.requestClientId},type:sr.m}),[sr.d]:e=>{const t=TO.a.getPayload(e).audioOnly;return{payload:{videoConversationId:TO.a.getPayload(e).videoConversationId,conversationId:TO.a.getConversationId(e),participantInfos:TO.a.getPayload(e).participantInfos,type:t?It.c.AUDIO:It.c.VIDEO},type:sr.d}},[sr.c]:e=>({payload:{conversationId:TO.a.getConversationId(e),videoConversationId:TO.a.getPayload(e).videoConversationId,videoParticipantId:TO.a.getPayload(e).videoParticipantId},type:sr.c}),[sr.i]:e=>({payload:{conversationId:TO.a.getConversationId(e),videoCallEnabled:TO.a.getPayload(e).videoEnabled,audioCallEnabled:TO.a.getPayload(e).audioEnabled},type:sr.i}),[sr.h]:e=>({payload:{conversationId:TO.a.getConversationId(e),permissions:TO.a.getPayload(e).permissions,videoConversationId:TO.a.getPayload(e).videoConversationId},type:sr.h}),[sr.f]:e=>({payload:{conversationId:TO.a.getConversationId(e),videoConversationId:TO.a.getPayload(e).conversation.id,conversation:TO.a.getPayload(e).conversation,participant:TO.a.getPayload(e).participant},type:sr.f}),[sr.g]:e=>({payload:{conversationId:TO.a.getConversationId(e),videoConversationId:TO.a.getPayload(e).videoChatConversation.id,conversation:TO.a.getPayload(e).videoChatConversation},type:sr.g}),[sr.b]:e=>({payload:{conversationId:TO.a.getConversationId(e),videoConversationId:TO.a.getPayload(e).videoConversationId},type:sr.b}),[sr.e]:e=>({payload:{conversationId:TO.a.getConversationId(e),videoConversationId:TO.a.getPayload(e).videoConversationId},type:sr.e}),[sr.n]:e=>({payload:{status:TO.a.getPayload(e).status},type:sr.n}),[sr.a]:e=>{const{action:t}=TO.a.getPayload(e);return{payload:{additional:{conversationId:TO.a.getConversationId(e),actionIdentifier:t.params.actionIdentifier},request:{url:t.params.httpUrl,method:t.params.httpMethod,payload:t.params.httpPayload,headers:t.params.httpHeaders},id:t.params.requestId,type:t.actionType},type:sr.a}},[sr.o]:e=>{const{request:t,id:n}=e.payload;return{payload:{request:t,id:n,type:t.type},type:sr.o}},[sr.w]:e=>{const{shouldReboot:t}=TO.a.getPayload(e);return{payload:{shouldReboot:t},type:sr.w}},[sr.r]:e=>{const{chatMessage:t}=TO.a.getPayload(e),n=TO.a.getConversationId(e),a={chatMessage:{...t,messagePayload:{...t.messagePayload,isStreaming:!0}},conversationId:n,messageId:t.id};return xO.has(t.id)?{payload:a,type:sr.r}:(xO.add(t.id),{payload:a,type:sr.t})}};function AO(e){try{const t=TO.a.getMessageType(e),n=_O[t];if(n)return n(e)}catch(t){Object(cr.b)(t)}}const wO=e=>{let{notificationEvents:t,currentConversationId:n,isConversationPath:a}=e;return Object(G.D)()?t.filter((e=>((e,t,n)=>{const a=st()(e.payload,"contextId")||st()(e.payload,"conversationId");return!!t&&(!a||!n||n.startsWith(Vs.g)||a===n)})(e,a,n))):t},MO=e=>e.type===rr.a||e.type===rr.d&&st()(e,"payload.status")===hd.a.CONNECTED;var RO=n(728);const PO=(()=>{let e=0,t=!0;return{getLastActiveTimeDifference:()=>t||Object(Rn.d)()?0:Date.now()-e,setAppActive:n=>{t=n,n||(e=Date.now())}}})(),DO=(e,t)=>CO(((t,n,a)=>{let{isFirstCall:o,serverTimeDifferenceAction:i}=a;if(e(Object(Gn.g)(!t)),t)return;i&&e(i);const c=n.filter((e=>!SO.has(e.id))).map(AO).filter((e=>!!e)).filter((e=>!o||!(e=>e.type===sr.f||e.type===sr.d)(e)));e(c),SO.clear()}),{...t,getLastActiveTimeDifference:PO.getLastActiveTimeDifference});function NO(){return xc((e=>{const t=(e=>vO((t=>{if(t){const n=AO(t);if((null===n||void 0===n?void 0:n.type)===sr.r)return void RO.a.emit(n);n&&(SO.add(t.id),e(n))}})))(e);return()=>{t()}}))}function LO(){return xc((e=>{const t=DO(e);return()=>{t()}}))}function kO(){return xc((e=>{const t=DO(e,{enableBackOff:!0});let n;return n=window.setTimeout((()=>{t()}),432e5),()=>{n&&window.clearTimeout(n),t()}}))}const UO=e=>e.type===rr.d,BO=e=>e.type===So.o,GO=e=>!UO(e)&&!BO(e);function*$O(e){try{yield Zi(e.filter(UO).map((e=>Qi(e))))}catch(t){Object(cr.b)(t)}}function*FO(e){try{yield Qi(yO()(e,BO))}catch(t){Object(cr.b)(t)}}function*VO(e){try{let t=e.filter(GO);if(Object(G.D)()){const{isConversationPath:e,conversationId:n}=yield ic(Yb.c);t=t.filter((t=>((e,t,n)=>{const a=st()(e.payload,"contextId")||st()(e.payload,"conversationId");return!!t&&(!a||!n||n.startsWith(Vs.g)||a===n)})(t,e,n)))}bt()(t)||(yield Qi({type:rr.j,payload:{events:t}}),yield Qi(Object(Gn.e)()))}catch(t){Object(cr.b)(t)}}function*HO(e){try{const t=ns()(e);yield Zi([tc($O,t),tc(FO,t),tc(VO,t)])}catch(t){Object(cr.b)(t)}}function*WO(){try{let t,n;try{t=yield tc(kO),n=yield ir(t,HO),yield Yi(rr.a)}catch(e){}finally{t&&t.close(),n&&!n.isCancelled()&&(yield oc(n))}}catch(t){Object(cr.b)(t)}}function*zO(){try{for(;;){yield Yi(rr.b);const[e,t]=yield Ji([Yi(rr.a),rc(18e5)]);if(t)break}}catch(e){Object(cr.b)(e)}}function*qO(){try{let t,n;try{t=yield tc(LO),n=yield ir(t,HO),yield tc(zO)}catch(e){}finally{t&&t.close(),n&&!n.isCancelled()&&(yield oc(n))}}catch(t){Object(cr.b)(t)}}function*XO(){try{for(;;){yield Yi(rr.b);const[e,t]=yield Ji([Yi(rr.a),rc(108e5)]);if(t)break}}catch(e){Object(cr.b)(e)}}function*KO(){try{let t,n;for(;;)try{yield Ji([Yi(rr.h),Yi(rr.a)]),t=yield tc(NO),n=yield ir(t,HO),yield tc(XO)}catch(e){}finally{t&&t.close(),n&&!n.isCancelled()&&(yield oc(n))}}catch(t){Object(cr.b)(t)}}function*YO(){try{for(yield Ji([Yi(rr.g),Yi(rr.a)]);;)yield tc(qO),yield tc(WO)}catch(e){Object(cr.b)(e)}}function*QO(){try{for(;;){const[e,t]=yield Ji([Yi(rr.a),Yi(rr.b)]);PO.setAppActive(!!e)}}catch(e){Object(cr.b)(e)}}function*ZO(){try{yield Yi(Yc.c),SO.clear()}catch(e){Object(cr.b)(e)}}function*JO(){try{yield Zi([nc(KO),nc(YO),nc(QO),nc(ZO)])}catch(e){Object(cr.b)(e)}}let ev=!1;const tv=(()=>{let e=0,t=!0;return{getLastActiveTimeDifference:()=>t||Object(Rn.d)()?0:Date.now()-e,setAppActive:n=>{t=n,n||(e=Date.now())}}})(),nv=e=>(t,n,a)=>{let{isFirstCall:o,serverTimeDifferenceAction:i}=a;if(e(Object(Gn.g)(!t)),t)return;i&&e(i);const c=n.filter((e=>!SO.has(e.id))).map(AO).filter((e=>!!e)).filter((e=>!o||!(e=>e.type===sr.f||e.type===sr.d)(e)));e(c),SO.clear()},av=(e,t)=>CO(nv(e),{...t,getLastActiveTimeDifference:tv.getLastActiveTimeDifference});function ov(){return xc((e=>{const t=(e=>vO(((t,n)=>{if(t){const n=AO(t);if((null===n||void 0===n?void 0:n.type)===sr.r)return void RO.a.emit(n);n&&(SO.add(t.id),e(n))}else null!==n&&void 0!==n&&n.shouldInitPoller&&e(Object(Gn.d)())})))(e);return()=>{t()}}))}function iv(){return xc((e=>{const t=av(e);return()=>{t()}}))}function cv(){return xc((e=>{const t=(e=>{const t=nv(e),n=IO({getLastActiveTimeDifference:tv.getLastActiveTimeDifference,emitter:function(){t(...arguments),e(Tc)}});return n(),Tn.a})(e);return()=>{t()}}))}function rv(){return xc((e=>{const t=av(e,{enableBackOff:!0});let n;return n=window.setTimeout((()=>{t()}),432e5),()=>{n&&window.clearTimeout(n),t()}}))}const sv=e=>"type"in e&&e.type===rr.d,dv=e=>"type"in e&&e.type===rr.g,lv=e=>"type"in e&&e.type===So.o,uv=e=>!sv(e)&&!lv(e)&&!dv(e);function*bv(e){try{yield Zi(e.filter(sv).map((e=>Qi(e))))}catch(t){Object(cr.b)(t)}}function*pv(e){try{yield Qi(yO()(e,lv))}catch(t){Object(cr.b)(t)}}function*fv(e){try{const t=qy()(e,dv);if(!t)return;(yield ic(Id))&&Object(Rn.d)()&&(yield Qi(t))}catch(t){Object(cr.b)(t)}}function*yv(e){try{let t=e.filter(uv);const{isConversationPath:n,conversationId:a}=yield ic(Yb.c);t=wO({notificationEvents:t,isConversationPath:n,currentConversationId:a}),bt()(t)||(yield Qi({type:rr.j,payload:{events:t}}))}catch(t){Object(cr.b)(t)}}function*Ov(e){try{const t=ns()(e);yield Zi([tc(bv,t),tc(pv,t),tc(yv,t),tc(fv,t)])}catch(t){Object(cr.b)(t)}}function*vv(){try{let t,n;try{ev=!0,t=yield tc(rv),n=yield ir(t,Ov),yield Yi(rr.a)}catch(e){}finally{ev=!1,t&&t.close(),n&&!n.isCancelled()&&(yield oc(n))}}catch(t){Object(cr.b)(t)}}function*gv(){try{for(;;){yield Yi(rr.b);const[e,t]=yield Ji([Yi(rr.a),rc(18e5)]);if(t)break}}catch(e){Object(cr.b)(e)}}function*hv(){try{let t,n;try{ev=!0,t=yield tc(iv),n=yield ir(t,Ov),yield tc(gv)}catch(e){}finally{ev=!1,t&&t.close(),n&&!n.isCancelled()&&(yield oc(n))}}catch(t){Object(cr.b)(t)}}function*jv(){try{for(;;){yield Yi(rr.b);const[e,t]=yield Ji([Yi(rr.a),rc(108e5)]);if(t)break}}catch(e){Object(cr.b)(e)}}function*mv(){try{let t,n;for(;;)try{yield Ji([Yi(rr.h),Yi(rr.a)]),t=yield tc(ov),n=yield ir(t,Ov),yield tc(jv)}catch(e){}finally{t&&t.close(),n&&!n.isCancelled()&&(yield oc(n))}}catch(t){Object(cr.b)(t)}}function*Iv(){try{for(yield Yi(rr.g);;)yield tc(hv),yield tc(vv)}catch(e){Object(cr.b)(e)}}function*Cv(){try{const e=yield tc(cv);for(;;){const t=yield Yi(e);yield nc(Ov,t)}}catch(e){Object(cr.b)(e)}}function*Tv(e){try{var t;for(null!==e&&void 0!==e&&null!==(t=e.filterStats)&&void 0!==t&&t.noOfOpenConversations||(yield tc(Cv));;)yield Yi(MO),ev||(yield tc(Cv))}catch(n){Object(cr.b)(n)}}function*Ev(){try{for(;;){const[e,t]=yield Ji([Yi(rr.a),Yi(rr.b)]);tv.setAppActive(!!e)}}catch(e){Object(cr.b)(e)}}function*Sv(){try{yield Yi(Yc.c),SO.clear()}catch(e){Object(cr.b)(e)}}function*xv(e){try{yield Zi([nc(Tv,e),nc(mv),nc(Iv),nc(Ev),nc(Sv)])}catch(t){Object(cr.b)(t)}}function*_v(){try{var e;const{payload:{applicationConfig:t,handshakeDetails:n}}=yield Yi(Yc.a);!(null===(e=t.otherConfigs.settings)||void 0===e||!e.delayInitializePoller)?yield nc(xv,n):yield nc(JO)}catch(t){Object(cr.b)(t)}}var Av=n(493);function wv(e){return e.type===sr.a}function*Mv(e){try{yield Zi(e.filter(wv).map((e=>Qi({type:Av.a,payload:e.payload}))))}catch(t){Object(cr.b)(t)}}function*Rv(e){try{const{events:t}=e.payload;yield Zi([tc(Mv,t)])}catch(t){Object(cr.b)(t)}}function*Pv(){try{yield ir(rr.j,Rv)}catch(e){Object(cr.b)(e)}}const Dv=new(n(673).a),Nv=async e=>{const{method:t="GET",url:n="",payload:a=pe.a,headers:o=pe.a}=e;let i,c;try{const e="POST"===t||"PUT"===t?await Dv[t.toLowerCase()](n,a,{withCredentials:!0,headers:o}):await Dv[t.toLowerCase()](n,{withCredentials:!0,headers:o});i=e.request.status,c=e.request.responseText}catch(r){Object(cr.b)(r),Object(vd.f)(r)?(i=r.request.status,c=r.request.responseText):(i=500,c="")}return{status:i,responseText:c}},Lv=async e=>{const{status:t,responseText:n}=await Nv(e.request);await Kc.a.post("livechat/conversation/process-endpoint-response",{status:t,response:n,id:e.id})},kv=async e=>{const{request:t,additional:n,id:a}=e,{status:o,responseText:i}=await Nv(t);await Kc.a.post(`/livechat/cart/on-add-to-cart/${n.conversationId}`,{status:o,responseText:i,actionIdentifier:n.actionIdentifier,requestId:a})},Uv=e=>Kc.a.post("/livechat/cart/update-cart",e),Bv=e=>Kc.a.post("/livechat/cart/remove-from-cart",e);function*Gv(e){try{const{type:t,request:n,additional:a,id:o}=e.payload;"HTTP_REQUEST"===t&&(yield tc(kv,{request:n,additional:a,id:o}))}catch(t){Object(cr.b)(t)}}function*$v(){try{yield ir(Av.a,Gv)}catch(e){Object(cr.b)(e)}}var Fv=n(489);const Vv={presence:!0,format:{pattern:"^(?!\\s*$).+",message:"can only be non-empty string"}},Hv={modifiedTime:{type:"number"},productItems:{array:{each:{sku:Vv,productCategory:{type:"string"},quantity:{type:"number"},standardPrice:{type:"number"},standardCurrency:{type:"string"},title:{type:"string"},description:{type:"string"}}}}},Wv={modifiedTime:{type:"number"},productItems:{array:{each:{sku:Vv,quantity:{type:"number"}}}}};function*zv(e){try{const n=(t=e.payload,Object(Fv.a)(t,Hv));if(n)return void Object(L.a)("Invalid payload passed to update cart, please check",n);yield tc(Uv,e.payload)}catch(n){Object(cr.b)(n)}var t}function*qv(){try{yield ir(Av.c,zv)}catch(e){Object(cr.b)(e)}}function*Xv(e){try{const n=(t=e.payload,Object(Fv.a)(t,Wv));if(n)return void Object(L.a)("Invalid payload passed to remove from cart, please check",n);yield tc(Bv,e.payload)}catch(n){Object(cr.b)(n)}var t}function*Kv(){try{yield ir(Av.b,Xv)}catch(e){Object(cr.b)(e)}}function*Yv(){try{yield Zi([nc(Pv),nc($v),nc(qv),nc(Kv)])}catch(e){Object(cr.b)(e)}}function*Qv(e){try{const{type:t,request:n,id:a}=e.payload;"HTTP_REQUEST"===t&&(yield tc(Lv,{request:n,id:a}))}catch(t){Object(cr.b)(t)}}function*Zv(){try{yield ir(So.j,Qv)}catch(e){Object(cr.b)(e)}}var Jv=n(916);const eg="CANCEL_ACTION_TYPE",tg=e=>{let{sessionManagedByClient:t}=e,n=null;const a=e=>{let{sessionExpiryTimeInMinutes:t,sessionExpiryAlertTime:o}=e;try{Object(Jv.a)(),n=setTimeout((()=>{a({sessionExpiryTimeInMinutes:t,sessionExpiryAlertTime:o})}),((e,t)=>{const n=60*e*1e3-t,a=60*e*1e3/3;return n<=a?Math.max(n-2e3,0):a})(t,o))}catch(i){Object(cr.b)(i)}};return{startHandler:t?function*(){try{for(;;){yield Qi(Object(Gn.c)({label:an.a.SESSION_ACTIVE.label,action:an.a.SESSION_ACTIVE}));const{cancel:e}=yield Ji({delay:rc(15e3),cancel:Yi(eg)});if(e)break}}catch(e){Object(cr.b)(e)}}:a,stopHandler:function*(){try{n&&clearTimeout(n),yield Qi({type:eg,payload:{}})}catch(e){Object(cr.b)(e)}}}};function*ng(){try{var e,t,n;const{payload:{applicationConfig:o}}=yield Yi(Yc.a);let i=0;const c=o.autoExpireUserSessionTimeInMinutes,r=null===(e=o.otherConfigs.settings)||void 0===e||null===(t=e.autoExpiryConfig)||void 0===t?void 0:t.alertTime,s=c&&r,d=null===(n=o.otherConfigs.settings)||void 0===n?void 0:n.sendSessionActiveEvent;if(!s&&!d)return;const{startHandler:l,stopHandler:u}=yield tc(tg,{sessionManagedByClient:d});try{const e=yield cc([So.q,So.r]);for(;;){(yield Yi(e)).type===So.q?(i||(yield nc(l,{sessionExpiryTimeInMinutes:c,sessionExpiryAlertTime:r})),i+=1):i-=1,i||(yield tc(u))}}catch(a){Object(cr.b)(a)}finally{yield tc(u)}}catch(a){Object(cr.b)(a)}}var ag=n(19),og=n.n(ag),ig=n(693),cg=n(691),rg=n(862),sg=n(600),dg=n(861);var lg=async e=>{let t,{applicationConfig:a,preloadedState:o,shouldContinueSession:i}=e;try{sg.a.reset(),Object(cg.e)(cg.a.PENDING),t=await Object(ig.b)(Object(Te.a)()),Object(ig.h)({handshakeDetails:t}),Object(rg.b)(t.chatUser),a.hasPrompts&&n.e(58).then(n.bind(null,1483)).then((e=>{let{default:n}=e;n(a,t)})),jg(null,{applicationConfig:a,handshakeDetails:t,chatSettings:Object(Te.a)(),subscribeToEvent:ig.f,preloadedState:o,shouldContinueSession:i})}catch(c){const e=$f.a.getUserSettings(Object(Te.a)());Object(vd.e)(c)&&e&&dg.a.getOneTimeToken(e)?jg(c,{applicationConfig:a,handshakeDetails:t,chatSettings:Object(Te.a)(),subscribeToEvent:ig.f,preloadedState:o,shouldContinueSession:i}):await Object(ig.e)()}};function*ug(){try{const{payload:{applicationConfig:a}}=yield Yi(Yc.a);for(;;)try{var e,t;const{payload:{shouldContinueSession:n}}=yield Yi(Yc.b);let o;const i=null===(e=window.sprChatSettings)||void 0===e||null===(t=e.user)||void 0===t?void 0:t.isSSOAuthorized;n&&!i&&(o=yield ic(og.a)),yield lg({applicationConfig:a,preloadedState:o,shouldContinueSession:n})}catch(n){Object(cr.b)(n)}}catch(n){Object(cr.b)(n)}}function*bg(){try{yield Zi([nc(Ip),nc(Zy),nc(Gf),nc(Xf),nc(py),nc(Py),nc(Ny),nc(gy),nc(My),nc(Mp),nc(iO),nc(cO),nc(pO),nc(_v),nc(Yv),nc(Zv),nc(ng)])}catch(e){Object(cr.b)(e)}}function*pg(){try{yield Yi(Yc.c),Object(ig.d)()}catch(e){Object(cr.b)(e)}}function*fg(){try{yield Zi([nc(Cy),nc(ug),nc(Wy),nc(By),nc(pg)])}catch(e){Object(cr.b)(e)}}function*yg(){try{yield nc(fg);const e=yield nc(bg);yield Yi(Yc.c),yield rc(0),yield oc(e)}catch(e){Object(cr.b)(e)}}function*Og(){try{yield Zi([nc(qb),nc(yg)])}catch(e){console.log(e)}}const vg=function(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return(new Qc).setReducer(D.a).setSaga(Og).setPreloadedState(a).setHTTPClient(Kf.a).setApplicationConfig(e).setHandshakeDetails(t).setChatSettings(n).build()};function gg(e){let{applicationConfig:t,store:n,history:a}=e;const o=Object(Te.b)().document,i=Object(G.O)()?G.b:G.c;c.a.render(Object(r.jsx)(Go,{applicationConfig:t,history:a,store:n}),i(o,Ee.a))}function hg(e,t){let{applicationConfig:n,handshakeDetails:a,chatSettings:o,subscribeToEvent:i}=t;const c=Object(Xb.b)({isUnauthorized:!!e}),r=vg(n,a,o);Object(OO.b)(a,n);i((t=>{e||r.dispatch(t)})),gg({applicationConfig:n,store:r,history:c})}function jg(e,t){let{applicationConfig:n,handshakeDetails:a,chatSettings:o,subscribeToEvent:i,preloadedState:c,shouldContinueSession:r}=t;const s=Object(Xb.b)({isUnauthorized:!!e,reset:!r}),d=vg(n,a,o,c);Object(OO.b)(a,n);i((t=>{e||d.dispatch(t)})),gg({applicationConfig:n,store:d,history:s}),r?s.goBack():s.go(s.entries.length-1)}},792:function(e,t,n){"use strict";n.d(t,"b",(function(){return Ye})),n.d(t,"a",(function(){return Ze}));var a=n(600),o=n(262),i=n(690),c=n(691),r=n(857),s=n(375),d=n(281),l=n.n(d),u=n(31),b=n.n(u),p=n(316);const f="APP_AVAILABLE",y="APP_IN_SESSION";var O=n(0),v=n(1);function g(e,t){const n=Object(O.Q)(t);if(b()(n))return;const a=l()(Object(v.a)(),{userContext:{$merge:n}});Object(v.f)(a),e({type:p.g,payload:n})}g.dependecies=[y];var h=n(858);function j(e,t){e({type:h.a,payload:t})}j.dependecies=[y];var m=n(242),I=n(229);function C(e){e({type:m.f,payload:I.a})}function T(e,t,n){new Promise(((n,a)=>{e({type:m.m,payload:null!==t&&void 0!==t?t:I.a,promise:{resolve:n,reject:a}})})).then((e=>{null===n||void 0===n||n({data:e})})).catch((e=>{null===n||void 0===n||n({error:e})}))}C.dependecies=[y],T.dependecies=[f];var E=n(355),S=n.n(E),x=n(217),_=n.n(x),A=n(665);const w=e=>{let{topic:t,legacySubscriberMap:n,legacySubscriber:a,newSubscriber:o}=e;return Object(A.b)(_.a,{topic:t,subscriber:o}),n.push({legacySubscriber:a,newSubscriber:o}),n},M=e=>{let{topic:t,legacySubscriberMap:n,legacySubscriber:a}=e;const o=S()(n,(e=>{let{legacySubscriber:t}=e;return t===a}));return-1!==o&&(Object(A.c)(_.a,{topic:t,subscriber:n[o].newSubscriber}),n.splice(o,1)),n};var R=n(257);function P(e){Object(O.P)()&&e({type:m.b,payload:I.a})}P.dependecies=[f];let D=[];var N=n(8),L=n.n(N);let k=[];let U=[];var B=n(527);function G(e,t){e({type:B.a,payload:t})}function $(e,t){e({type:B.b,payload:{promptId:t.id}})}G.dependecies=[y,f],$.dependecies=[y];let F=[];var V=n(2),H=n.n(V),W=n(5),z=n.n(W),q=n(284),X=n(492);function K(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return e?t:n}var Y=n(450),Q=n(49);const Z=e=>{var t;const n=null===(t=e.additional)||void 0===t?void 0:t.actionType;return n&&Object.prototype.hasOwnProperty.call(Q.b,n)?Q.b[n]:void 0};function J(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=H()(t)?t:L()(t,"initialMessages");new Promise(((a,o)=>{var i;e(Object(X.b)({initialMessages:n,conversationContext:L()(t,"conversationContext"),assignToUser:L()(t,"assignToUser"),createCase:!!L()(t,"autoInitiateConversation"),additional:!H()(t)&&z()(t)?{...t.additional,externalCaseId:t.id,actionType:Z(t),sourceType:(null===(i=t.additional)||void 0===i?void 0:i.sourceType)||Q.c.SDK}:void 0,silent:!!L()(t,"silent")})({resolve:a,reject:o}))})).then((e=>{let{conversationId:n,caseNumber:a}=e;Object(q.a)({topic:Y.M,payload:{data:{conversationId:n,...K(!!a,{caseNumber:a})},request:t}})})).catch((e=>{Object(q.a)({topic:Y.M,payload:{error:e,request:t}})}))}J.dependecies=[y,f];var ee=n(356);function te(e,t){const n=Object(ee.b)();0!==n.index?(n.goBack(),t(!0)):t(!1)}te.dependecies=[f];var ne=n(272),ae=n.n(ne),oe=n(243);function ie(e,t){ae()(t.payload)?Object(q.a)({topic:Y.R,payload:{error:s.a.INCORRECT_PAYLOAD,request:t}}):e({type:oe.z,payload:t})}ie.dependecies=[y,f];var ce=n(692);function re(e,t){const n={...t,context:Object(O.Q)(t.context)};new Promise(((a,o)=>{const i=t.conversationId;ce.a.info({chatConversationId:i,message:`${i}: updateConversationContext SDK called`,additionalDetails:{params:n}}),e({type:oe.k,payload:n,promise:{resolve:a,reject:o}})})).then((e=>{Object(q.a)({topic:Y.X,payload:{data:e,request:{...n,conversationId:n.conversationId||e.conversationId},shouldLogEvent:!0}})})).catch((e=>{Object(q.a)({topic:Y.X,payload:{error:e,request:n,shouldLogEvent:!0}})}))}function se(e,t){const n=Object(O.Q)(t);if(b()(n))return;const a=l()(Object(v.a)(),{clientContext:{$merge:n}});Object(v.f)(a),e({type:oe.e,payload:{context:n}})}re.dependecies=[y],se.dependecies=[f];let de=[];let le=[];let ue=[];let be=[];function pe(e){Object(O.P)()&&e({type:m.i,payload:I.a})}function fe(e){Object(O.P)()&&e({type:m.h,payload:I.a})}pe.dependecies=[y],fe.dependecies=[f];let ye=[];var Oe=n(493);function ve(e,t){e({type:Oe.c,payload:t})}function ge(e,t){e({type:Oe.b,payload:t})}ve.dependecies=[y],ge.dependecies=[y];var he=n(81),je=n.n(he),me=n(266),Ie=n(489);Ie.a.validators.type.types.MobileClientType=function(e){return"IPHONE"===e||"IPHONE_VOIP"===e||"ANDROID"===e||"WINDOWS"===e||"WINDOWS_UNIVERSAL"===e};const Ce={mobileClientType:{type:"MobileClientType",presence:!0},appVersion:{type:"number",presence:!0},deviceId:{type:"string",presence:!0},deviceName:{type:"string"}},Te=Object.assign(Object.assign({},Ce),{deviceToken:{type:"string",presence:!0}});function Ee(e,t){if(t.appVersion=je()(t.appVersion),n=t,Object(Ie.a)(n,Te))throw Object(o.a)("Invalid device registration payload",t),new Error(s.a.INCORRECT_PAYLOAD);var n;return me.a.post("/livechat/event/push/register-device",t).then((()=>({}))).catch((()=>{throw new Error(s.a.NETWORK_FAILURE)}))}Ee.dependecies=[y];let Se=[];function xe(e,t){if(t.appVersion=je()(t.appVersion),n=t,Object(Ie.a)(n,Ce))throw Object(o.a)("Invalid device unregistration payload",t),new Error(s.a.INCORRECT_PAYLOAD);var n;return me.a.post("/livechat/event/push/unregister-device",t).then((()=>({}))).catch((()=>{throw new Error(s.a.NETWORK_FAILURE)}))}xe.dependecies=[y];let _e=[];let Ae=[];var we=n(302),Me=n(199);function Re(e,t){const{type:n,...a}=t;switch(n){case we.t:{const t=a.cId;new Promise(((n,a)=>{e(Object(X.a)({conversationId:t},{resolve:n,reject:a}))})).catch((e=>{Object(Me.b)(e)}));break}}}Re.dependecies=[y,f];var Pe=n(33),De=n.n(Pe);const Ne=e=>{Be(_.a,e)};let Le=null,ke=Ne;function Ue(e,t){De()(t)&&(ke=t)}function Be(e,t){Le&&(Le(t),Le=null)}Object(A.b)(_.a,{topic:R.j,subscriber:e=>{let{response:t}=e;const{data:n={}}=t||{},{callBack:a,permissions:o}=n;Le=a,ke(o)}});const Ge=(e,t,n)=>{e({type:m.a,payload:{id:t.id,filters:t.filters,cb:n}})};Ge.dependecies=[y];const $e=(e,t)=>{e({type:m.n,payload:{id:t.id}})};$e.dependecies=[y];const Fe=e=>{me.a.post("/livechat/conversation/fetchAgentAvailabilityDetails").then((e=>{Object(q.a)({topic:Y.g,payload:{data:e.data}})})).catch((()=>{Object(q.a)({topic:Y.g,payload:{error:s.a.NETWORK_FAILURE}})}))};Fe.dependecies=[y];var Ve=n(449);function He(e,t){new Promise(((n,a)=>{const o=z()(t)?t:{conversationId:t};o.externalCaseId&&o.conversationId?a(Ve.a.NOT_ACCEPTABLE):e(Object(X.a)(o,{resolve:n,reject:a}))})).catch((e=>{Object(Me.b)(e)}))}He.dependecies=[y,f];var We=n(860);function ze(e,t,n){new Promise(((n,a)=>{e({type:p.f,payload:{locale:t},promise:{resolve:n,reject:a}})})).then((e=>{null===n||void 0===n||n({data:e})})).catch((e=>{null===n||void 0===n||n({error:e})}))}ze.dependecies=[y,f];var qe=n(17);const Xe={[Y.ab]:[g],[Y.bb]:[j],[Y.K]:[T],[Y.d]:[P],[Y.J]:[function(e,t){k=w({topic:R.m,legacySubscriberMap:k,legacySubscriber:t,newSubscriber:e=>{let{response:{data:n}}=e;t(L()(n,"count"))}})}],[Y.v]:[function(e,t){k=M({topic:R.m,legacySubscriberMap:k,legacySubscriber:t})}],[Y.D]:[function(e,t){U=w({topic:R.g,legacySubscriberMap:U,legacySubscriber:t,newSubscriber:e=>{let{response:{data:n}}=e;t(n)}})}],[Y.q]:[function(e,t){U=M({topic:R.g,legacySubscriberMap:U,legacySubscriber:t})}],[Y.y]:[function(e,t){D=w({topic:R.d,legacySubscriberMap:D,legacySubscriber:t,newSubscriber:()=>{t()}})}],[Y.l]:[function(e,t){D=M({topic:R.d,legacySubscriberMap:D,legacySubscriber:t})}],[Y.f]:[pe],[Y.e]:[fe],[Y.x]:[function(e,t){Ae=w({topic:R.c,legacySubscriberMap:Ae,legacySubscriber:t,newSubscriber:e=>{let{response:{data:n}}=e;t(n.isChatVisible)}})}],[Y.k]:[function(e,t){Ae=M({topic:R.c,legacySubscriberMap:Ae,legacySubscriber:t})}],[Y.S]:[A.b],[Y.U]:[A.c],[Y.a]:[Ge],[Y.P]:[$e],[Y.N]:[G],[Y.b]:[$],[Y.G]:[function(e,t){F=w({topic:R.k,legacySubscriberMap:F,legacySubscriber:t,newSubscriber:e=>{let{response:{data:n}}=e;t(n)}})}],[Y.s]:[function(e,t){F=M({topic:R.k,legacySubscriberMap:F,legacySubscriber:t})}],[Y.M]:[J],[Y.R]:[ie],[Y.c]:[C],[Y.X]:[re],[Y.W]:[se],[Y.Z]:[function(e,t,n){new Promise(((n,a)=>{const o=Object(v.a)().skin===qe.a;!t||!O.a.includes(t)||o&&"DARK"===t?a(s.a.INCORRECT_PAYLOAD):(Object(v.f)({themeMode:t}),e({type:m.t,payload:{themeMode:t},promise:{resolve:n,reject:a}}))})).then((e=>{null===n||void 0===n||n({data:e})})).catch((e=>{null===n||void 0===n||n({error:e})}))}],[Y.I]:[function(e,t){ue=w({topic:R.i,legacySubscriberMap:ue,legacySubscriber:t,newSubscriber:()=>{t()}})}],[Y.u]:[function(e,t){ue=M({topic:R.i,legacySubscriberMap:ue,legacySubscriber:t})}],[Y.z]:[function(e,t){be=w({topic:R.h,legacySubscriberMap:be,legacySubscriber:t,newSubscriber:()=>{t()}})}],[Y.m]:[function(e,t){be=M({topic:R.h,legacySubscriberMap:be,legacySubscriber:t})}],[Y.C]:[function(e,t){ye=w({topic:R.e,legacySubscriberMap:ye,legacySubscriber:t,newSubscriber:e=>{let{response:{data:n}}=e;t(n)}})}],[Y.p]:[function(e,t){ye=M({topic:R.e,legacySubscriberMap:ye,legacySubscriber:t})}],[Y.g]:[Fe],[Y.L]:[He],[Y.cb]:[function(e,t){const n=t.details.status;We.a[n]?e({type:m.u,payload:t}):(Object(o.a)("Invaild status code",n),Object(q.a)({topic:m.u,payload:{data:t,error:s.a.INCORRECT_PAYLOAD}}))}],[Y.Y]:[ze],[Y.V]:[ve],[Y.Q]:[ge],[Y.O]:[Ee,function(e,t){Object(q.a)({topic:R.l,payload:{data:t,error:e}})}],[Y.A]:[function(e,t){Se=w({topic:R.l,legacySubscriberMap:Se,legacySubscriber:t,newSubscriber:e=>{let{response:{error:n}}=e;t(n)}})}],[Y.n]:[function(e,t){Se=M({topic:R.l,legacySubscriberMap:Se,legacySubscriber:t})}],[Y.T]:[xe,function(e,t){Object(q.a)({topic:R.n,payload:{data:t,error:e}})}],[Y.B]:[function(e,t){_e=w({topic:R.n,legacySubscriberMap:_e,legacySubscriber:t,newSubscriber:e=>{let{response:{error:n}}=e;t(n)}})}],[Y.o]:[function(e,t){_e=M({topic:R.n,legacySubscriberMap:_e,legacySubscriber:t})}],[Y.w]:[function(e,t){de=w({topic:R.a,legacySubscriberMap:de,legacySubscriber:t,newSubscriber:()=>{t()}})}],[Y.j]:[function(e,t){de=M({topic:R.a,legacySubscriberMap:de,legacySubscriber:t})}],[Y.E]:[function(e,t){le=w({topic:R.b,legacySubscriberMap:le,legacySubscriber:t,newSubscriber:e=>{let{response:{error:n}}=e;t(n)}})}],[Y.r]:[function(e,t){le=M({topic:R.b,legacySubscriberMap:le,legacySubscriber:t})}],[Y.h]:[te],[Y.F]:[Re],[Y.H]:[Ue],[Y.t]:[function(e){Ue(0,Ne)}],[Y.i]:[Be]},Ke=async()=>{if(!r.a.isEmpty()){const[e,...t]=r.a.popNextCmd();await Ze(r.a.getBufferQueue(),e,...t),await Ke()}},Ye=async()=>{r.a.isFlushingInProgress()?r.a.setIsReFlushPending(!0):(r.a.setIsFlushingInProgress(!0),await Ke(),r.a.setIsFlushingInProgress(!1),r.a.isEmpty(r.a.getBufferQueue())||r.a.move(r.a.getBufferQueue(),r.a.getQueue()),r.a.isReFlushPending()&&(r.a.setIsReFlushPending(!1),await Ye()))};async function Qe(e,t,n){if(!t)return;for(var i=arguments.length,c=new Array(i>3?i-3:0),r=3;r<i;r++)c[r-3]=arguments[r];const s=[a.a.emit.bind(a.a),...c];try{const e=await t(...s);n&&n(void 0,e)}catch(d){Object(o.a)(d),n&&n(d)}}async function Ze(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.a.getQueue(),t=arguments.length>1?arguments[1]:void 0;const n=Xe[t]&&Xe[t][0],a=Xe[t]&&Xe[t][1],o=n&&n.dependecies&&n.dependecies.includes(f),d=n&&n.dependecies&&n.dependecies.includes(y);for(var l=arguments.length,u=new Array(l>2?l-2:0),b=2;b<l;b++)u[b-2]=arguments[b];if(d||o)return o&&!d?Object(i.b)()?void(a&&a(s.a.CHAT_UNAVAILABLE)):Object(i.a)()?void r.a.addCmdToQueue(e,[t,...u]):void Qe(t,n,a,...u):d&&!o?Object(c.c)()||Object(c.b)()?void(a&&a(s.a.CHAT_UNAVAILABLE)):Object(c.d)()?void r.a.addCmdToQueue(e,[t,...u]):void Qe(t,n,a,...u):void(Object(c.c)()||Object(c.b)()||Object(i.b)()?a&&a(s.a.CHAT_UNAVAILABLE):Object(c.d)()||Object(i.a)()?r.a.addCmdToQueue(e,[t,...u]):Qe(t,n,a,...u));Qe(t,n,a,...u)}},807:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"c",(function(){return b})),n.d(t,"b",(function(){return p}));var a=n(295),o=n(1),i=n(291),c=n(448),r=n(677);const s=async e=>{let{ssoId:t,conversationId:n,messageId:c}=e;const r=await(async e=>{let{ssoId:t,conversationId:n,messageId:a}=e;const{appId:c}=Object(o.a)(),r=[{key:"idpId",value:t},{key:"x-chat-token",value:await Object(i.a)(c)}];return n&&r.push({key:"conversationId",value:n}),a&&r.push({key:"messageId",value:a}),r})({ssoId:t,conversationId:n,messageId:c});return`https://www.samsung.com/chat/api/livechat/authenticate/begin?${Object(a.f)(r)}`},d=e=>{var t,n,a;return(null===(t=Object(o.a)().user)||void 0===t?void 0:t.isSSOAuthorized)&&!(null===(n=e.otherConfigs)||void 0===n||null===(a=n.settings)||void 0===a||!a.autoLoginSSOId)},l=()=>Object(r.a)({src:`https://live-chat-static.sprinklr.com/api/livechat/authenticate/listener.html?appId=${Object(o.a)().appId}`,id:"subscriberIframe"}),u=e=>new Promise(((t,n)=>{const a=Object(c.d)("/logout",(()=>{d()})),r=async e=>{if(e.origin.match(/(sprinklr\.com)/g)&&"string"===typeof e.data)try{const{params:n}=JSON.parse(e.data);await Object(i.l)(Object(o.a)().appId,n.authToken),t(n)}catch{n()}finally{s()}},s=()=>{l(),a&&a(),window.removeEventListener("message",r)},d=()=>{s(),n()},l=e(d);window.addEventListener("message",r)})),b=async e=>{let{ssoId:t,conversationId:n,messageId:a,ssoTimeout:o}=e;const i=(e=>{const t=window.screen.width/2,n=window.screen.height/2,a=t-t/2,o=n-n/2;return window.open(e,"_blank",`height=${n},width=${t},top=${o},left=${a}`)})(await s({ssoId:t,conversationId:n,messageId:a})),{removeIframe:c}=l();return u((e=>{i||e();const t=setInterval((()=>{i&&i.closed&&e()}),1500);let n;return o&&(n=setTimeout((()=>{e()}),o)),()=>{clearInterval(t),n&&clearTimeout(n)}})).finally((()=>{i&&i.close(),c()}))},p=async e=>{let{ssoId:t,conversationId:n,messageId:a}=e;const{removeIframe:o}=Object(r.a)({src:await s({ssoId:t,conversationId:n,messageId:a}),id:"spr-live-chat-hidden-iframe-sso"}),{removeIframe:i}=l();return u((e=>{const t=setTimeout(e,1e4);return()=>clearTimeout(t)})).finally((()=>{o(),i()}))}},808:function(e,t,n){"use strict";n.d(t,"b",(function(){return v})),n.d(t,"a",(function(){return g}));var a=n(191),o=n(197),i=n(31),c=n.n(i),r=n(209),s=n(379);var d=n(716),l=n(205),u=n(1),b=n(199),p=n(430),f=n(211),y=n(318),O=n(192);const v=Object(f.a)((()=>Promise.all([n.e(0),n.e(1),n.e(60)]).then(n.bind(null,1489)))),g=Object(f.a)((()=>Promise.all([n.e(0),n.e(7),n.e(17)]).then(n.bind(null,1498))));t.c=e=>{let{parentFrameRef:t}=e;const n=Object(o.d)(l.f),i=Object(r.a)(p.q),f=!function(e){const t=Object(a.useRef)();return Object(a.useEffect)((()=>{t.current=e}),[e]),t.current}(Object(s.a)()),{appId:h}=Object(a.useMemo)((()=>Object(u.a)()),[]);return Object(a.useEffect)((()=>{if(!f)return;(async()=>{try{const e=await d.a.get(h);if(e){const{type:t}=e;Object(u.e)()("open"),i({state:{...e,type:null!==t&&void 0!==t?t:y.a.REQUEST}})}}catch(e){Object(b.b)(e)}})()}),[i,h,f]),c()(n)?null:Object(O.jsx)(a.Suspense,{fallback:null},n.type===y.a.REQUEST?Object(O.jsx)(v,null):Object(O.jsx)(g,{parentFrameRef:t}))}},810:function(e,t,n){"use strict";n.d(t,"b",(function(){return T})),n.d(t,"a",(function(){return E}));var a=n(50),o=n.n(a),i=n(1195),c=n.n(i),r=n(5),s=n.n(r),d=n(31),l=n.n(d),u=n(314),b=n.n(u),p=n(266),f=n(1),y=n(295),O=n(240);const v="x-chat-token",g=e=>{let{data:t,url:n}=e,a="";return l()(t)||o()(t,(function(e,t){t!==v&&(a+=`${encodeURIComponent(t)}=${encodeURIComponent(s()(e)?JSON.stringify(e):e)}&`)})),a?`${n}?${a.slice(0,-1)}`:n};const h=e=>{var t;null===(t=e.parentNode)||void 0===t||t.removeChild(e)};async function j(e){const{webview:t}=Object(f.a)();if(t){const{url:t,data:n={}}=e,a=g({url:t,data:{...n,generateUrl:!0}}),{data:{fileName:o,url:i}}=await p.a.post(a),c=document.createElement("a");c.setAttribute("href",`livechat-app:url=${Object(y.a)(i,[{key:"fileName",value:o}])}`),c.style.display="none",document.body.appendChild(c),c.click(),setTimeout((()=>h(c)),3e4)}else{const t=function(e){let{url:t,data:n,method:a=O.a.POST,contentType:o}=e;const i=b()(),r=document.createElement("form"),{body:s}=document,d=g({data:n,url:t});return r.setAttribute("id",`spr-chat-download-form-${i}`),r.setAttribute("target","_top"),r.setAttribute("action",d),r.setAttribute("method",a),r.style.display="none",o&&(r.enctype=o),null!==n&&void 0!==n&&n[v]&&(r.innerHTML=`<input type="hidden" id="x-chat-token" name="x-chat-token" value="${c()(n[v])}">`),s.appendChild(r),r}(e);t.submit(),setTimeout((()=>h(t)),3e4)}}var m=n(291),I=n(292),C=n(52);async function T(e){const t=await Object(m.a)(I.a.getAppId(Object(f.a)()));j({url:"https://www.samsung.com/chat/api/livechat/conversation/downloadChatTranscript",data:{timeZone:Object(C.g)(),"x-chat-token":t,conversationId:e}})}async function E(e){const t=await Object(m.a)(I.a.getAppId(Object(f.a)()));j({url:"https://www.samsung.com/chat/api/livechat/conversation/downloadAttachment",data:{timeZone:Object(C.g)(),"x-chat-token":t,...e}})}},814:function(e,t,n){"use strict";n.d(t,"a",(function(){return f})),n.d(t,"c",(function(){return O})),n.d(t,"b",(function(){return v})),n.d(t,"e",(function(){return g})),n.d(t,"f",(function(){return h})),n.d(t,"d",(function(){return j})),n.d(t,"h",(function(){return m})),n.d(t,"g",(function(){return I}));var a=n(193),o=n(192),i=n(377),c=n.n(i),r=n(388),s=n(195),d=n(428),l=n(248),u=n(306);const b=e=>{let{theme:t,triggerWidth:n,triggerHeight:a,triggerXpadding:o,triggerYpadding:i,isTriggerHiddenWhenMaximised:c,triggerTopOffsetBeforeReposition:r}=e;const d=Object(s.e)("frame.align")({theme:t}),l=Object(s.e)("frame.alignTo")({theme:t}),b=Object(s.e)("frame.sXMargin")({theme:t}),p=Object(s.e)("frame.sYMargin")({theme:t}),f="L"===d.slice(-1)?u.b.LEFT:u.b.RIGHT,y=(e=>{let{isTriggerHiddenWhenMaximised:t,alignType:n,frameSYMargin:a,triggerHeight:o,triggerYpadding:i,alignTo:c=u.d.TRIGGER,triggerTopOffsetBeforeReposition:r}=e;if(c===u.d.VIEWPORT)return a;const s=null!==r&&void 0!==r?r:i;return t?s:n===u.c.TRIGGER_BOTTOM_LEFT__BOX_BOTTOM_RIGHT||n===u.c.TRIGGER_BOTTOM_RIGHT__BOX_BOTTOM_LEFT?s+a:o+s+a})({triggerYpadding:i,triggerTopOffsetBeforeReposition:r,triggerHeight:a,isTriggerHiddenWhenMaximised:c,frameSYMargin:p,alignType:d,alignTo:l}),O=(e=>{let{alignType:t,frameSXMargin:n,triggerWidth:a,triggerXpadding:o,alignTo:i=u.d.TRIGGER}=e;if(i===u.d.VIEWPORT)return n;switch(t){case u.c.TRIGGER_BOTTOM_RIGHT__BOX_BOTTOM_LEFT:case u.c.TRIGGER_TOP_RIGHT__BOX_BOTTOM_LEFT:case u.c.TRIGGER_BOTTOM_LEFT__BOX_BOTTOM_RIGHT:case u.c.TRIGGER_TOP_LEFT__BOX_BOTTOM_RIGHT:return a+o+n;case u.c.TRIGGER_TOP_LEFT__BOX_BOTTOM_LEFT:case u.c.TRIGGER_TOP_RIGHT__BOX_BOTTOM_RIGHT:default:return o+n}})({alignType:d,frameSXMargin:b,triggerWidth:n,triggerXpadding:o,alignTo:l});return{xEdgeToAlign:f,xOffset:O,yOffset:y,triggerTopOffsetBeforeReposition:r}},p=e=>{let{yOffset:t,xEdgeToAlign:n,xOffset:a,theme:o,isMaximized:i,triggerTopOffsetBeforeReposition:c}=e;const r=`calc(100% - ${t}px)`;return` \n    ${null!=c?`top: ${c}px;`:`bottom: ${t}px;`}\n    height: ${r};\n    max-height: ${i?r:Object(s.e)("frame.height")({theme:o})};\n    ${n}: ${a}px;\n    max-width: calc(100% - ${a}px);\n    min-width: 200px;\n    transform-origin: ${null!=c?`top ${n}`:`bottom ${n}`};\n    width: ${i?`${Object(s.e)("frame.maximizedWidth")({theme:o})}px`:`${Object(s.e)("frame.width")({theme:o})}px`};\n    `};const f=200,y=Object(a.a)("div",{target:"e19bzbh60"})("position:fixed;box-sizing:border-box;z-index:",(e=>Object(s.e)("frame.zIndex")(e)),";padding:",(e=>Object(s.h)("frame.margin")(e)),";transform:",(e=>`translateZ(${Object(s.e)("frame.translateZ")(e)}px)`),";",(e=>(e=>{const t=Object(l.c)(Object(s.e)("frame.marginTop")({theme:e})),n=Object(l.c)(Object(s.e)("frame.marginBottom")({theme:e})),a=Object(l.c)(Object(s.e)("frame.marginLeft")({theme:e})),o=Object(l.c)(Object(s.e)("frame.marginRight")({theme:e}));return c()([t,n,a,o],(e=>e>0))})(e.theme)&&`background-color: ${Object(d.j)(Object(s.e)("frame.overlay.opacity")(e),Object(s.e)("frame.overlay.backgroundColour")(e))};`),";"),O=Object(a.a)(y,{target:"e19bzbh61"})((e=>{let{theme:t,isMaximized:n,isPhone:a,triggerPosition:o,triggerTopOffsetBeforeReposition:i,isTriggerHiddenWhenMaximised:c}=e;return(e=>{let{isTriggerHiddenWhenMaximised:t,theme:n,isMaximized:a,isPhone:o,triggerPosition:i,triggerTopOffsetBeforeReposition:c}=e;if(o)return"\n    height: 100%;\n    width: 100vw;\n    top: 0;\n    bottom: 0;\n    right: 0;\n    left: 0;\n    max-height: 100vh;\n    max-width: 100vw;\n    min-width: 100vw;\n  ";const r=b({theme:n,isTriggerHiddenWhenMaximised:t,triggerWidth:i.width,triggerHeight:i.height,triggerXpadding:i[i.edge],triggerTopOffsetBeforeReposition:c,triggerYpadding:i.bottom});return p({...r,theme:n,isMaximized:a})})({theme:t,isMaximized:n,isPhone:a,triggerPosition:o,triggerTopOffsetBeforeReposition:i,isTriggerHiddenWhenMaximised:c})}),""),v=Object(a.a)(y,{target:"e19bzbh62"})((e=>{let{theme:t,isMaximized:n,isPhone:a,triggerPosition:o,isTriggerHiddenWhenMaximised:i}=e;return(e=>{let{isTriggerHiddenWhenMaximised:t,theme:n,isMaximized:a,isPhone:o,triggerPosition:i}=e;const c="L"===Object(s.e)("frame.align")({theme:n}).slice(-1)?u.b.LEFT:u.b.RIGHT,{xOffset:r,yOffset:d}=b({theme:n,isTriggerHiddenWhenMaximised:t,triggerHeight:i.height,triggerWidth:i.width,triggerXpadding:c===u.b.LEFT?i.left:i.right,triggerYpadding:i.bottom});if(o)return`\n      top: 0;\n      bottom: ${d}px;\n      ${c}: ${r}px;\n      ${c===u.b.LEFT?u.b.RIGHT:u.b.LEFT}: 0;\n      width: calc(100vw - ${r}px);\n      height: calc(100% - ${d}px);\n      min-width: calc(100vw - ${r}px);\n      max-width:  100vh;\n      max-height: 100vh;\n    `;return p({xEdgeToAlign:c,xOffset:r,yOffset:d,theme:n,isMaximized:a})})({theme:t,isMaximized:n,isPhone:a,triggerPosition:o,isTriggerHiddenWhenMaximised:i})}),""),g=Object(a.a)("div",{target:"e19bzbh63"})("height:100%;width:100%;position:relative;overflow:hidden;box-shadow:",(e=>Object(s.e)("frame.boxShadow")(e)),";border-radius:",(e=>Object(s.e)("frame.borderRadius")(e)),";",(e=>{const t=Object(l.c)(Object(s.e)("frame.marginTop")(e)),n=Object(l.c)(Object(s.e)("frame.marginBottom")(e)),a=Object(l.b)(Object(s.e)("frame.borderRadius")(e)),o=t>0?a[0]:0,i=t>0?a[1]:0,c=n>0?a[2]:0,r=n>0?a[3]:0;return e.isPhone&&`\n    border-radius: ${o}px ${i}px ${c}px ${r}px;\n    box-shadow: none;`}),";"),h="spr-chat-box-anim",j=Object(a.a)(r.a,{target:"e19bzbh64"})({name:"u9q5m7",styles:"border:0 none;height:100%;width:100%;position:absolute;bottom:0;"}),m=e=>Object(o.css)(e.isPhone?(e=>Object(o.css)(`\n  .spr-chat__box.${h}-enter {\n    opacity: 0;\n    transform: translateZ(${Object(s.e)("frame.translateZ")(e)}px) translateY(20px) ;\n  }\n\n  .spr-chat__box.${h}-enter.${h}-enter-active {\n    opacity: 1;\n    transform: translateZ(${Object(s.e)("frame.translateZ")(e)}px) translateY(0px) ;\n    transition: opacity 0.16s linear, transform 0.08s linear;\n  }\n\n  .spr-chat__box.${h}-enter-done {\n    transform: translateZ(${Object(s.e)("frame.translateZ")(e)}px) ;\n  }\n\n  .spr-chat__box.${h}-exit {\n    opacity: 1;\n    transform: translateZ(${Object(s.e)("frame.translateZ")(e)}px) translateY(0);\n  }\n  .spr-chat__box.${h}-exit.${h}-exit-active {\n    opacity: 0;\n    transform: translateZ(${Object(s.e)("frame.translateZ")(e)}px) translateY(20px);\n    transition: opacity 0.16s linear, transform 0.08s linear;\n  }\n`,""))(e):`\n.spr-chat__box.${h}-enter {\n  scale: 0;\n  opacity: 0;\n}\n.spr-chat__box.${h}-enter.${h}-enter-active {\n  scale: 1;\n  opacity: 1;\n  transition: opacity 0.16s ease-out 0s, scale 0.16s linear;\n}\n.spr-chat__box.${h}-exit {\n  scale: 1;\n  opacity: 1;\n}\n.spr-chat__box.${h}-exit.${h}-exit-active {\n  scale: 0;\n  opacity: 0;\n  transition: opacity 0.16s ease-out 0s, scale 0.2s cubic-bezier(0.2, 0.2, 0.8, 0.8);\n}\n`,""),I={name:"2b9rdz",styles:".frame-content{width:100%;height:100%;}.frame-root{height:100%;width:100%;}"}},818:function(e,t,n){"use strict";var a=n(200),o=n(191),i=n.n(o),c=n(206),r=n.n(c),s=n(196),d=n(193),l=n(192),u=n(198);const b=Object(d.a)("button",{target:"e1nedcse0"})("background-color:transparent;border-radius:4px;border:0;cursor:pointer;height:40px;position:relative;width:40px;:before{content:'';display:block;opacity:0;position:absolute;transition-duration:0.15s;transition-timing-function:cubic-bezier(0.4,0,0.2,1);bottom:0;left:0;right:0;top:0;background:none;border-radius:4px;box-sizing:border-box;transform:scale(0);transition-property:transform,opacity;}&:hover:before,&:focus:before{border:none;opacity:1;transform:scale(1);}",u.o,"{&:hover:before,&:focus:before{opacity:0;transform:scale(0);}&:active:before{border:none;opacity:1;transform:scale(1);}}"),p={name:"1qlyuxe",styles:"position:relative;height:12px;width:12px;flex:0 0 auto;"},f=i.a.forwardRef(((e,t)=>{const{iconName:n,iconCss:i,Icon:c,onLoad:d,...u}=e,f=Object(o.useMemo)((()=>i?[p,i]:[p]),[i]);return Object(l.jsx)(b,Object(a.a)({},u,{ref:t,className:r()("center-x-y",e.className)}),Object(l.jsx)(s.b,{alt:c,name:n,css:f,onLoad:d,"aria-hidden":!0,focusable:!1}),e.children)}));t.a=f},857:function(e,t,n){"use strict";var a=n(31),o=n.n(a);t.a=new class{constructor(){var e=this;this.queue=void 0,this.buffer=void 0,this._isFlushingInProgress=void 0,this._isReFlushPending=void 0,this.getQueue=()=>this.queue,this.getBufferQueue=()=>this.buffer,this.isFlushingInProgress=()=>this._isFlushingInProgress,this.setIsFlushingInProgress=e=>{this._isFlushingInProgress=e},this.isReFlushPending=()=>this._isReFlushPending,this.setIsReFlushPending=e=>{this._isReFlushPending=e},this.addCmdToQueue=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];o()(n)||e.push(...n)},this.move=(e,t)=>{e.forEach((()=>{this.addCmdToQueue(t,this.popNextCmd(e))}))},this.isEmpty=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.queue;return o()(t)},this.popNextCmd=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.queue;return t.shift()},this.queue=[],this.buffer=[],this._isFlushingInProgress=!1,this._isReFlushPending=!1}}},858:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));const a="@user/UPDATE_USER_SETTINGS"},859:function(e,t,n){var a=n(1141),o=n(123);e.exports=function(e,t){return null!=e&&o(e,t,a)}},860:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));const a={ALL_SYSTEMS_OPERATIONAL:"ALL_SYSTEMS_OPERATIONAL",SERVICE_UNDER_MAINTENANCE:"SERVICE_UNDER_MAINTENANCE",PARTIALLY_DEGRADED_SERVICE:"PARTIALLY_DEGRADED_SERVICE",DEGRADED_SYSTEM_SERVICE:"DEGRADED_SYSTEM_SERVICE",MINOR_SYSTEM_OUTAGE:"MINOR_SYSTEM_OUTAGE",PARTIAL_SYSTEM_OUTAGE:"PARTIAL_SYSTEM_OUTAGE",MAJOR_SYSTEM_OUTAGE:"MAJOR_SYSTEM_OUTAGE"}},861:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var a=n(1515),o=n(1407),i=n(1521);const c=Object(a.a)("isSSOAuthorized"),r=Object(a.a)("authToken"),s=Object(a.a)("oneTimeToken");class d{}d.isSSOAuthorized=Object(o.a)(c),d.getAuthToken=Object(o.a)(r),d.hasIsSSOAuthorized=e=>e&&Object(i.a)("isSSOAuthorized",e),d.getOneTimeToken=Object(o.a)(s)},862:function(e,t,n){"use strict";n.d(t,"b",(function(){return d})),n.d(t,"a",(function(){return l}));var a=n(528),o=n.n(a),i=n(8),c=n.n(i),r=n(1),s=n(199);function d(e){const t=Object(s.a)();t&&t.setUser&&t.setUser({id:e.userId,username:o()(`${e.firstName||""} ${e.lastName||""}`),email:e.email||""})}const l=(e,t)=>{const{appId:n}=Object(r.a)(),{chatUser:a}=e;if(c()(t,"otherConfigs.settings.enableSentry")&&!Object(s.a)()){const e=window.document.createElement("script");e.src="https://live-chat-static.sprinklr.com/sentry/sentry.min.js",e.crossOrigin="anonymous",e.onload=()=>{Object(s.a)().onLoad((()=>{Object(s.a)().init({tunnel:"https://www.samsung.com/chat/sentry",ignoreErrors:["ResizeObserver loop limit exceeded","ResizeObserver loop completed with undelivered notifications","Network Error"],denyUrls:[/extension:\/\//i]}),Object(s.a)().setTag("appId",n),Object(s.a)().setTag("appVersion","iNzGdiUYs"),d(a)}))},window.document.body.appendChild(e)}}},863:function(e,t,n){var a=n(526);e.exports=function(e,t){for(var n=e.length;n--&&a(t,e[n],0)>-1;);return n}},878:function(e,t,n){"use strict";var a=n(191),o=n.n(a),i=n(217),c=n.n(i);const r=o.a.createContext([null,c.a]);t.a=r},896:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return y}));var a=n(191),o=n(281),i=n.n(o),c=n(31),r=n.n(c),s=n(696),d=n(618),l=n(242),u=n(192);const b={byIds:{}},p=Object(a.createContext)(b),f=(e,t)=>{if(t.type===l.u){const{id:n,details:a}=t.payload;return r()(e.byIds[n])?i()(e,{byIds:{$merge:{[n]:a}}}):i()(e,{byIds:{[n]:{$merge:a}}})}return e},y=e=>{let{children:t}=e;const[n,o]=Object(a.useReducer)(f,b),i=Object(d.a)(),c=Object(a.useCallback)((e=>{const{type:t,payload:n}=e,a=null===i||void 0===i?void 0:i.find((e=>{var t,a;return(null===e||void 0===e||null===(t=e.provider)||void 0===t||null===(a=t.details)||void 0===a?void 0:a.id)===n.id}));a&&o({type:t,payload:{...n,id:a.id}})}),[i]);return Object(s.a)(l.u,c),Object(u.jsx)(p.Provider,{value:n},t)}},898:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(193),o=n(341),i=n(198);const c=Object(a.a)(o.a,{target:"e1yw42fw0"})("position:absolute;top:40px;height:20px;width:20px;",(e=>{let{isPhone:t}=e;return t&&"\n    height: 14px;\n    width: 14px;\n    top: 20px;\n   "}),";padding:0;",Object(i.e)(i.j,i.h),";")},900:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return u}));var a=n(191),o=n.n(a),i=n(217),c=n.n(i),r=n(712),s=n(192);const d={debug:c.a,info:c.a,error:c.a,warning:c.a,cleanup:c.a},l=o.a.createContext(d),u=e=>{let{videoConversationId:t,conversationId:n,isAudioCall:a,children:o}=e;const i=Object(r.a)({videoConversationId:t,conversationId:n,isAudioCall:a});return Object(s.jsx)(l.Provider,{value:i},o)}},901:function(e,t,n){"use strict";var a=n(191),o=n(197),i=n(223),c=n(311),r=n(212),s=n(241),d=n(240),l=n(601);const u=(new i.a).setUrl("/video-chat/conversation/log/event").setType(d.a.POST).build();t.a=e=>{let{videoConversationId:t,conversationId:n}=e;const[i]=Object(c.a)(u,{ignoreResults:!0}),d=Object(o.d)(r.h),b=Object(s.d)(d),p=Object(a.useCallback)((e=>{const{eventType:n,activityAdditionalDetails:a}=e;return{videoConversationId:t,loggerSnUserId:b,eventType:n,loggerSnType:"SPRINKLR_LIVE_CHAT",offsetTime:0,activityAdditionalDetails:a}}),[n,t,b]);return Object(a.useMemo)((()=>new l.a(i,{adapter:p,skip:!t})),[i,p,t])}},902:function(e,t,n){"use strict";var a=n(211);const o=()=>n.e(20).then(n.bind(null,1405)),i=e=>n(1189)(`./${e.toLowerCase()}/pages`),c=Object(a.a)(o);c.preload=e=>Promise.all([i(e),o()]),t.a=c},903:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(193),o=n(248),i=n(429);const c=Object(a.a)("div",{target:"e1kwqiqk0"})("width:100%;position:relative;height:",(e=>Object(o.a)(Object(i.c)(e))),";")},904:function(e,t,n){"use strict";function a(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);null!==e&&void 0!==e&&this.setState(e)}function o(e){this.setState(function(t){var n=this.constructor.getDerivedStateFromProps(e,t);return null!==n&&void 0!==n?n:null}.bind(this))}function i(e,t){try{var n=this.props,a=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(n,a)}finally{this.props=n,this.state=a}}function c(e){var t=e.prototype;if(!t||!t.isReactComponent)throw new Error("Can only polyfill class components");if("function"!==typeof e.getDerivedStateFromProps&&"function"!==typeof t.getSnapshotBeforeUpdate)return e;var n=null,c=null,r=null;if("function"===typeof t.componentWillMount?n="componentWillMount":"function"===typeof t.UNSAFE_componentWillMount&&(n="UNSAFE_componentWillMount"),"function"===typeof t.componentWillReceiveProps?c="componentWillReceiveProps":"function"===typeof t.UNSAFE_componentWillReceiveProps&&(c="UNSAFE_componentWillReceiveProps"),"function"===typeof t.componentWillUpdate?r="componentWillUpdate":"function"===typeof t.UNSAFE_componentWillUpdate&&(r="UNSAFE_componentWillUpdate"),null!==n||null!==c||null!==r){var s=e.displayName||e.name,d="function"===typeof e.getDerivedStateFromProps?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error("Unsafe legacy lifecycles will not be called for components using new component APIs.\n\n"+s+" uses "+d+" but also contains the following legacy lifecycles:"+(null!==n?"\n  "+n:"")+(null!==c?"\n  "+c:"")+(null!==r?"\n  "+r:"")+"\n\nThe above lifecycles should be removed. Learn more about this warning here:\nhttps://fb.me/react-async-component-lifecycle-hooks")}if("function"===typeof e.getDerivedStateFromProps&&(t.componentWillMount=a,t.componentWillReceiveProps=o),"function"===typeof t.getSnapshotBeforeUpdate){if("function"!==typeof t.componentDidUpdate)throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");t.componentWillUpdate=i;var l=t.componentDidUpdate;t.componentDidUpdate=function(e,t,n){var a=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:n;l.call(this,e,t,a)}}return e}n.r(t),n.d(t,"polyfill",(function(){return c})),a.__suppressDeprecationWarning=!0,o.__suppressDeprecationWarning=!0,i.__suppressDeprecationWarning=!0},905:function(e,t,n){"use strict";t.__esModule=!0,t.classNamesShape=t.timeoutsShape=void 0;var a;(a=n(250))&&a.__esModule;t.timeoutsShape=null;t.classNamesShape=null},906:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));const a="trigger-close-icon-container"},908:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n(191),o=n(282),i=n.n(o),c=n(451);const r=Object(c.c)(),s=e=>{const t=Object(a.useRef)(!1),n=Object(a.useRef)(0);return{onTouchStart:Object(a.useCallback)((()=>{t.current=!0}),[]),onTouchMove:Object(a.useCallback)(i()((()=>{t.current=!1}),100),[]),onTouchEnd:Object(a.useCallback)((n=>{t.current&&e(),t.current=!1,n.stopPropagation(),n.preventDefault()}),[e]),onTouchCancel:Object(a.useCallback)((()=>{t.current=!1}),[]),onDragStart:Object(a.useCallback)((e=>{n.current=e.timeStamp}),[]),onDragStop:Object(a.useCallback)((a=>{r&&!t.current&&a.timeStamp-n.current<=100&&(t.current=!1,e()),n.current=0}),[e])}}},909:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));const a=e=>e.split("").reduce(((e,t)=>(e<<5)-e+t.charCodeAt(0)),0)},910:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));const a={BUNDLE_DOWNLOAD_FAILED:"BUNDLE_DOWNLOAD_FAILED",SESSION_CREATION_FAILED:"SESSION_CREATION_FAILED",OTP_SEND_FAILED:"OTP_SEND_FAILED",POSTBACK_SEND_FAILED:"POSTBACK_SEND_FAILED",RESUME_SESSION_FAILED:"RESUME_SESSION_FAILED"}},911:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));const a=new(n(591).a)},912:function(e,t,n){"use strict";t.a={PDF:"PDF",EXCEL:"EXCEL",DOCUMENT:"DOCUMENT",WORD_DOCUMENT:"DOC",PRESENTATION:"PRESENTATION",ONENOTE:"ONENOTE"}},913:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));const a="@chatPrompt/PROMPT_ACTION_TRIGGER"},914:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return o}));const a={NEW_CONVERSATION:"NEW_CONVERSATION",CLOSE:"CLOSE",URL:"OPEN_URL",VIDEO_CALL:"VIDEO_CALL",AUDIO_CALL:"AUDIO_CALL",OPEN_LAST_CONVERSATION:"OPEN_LAST_CONVERSATION"},o={ENGAGED:"ENGAGED",CLOSED:"CLOSED",TRIGGERED:"TRIGGERED"}},915:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));class a{}a.getMessageType=e=>e.payload.type,a.getConversationId=e=>e.conversationId,a.getSender=e=>e.sender,a.getCreationTime=e=>e.creationTime,a.getPayload=e=>e.payload},916:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(266);const o=async()=>a.a.post("/livechat/conversation/refresh-token")}}]);